<!DOCTYPE html><!-- start: showthread -->
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>Sync between database and game state?</title>
<!-- start: headerinclude -->
<link rel="alternate" type="application/rss+xml" title="Latest Threads (RSS 2.0)" href="syndication.php" />
<link rel="alternate" type="application/atom+xml" title="Latest Threads (Atom 1.0)" href="syndication9896.php?type=atom1.0" />
<link rel="shortcut icon" href="favicon.ico" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<script type="text/javascript" src="jscripts/jquery7e70.js?ver=1823"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" src="jscripts/jquery.plugins.minc4a7.js?ver=1821"></script>
<script type="text/javascript" src="jscripts/generalad07.js?ver=1827"></script>
<script type="text/javascript" src="images/bootbb/js/tooltip.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link href='https://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css' />
<!-- link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" / -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" integrity="sha256-gsmEoJAws/Kd3CjuOQzLie5Q3yshhvmo7YNtBG7aaEY=" crossorigin="anonymous">

<link type="text/css" rel="stylesheet" href="cache/themes/theme3/global982f.css?t=1628341445" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/css378d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/responsive78d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/star_ratings78d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/showthread78d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/greyfa7b.css?t=1628447859" />




<script type="text/javascript">
jQuery(document).on('click', '.panel-heading span.clickable', function(e){
    var jQuerythis = jQuery(this);
	if(!jQuerythis.hasClass('panel-collapsed')) {
		jQuerythis.parents('.panel').find('.panel-body').slideUp();
		jQuerythis.addClass('panel-collapsed');
		jQuerythis.find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
	} else {
		jQuerythis.parents('.panel').find('.panel-body').slideDown();
		jQuerythis.removeClass('panel-collapsed');
		jQuerythis.find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
	}
})
</script>




<script type="text/javascript">
	lang.unknown_error = "An unknown error has occurred.";
	lang.confirm_title = "Please Confirm";
	lang.expcol_collapse = "[-]";
	lang.expcol_expand = "[+]";
	lang.select2_match = "One result is available, press enter to select it.";
	lang.select2_matches = "{1} results are available, use up and down arrow keys to navigate.";
	lang.select2_nomatches = "No matches found";
	lang.select2_inputtooshort_single = "Please enter one or more character";
	lang.select2_inputtooshort_plural = "Please enter {1} or more characters";
	lang.select2_inputtoolong_single = "Please delete one character";
	lang.select2_inputtoolong_plural = "Please delete {1} characters";
	lang.select2_selectiontoobig_single = "You can only select one item";
	lang.select2_selectiontoobig_plural = "You can only select {1} items";
	lang.select2_loadmore = "Loading more results&hellip;";
	lang.select2_searching = "Searching&hellip;";
	
	var templates = {
		modal: '<div class=\"modal\">\
	<div style=\"overflow-y: auto; max-height: 400px;\">\
		<table border=\"0\" cellspacing=\"0\" cellpadding=\"5\" class=\"tborder\">\
			<tr>\
				<td class=\"thead\"><strong>__title__</strong></td>\
			</tr>\
			<tr>\
				<td class=\"trow1\">__message__</td>\
			</tr>\
			<tr>\
				<td class=\"tfoot\">\
					<div style=\"text-align: center\" class=\"modal_buttons\">__buttons__</div>\
				</td>\
			</tr>\
		</table>\
	</div>\
</div>',
		modal_button: '<input type=\"submit\" class=\"button\" value=\"__title__\"/>&nbsp;'
	};
	
	var cookieSecureFlag = "0";
	var cookieDomain = ".sampforum.blast.hk";
	var cookiePath = "index.html";
	var cookiePrefix = "";
	var deleteevent_confirm = "Are you sure you want to delete this event?";
	var removeattach_confirm = "Are you sure you want to remove the selected attachment from this post?";
	var loading_text = 'Loading. <br />Please Wait&hellip;';
	var saving_changes = 'Saving changes&hellip;';
	var use_xmlhttprequest = "1";
	var my_post_key = "45a4994b49d1a8d87bc962654281a443";
	var rootpath = "index.html";
	var imagepath = "images/bootbb/index.html";
  	var yes_confirm = "Yes";
	var no_confirm = "No";
	var MyBBEditor = null;
	var spinner_image = "images/bootbb/spinner.gif";
	var spinner = "<img src='" + spinner_image +"' alt='' />";
	var modal_zindex = 9999;
</script>

<!-- Make videos responsive - https://github.com/davatron5000/FitVids.js (additional video sites added for MyBB) -->
<script type="text/javascript" src="images/bootbb/js/jquery.fitvids.js"></script>
<script>
	$(document).ready(function(){
		// Target the iframe parent div
		var bvc = $(".bootbb-video-container");
		//bvc.css("max-width", "800px");
		bvc.fitVids();
	});
</script>
<!-- end: headerinclude -->
<script>
<!--
	var quickdelete_confirm = "Are you sure you want to delete this post?";
	var quickrestore_confirm = "Are you sure you want to restore this post?";
	var allowEditReason = "1";
	lang.save_changes = "Save Changes";
	lang.cancel_edit = "Cancel Edit";
	lang.quick_edit_update_error = "There was an error editing your reply:";
	lang.quick_reply_post_error = "There was an error posting your reply:";
	lang.quick_delete_error = "There was an error deleting your reply:";
	lang.quick_delete_success = "The post was deleted successfully.";
	lang.quick_delete_thread_success = "The thread was deleted successfully.";
	lang.quick_restore_error = "There was an error restoring your reply:";
	lang.quick_restore_success = "The post was restored successfully.";
	lang.editreason = "Edit Reason";
// -->
</script>
<!-- jeditable (jquery) -->
<script src="jscripts/reportdf88.js?ver=1820"></script>
<script src="jscripts/jeditable/jeditable.min.js"></script>
<script src="jscripts/threadad07.js?ver=1827"></script>
<meta name="description" content="So recently I got back into coding servers after years away from SA-MP, and now I've got a &quot;blocking&quot; question that I can't seem to wrap my mind around. Setting up the server and the database isn't th" />
<link rel="canonical" href="showthread28e6-2.html?tid=598037" />
</head>
<body>
	<!-- start: header -->
<header>
<div class="navbar navbar-default">
     <div class="container">
          <div class="navbar-header">
               <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="Toggle navigation">
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span> 
               </button>
			  
			  <div class="navbar-header scaleimages">
				  <!--<a class="navbar-brand" href="https://sampforum.blast.hk">BootBB</a>-->
				  <a class="" href="index.html"><img src="images/bootbb/logo_forum.gif" /></a>
			  
			  </div>
          </div>
          <div class="collapse navbar-collapse navbar-ex1-collapse">
			  <ul class="nav navbar-nav navbar-right">
				  <!--<li id="nav-portal"><a href="https://sampforum.blast.hk/portal.php"><i class="fa fa-bell"></i> Portal</a></li>-->
               <li id="nav-forums"><a href="index-2.html"><i class="fa fa-group"></i> Forum</a></li>
				<!--<li><a href="https://sampforum.blast.hk/search.php?action=getnew"><i class="fa fa-comment"></i> New Posts</a></li>
            	<li><a href="https://sampforum.blast.hk/search.php?action=getdaily"><i class="fa fa-comments"></i> Today's Posts</a></li>-->
               <li id="nav-search"><a href="search.html"><i class="fa fa-search"></i> Search</a></li>
               <li id="nav-member"><a href="memberlist.html"><i class="fa fa-users"></i> Members</a></li>
               <li id="nav-help"><a href="misc0615.html?action=help"><i class="fa fa-life-bouy"></i> Help</a></li>
				  
<!--<li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cubes"></i> Misc <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
			  <li id="nav-help"><a href="https://sampforum.blast.hk/misc.php?action=help"><i class="fa fa-life-bouy"></i> Help</a></li>
			  <li class="divider"></li>
			  <li id="nav-calendar"><a href="https://sampforum.blast.hk/calendar.php"><i class="fa fa-calendar"></i> Calendar</a></li>
          </ul>
</li> -->
</ul>
  
          </div>
     </div>
</div>
</header>


<div id="container">
	<a name="top" id="top"></a>
		<div id="header">
			<div id="panel">
				<div class="upper">
					<div class="container">

						<!-- start: header_welcomeblock_guest -->
<!--<span><a href="https://sampforum.blast.hk/member.php?action=login" onclick="$('#quick_login').modal({ fadeDuration: 250, keepelement: true }); return false;" class="login btn btn-danger" style="color: #fff;"><i class="fa fa-sign-in"></i> Login</a> <a href="https://sampforum.blast.hk/member.php?action=register" class="register btn btn-success" style="color: #fff;"><i class="fa fa-user-plus"></i> Register</a></span>-->

<span class="float_right hidden-xs">Hello There, Guest!</span>

<br class="clearfix" />
	

				<div class="modal" id="quick_login" style="display: none;">
					<form method="post" action="https://sampforum.blast.hk/member.php">
						<input name="my_post_key" type="hidden" value="45a4994b49d1a8d87bc962654281a443" />
						<input name="action" type="hidden" value="do_login" />
						<input name="url" type="hidden" value="" />
						<input name="quick_login" type="hidden" value="1" />
						<table width="100%" cellspacing="0" cellpadding="0" border="0" class="tborder">
							<tr>
								<td class="thead" colspan="2"><strong>Login</strong></td>
							</tr>
							<tr>
								<td class="trow1" width="25%"><strong>Username:</strong></td>
								<td class="trow1"><input name="quick_username" id="quick_login_username" type="text" value="" class="textbox initial_focus" /></td>
							</tr>
							<tr>
								<td class="trow2"><strong>Password:</strong></td>
								<td class="trow2">
									<input name="quick_password" id="quick_login_password" type="password" value="" class="textbox" /> <a href="member9a16.html?action=lostpw" class="lost_password">Lost Password?</a>
								</td>
							</tr>
							<tr>
								<td class="trow1">&nbsp;</td>
								<td class="trow1 remember_me">
									<input name="quick_remember" id="quick_login_remember" type="checkbox" value="yes" class="checkbox" checked="checked" />
									<label for="quick_login_remember">Remember me</label>
								</td>
							</tr>
							<tr>
								<td class="trow2" colspan="2">
									<div align="center"><input name="submit" type="submit" class="button" value="Login" /></div>
								</td>
							</tr>
						</table>
					</form>
				</div>
				<script type="text/javascript">
					$("#quick_login input[name='url']").val($(location).attr('href'));
				</script>
<!-- end: header_welcomeblock_guest -->
					
					</div>
			</div>
			</div>
	</div>
			</div>
               
				   
                <main class="container">
				<br />
                 <!-- start: nav -->
<ol class="breadcrumb container"><!-- start: nav_bit -->
<li><a href="index-2.html">SA-MP Forums Archive</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplayb1dd.html?fid=8">SA-MP Scripting and Plugins</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplay696f.html?fid=12">Scripting Help</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplay28f3.html?fid=84&amp;page=8">Discussion</a></li>
<!-- end: nav_bit --><!-- start: nav_sep_active -->

<!-- end: nav_sep_active --></ol>
<!-- end: nav -->
				
				
				
				
				
				
<!-- end: header -->
	
	
	<div class="float_left">
		
	</div>
	<div class="float_right">
		
	</div>
	<br class="clear" />
	<div class="tborder tfixed clear">
		<div class="thead">
				<div class="float_right">
					<span class="smalltext"><a href="showthreadcdc7.html?mode=threaded&amp;tid=598037&amp;pid=3638283#pid3638283">Threaded Mode</a></span>
				</div>
				
					Sync between database and game state?
			</div>
	</div>
<div id="posts_container">
	<div id="posts">
		<!-- start: postbit_classic -->

<a id="pid3638283"></a>
<div class="post classic " style="" id="post_3638283">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1321.html?action=profile&amp;uid=28749"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1321.html?action=profile&amp;uid=28749">Anarkien</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Huge Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 269<br />
	Threads: 25<br />
	Joined: May 2008
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation6f58-2.html?uid=28749"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread6ff0-2.html?tid=598037&amp;pid=3638283#pid3638283" title="Sync between database and game state?">#1</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 1 by Anarkien" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">08.01.2016, 06:14 <span class="post_edit" id="edited_by_3638283"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3638283">
		So recently I got back into coding servers after years away from SA-MP, and now I've got a "blocking" question that I can't seem to wrap my mind around.<br />
<br />
Setting up the server and the database isn't the issue here. What I can't seem to understand is how the game state is synced with a database. Allow me to explain.<br />
<br />
On server start I fetch the data from my database to have the initial game state.<br />
On server close I store the data back into the database.<br />
<br />
But what happens in between? What if I make a gamemode where users can buy a house. If the house is bought, nobody else can buy it. If I only sync data on server start and close, a house that has been bought within the "current" server session will not be displayed as bought for other players, because the state is not synced with the database. <br />
<br />
So the kinda impractical solutions I've thought through are:<br />
<br />
1. Will I need an additional "source of truth" (in-memory database or simply a massive object replicating the database structure) to handle all changes to the game state so that all players can immediately see changes (such as a house going from available to unavailable if someone buys it)<br />
2. Sync with the database every time a player does <i>something</i> sync-worthy, like buying a house, dying, depositing cash, etc.<br />
3. Sync on interval (performance hit?)<br />
<br />
Are there any other solutions to this? I feel like I'm seriously over-complicating this...
	</div>
	
	
	<div class="post_meta" id="post_meta_3638283">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search827d-2.html?action=finduser&amp;uid=28749" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply2b91.html?tid=598037&amp;replyto=3638283" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3638342"></a>
<div class="post classic " style="" id="post_3638342">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member8928.html?action=profile&amp;uid=13347"><img src="uploads/avatars/13347.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member8928.html?action=profile&amp;uid=13347">Vince</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Spam Machine<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 10,066<br />
	Threads: 38<br />
	Joined: Sep 2007
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation5f8c.html?uid=13347"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread2d6b-2.html?tid=598037&amp;pid=3638342#pid3638342" title="Re: Sync between database and game state?">#2</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 2 by Vince" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">08.01.2016, 08:55 <span class="post_edit" id="edited_by_3638342"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3638342">
		Replicating the database structure, i.e. fetching all of the stuff and putting it in global variables, is in my opinion super redundant and unnecessary. It may be a bit faster that way but you lose all flexibility and with threaded queries it shouldn't even matter. Update data immediately when it changes. This has the advantage that you don't have overly long queries and that you usually don't need to separately save all the data on disconnect.
	</div>
	
	
	<div class="post_meta" id="post_meta_3638342">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchb624.html?action=finduser&amp;uid=13347" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplyb7c9-2.html?tid=598037&amp;replyto=3638342" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3638354"></a>
<div class="post classic " style="" id="post_3638354">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1321.html?action=profile&amp;uid=28749"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1321.html?action=profile&amp;uid=28749">Anarkien</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Huge Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 269<br />
	Threads: 25<br />
	Joined: May 2008
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation6f58-2.html?uid=28749"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread876e-3.html?tid=598037&amp;pid=3638354#pid3638354" title="Re: Sync between database and game state?">#3</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 3 by Anarkien" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">08.01.2016, 09:04 <span class="post_edit" id="edited_by_3638354"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3638354">
		<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Vince</strong><br />
<a href="showthread2d6b-2.html?pid=3638342#pid3638342" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">Replicating the database structure, i.e. fetching all of the stuff and putting it in global variables, is in my opinion super redundant and unnecessary. It may be a bit faster that way but you lose all flexibility and with threaded queries it shouldn't even matter. Update data immediately when it changes. This has the advantage that you don't have overly long queries and that you usually don't need to separately save all the data on disconnect.</div>
</td>
</tr>
</table>
</div>Thanks for your input on this.<br />
<br />
By "Update data immediately [...]" you mean both executing a database update on the changed object <b>as well as</b> querying the database for the newly updated version of the data?
	</div>
	
	
	<div class="post_meta" id="post_meta_3638354">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search827d-2.html?action=finduser&amp;uid=28749" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply7b9c.html?tid=598037&amp;replyto=3638354" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3638429"></a>
<div class="post classic " style="" id="post_3638429">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member5ba7.html?action=profile&amp;uid=173463"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member5ba7.html?action=profile&amp;uid=173463">AmigaBlizzard</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Huge Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 319<br />
	Threads: 7<br />
	Joined: Jul 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation5baa.html?uid=173463"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadd56e-3.html?tid=598037&amp;pid=3638429#pid3638429" title="Re: Sync between database and game state?">#4</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 4 by AmigaBlizzard" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">08.01.2016, 11:30 <span class="post_edit" id="edited_by_3638429"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3638429">
		You could create many small function to adjust your server-data and the database at once.<br />
Like:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 258px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #FF8000">// This function adds the given Money and Score values to the given player
<br/></span><span style="color: #0000BB">Player_Reward</span><span style="color: #007700">(</span><span style="color: #0000BB">playerid</span><span style="color: #007700">, </span><span style="color: #0000BB">Money</span><span style="color: #007700">, </span><span style="color: #0000BB">Score</span><span style="color: #007700">)
<br/>{
<br/>    new </span><span style="color: #0000BB">Query</span><span style="color: #007700">[</span><span style="color: #0000BB">128</span><span style="color: #007700">];

<br/>    </span><span style="color: #FF8000">// Add the given Money and Score to the player's account
<br/>    </span><span style="color: #0000BB">PlayerData</span><span style="color: #007700">[</span><span style="color: #0000BB">playerid</span><span style="color: #007700">][</span><span style="color: #0000BB">PlayerMoney</span><span style="color: #007700">] = </span><span style="color: #0000BB">PlayerData</span><span style="color: #007700">[</span><span style="color: #0000BB">playerid</span><span style="color: #007700">][</span><span style="color: #0000BB">PlayerMoney</span><span style="color: #007700">] + </span><span style="color: #0000BB">Money</span><span style="color: #007700">;
<br/>    </span><span style="color: #0000BB">PlayerData</span><span style="color: #007700">[</span><span style="color: #0000BB">playerid</span><span style="color: #007700">][</span><span style="color: #0000BB">PlayerScore</span><span style="color: #007700">] = </span><span style="color: #0000BB">PlayerData</span><span style="color: #007700">[</span><span style="color: #0000BB">playerid</span><span style="color: #007700">][</span><span style="color: #0000BB">PlayerScore</span><span style="color: #007700">] + </span><span style="color: #0000BB">Score</span><span style="color: #007700">;

<br/>    </span><span style="color: #FF8000">// Update money and score for this player in the player's account in MySQL
<br/>    </span><span style="color: #0000BB">mysql_format</span><span style="color: #007700">(</span><span style="color: #0000BB">SQL_db</span><span style="color: #007700">, </span><span style="color: #0000BB">Query</span><span style="color: #007700">, </span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">Query</span><span style="color: #007700">), </span><span style="color: #DD0000">"UPDATE playerdata SET Money = '%i', Score = '%i' WHERE ID = '%i'"</span><span style="color: #007700">, </span><span style="color: #0000BB">PlayerData</span><span style="color: #007700">[</span><span style="color: #0000BB">playerid</span><span style="color: #007700">][</span><span style="color: #0000BB">PlayerMoney</span><span style="color: #007700">], </span><span style="color: #0000BB">PlayerData</span><span style="color: #007700">[</span><span style="color: #0000BB">playerid</span><span style="color: #007700">][</span><span style="color: #0000BB">PlayerScore</span><span style="color: #007700">], </span><span style="color: #0000BB">PlayerData</span><span style="color: #007700">[</span><span style="color: #0000BB">playerid</span><span style="color: #007700">][</span><span style="color: #0000BB">SQLID</span><span style="color: #007700">]);
<br/>    </span><span style="color: #0000BB">mysql_tquery</span><span style="color: #007700">(</span><span style="color: #0000BB">SQL_db</span><span style="color: #007700">, </span><span style="color: #0000BB">Query</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">);

<br/>    return </span><span style="color: #0000BB">1</span><span style="color: #007700">;
<br/>} 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>With your housing system, you can simply write a function that also saves the updated house-data to the database when a player buys the house.<br />
<br />
Or you can write code to use the server-data instead of database-data to check if the house is owned or not.<br />
Since you load everything from the database when your server is started, both have the same data anyway.<br />
Looping through an array and finding the correct house based on the id of the nearby pickup is alot faster than sending a query, wait the mysql to search the database, compile a result, send it back to your script and examine the result and probably have extra code to account for every possible result (no rows returned, too many rows returned, ...).<br />
<br />
<br />
Looping the array should only take a few microseconds as it happens in RAM, while a query can easily take a few milliseconds to execute (a few thousand times slower because your database is still a file on a harddrive).<br />
<br />
I only use code to browse my database for gathering offline data, like when using the /topscore command.<br />
This command gathers data from ALL players to create a sorted list of players based on their score, money, missions completed, ...<br />
<br />
For displaying owned/unowned houses, you can browse through your loaded data in the server's memory instead (it's loaded anyways when server is started since you probably need to create and setup 3DTexts at the entrance of the houses) and it will be alot faster too.<br />
<br />
<br />
<br />
I would personally recommend it to save your changes to the database immediately whenever they change on the server.<br />
Why?<br />
<br />
If you would have a sudden server-crash and nothing has been saved for days, you lose it all.<br />
Your players won't be happy.<br />
<br />
I wouldn't play on a server where the server only saves data when I disconnect.<br />
Some players like myself play for hours at a time without disconnecting.<br />
If the server would crash for some reason (power-failure at the host company, hacker, DDOS attack, rare bug in the script which could cause a endless loop, whatever), I would lose all my progress I made during my playing session and when I find out I'm back to where I was yesterday (the time when I logged in before the crash) and I lost a day of playtime, I wouldn't ever come back to that server.<br />
<br />
Every online game server saves progress regularly.<br />
<br />
Don't expect your server to be online 24/7 and never have issues.<br />
<br />
Save regularly to avoid data-loss.<br />
I save everything whenever it changes.<br />
Of course, if I would log the distance which a player has traveled by car, I won't update that data every millisecond, that's not the idea either.<br />
For fast changing data, it should be sufficient to save that every minute using a timer.<br />
<br />
And you won't risk updating data that hasn't been changed either.<br />
I see many scripts saving ALL player-data when they disconnect.<br />
Even admin-level, vip-status, even the character's sex on roleplay servers.<br />
Such data is rarely changed, why update it when it hasn't changed?<br />
<br />
Sometimes players login to check on something (if a friend is online perhaps) and logout again.<br />
Such scripts would update all loaded data again, but nothing has changed, not even their money, score, or ownership of a house and more.<br />
<br />
Just save when it changes and you'll be fine.
	</div>
	
	
	<div class="post_meta" id="post_meta_3638429">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search95d6.html?action=finduser&amp;uid=173463" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply8e95.html?tid=598037&amp;replyto=3638429" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3638431"></a>
<div class="post classic " style="" id="post_3638431">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member5ba7.html?action=profile&amp;uid=173463"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member5ba7.html?action=profile&amp;uid=173463">AmigaBlizzard</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Huge Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 319<br />
	Threads: 7<br />
	Joined: Jul 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation5baa.html?uid=173463"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadfee3-2.html?tid=598037&amp;pid=3638431#pid3638431" title="Re: Sync between database and game state?">#5</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 5 by AmigaBlizzard" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">08.01.2016, 11:32 <span class="post_edit" id="edited_by_3638431"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3638431">
		Double-post, sorry
	</div>
	
	
	<div class="post_meta" id="post_meta_3638431">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search95d6.html?action=finduser&amp;uid=173463" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply2d83.html?tid=598037&amp;replyto=3638431" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3638515"></a>
<div class="post classic " style="" id="post_3638515">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1321.html?action=profile&amp;uid=28749"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1321.html?action=profile&amp;uid=28749">Anarkien</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Huge Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 269<br />
	Threads: 25<br />
	Joined: May 2008
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation6f58-2.html?uid=28749"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadc9f3-2.html?tid=598037&amp;pid=3638515#pid3638515" title="Re: Sync between database and game state?">#6</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 6 by Anarkien" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">08.01.2016, 14:39 <span class="post_edit" id="edited_by_3638515"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3638515">
		Thanks a bunch, AmigaBlizzard. Thorough explanation. I will definitely go that way <img alt="" border="0" class="inlineimg" src="images/smilies/smile.png" title="Smiley"/>
	</div>
	
	
	<div class="post_meta" id="post_meta_3638515">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search827d-2.html?action=finduser&amp;uid=28749" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply96b9.html?tid=598037&amp;replyto=3638515" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3638585"></a>
<div class="post classic " style="" id="post_3638585">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="membera2f8.html?action=profile&amp;uid=10237"><img src="uploads/avatars/10237.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="membera2f8.html?action=profile&amp;uid=10237">Mauzen</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				High-roller<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 4,878<br />
	Threads: 85<br />
	Joined: Jun 2007
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation6c70.html?uid=10237"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread3cd8-3.html?tid=598037&amp;pid=3638585#pid3638585" title="Re: Sync between database and game state?">#7</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 7 by Mauzen" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">08.01.2016, 17:07 <span class="post_edit" id="edited_by_3638585"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3638585">
		Actually, there is no house, unless you got it in your script. The "database house" is just a set of numbers and strings without any meaning, like a savegame file from a game - its not the game itself, it just tells the game where to start. The "script house" though, probably some kind of enumerated array, is the stuff that syncs with other players, and the stuff you want to store in your database. The players/clients never access the database, they only access the server and the script, I think you got that wrong somehow.<br />
On server start, you load the house from the database into that array, so the script has direct access to it, and so makes the house actually a house that everyone can use, buy, and see. The script itself shouldnt access the database directly most of the time. There are only very few cases outside the load/save process where this would make sense.<br />
<br />
Saving leaves you with 3 possible methods. (save on close, save on changes, save on interval) It turns out that a mixture of all of them is probably the best way to go.<br />
Theres fast changing data. Money, certain XP points, player position, etc. Saving it whenever it changes would be stupid of course. So this should be stored on server close and on player disconnect for best performance.<br />
Then theres data that only changes once in a while, like the ownership of a house. This kind of data can be saved to the database immediately (but remember that this is not needed to sync the house with the other players). It might also be useful to save relevant "fast data" together with it to prevent asynchronous data in case of a server crash (e.g. also save the players money when buying a house, but NOT when buying something cheap that you buy often - food, guns, etc). For most servers, a large part of the data will be such "slow data". Handling this correctly can save you a lot of trouble.<br />
The advantage of having those two types of data saving is that you can ignore the "slow data" in all other saving processes. This leads to method 3, saving in certain intervals. Saving everything every 10 minutes would be a long and painful process that could cause server lag, but leaving out all the "slow data" makes it possible. This method is highly recommended, but optional, and only a fail-save in case the server crashes before saving the data. You dont want your players to lose all the data since their last login, but losing just a few minutes wont hurt that much.<br />
<br />
Best thing probably is to take a look at some well-made gamemodes to see how their database management works.
	</div>
	
	
	<div class="post_meta" id="post_meta_3638585">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchef86.html?action=finduser&amp;uid=10237" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply9b95.html?tid=598037&amp;replyto=3638585" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3639754"></a>
<div class="post classic " style="" id="post_3639754">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1321.html?action=profile&amp;uid=28749"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1321.html?action=profile&amp;uid=28749">Anarkien</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Huge Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 269<br />
	Threads: 25<br />
	Joined: May 2008
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation6f58-2.html?uid=28749"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread20e6-3.html?tid=598037&amp;pid=3639754#pid3639754" title="Re: Sync between database and game state?">#8</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 8 by Anarkien" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">10.01.2016, 18:01 <span class="post_edit" id="edited_by_3639754"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3639754">
		<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Mauzen</strong><br />
<a href="showthread3cd8-3.html?pid=3638585#pid3638585" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">Actually, there is no house, unless you got it in your script. The "database house" is just a set of numbers and strings without any meaning, like a savegame file from a game - its not the game itself, it just tells the game where to start. The "script house" though, probably some kind of enumerated array, is the stuff that syncs with other players, and the stuff you want to store in your database. The players/clients never access the database, they only access the server and the script, I think you got that wrong somehow.<br />
On server start, you load the house from the database into that array, so the script has direct access to it, and so makes the house actually a house that everyone can use, buy, and see. The script itself shouldnt access the database directly most of the time. There are only very few cases outside the load/save process where this would make sense.<br />
<br />
Saving leaves you with 3 possible methods. (save on close, save on changes, save on interval) It turns out that a mixture of all of them is probably the best way to go.<br />
Theres fast changing data. Money, certain XP points, player position, etc. Saving it whenever it changes would be stupid of course. So this should be stored on server close and on player disconnect for best performance.<br />
Then theres data that only changes once in a while, like the ownership of a house. This kind of data can be saved to the database immediately (but remember that this is not needed to sync the house with the other players). It might also be useful to save relevant "fast data" together with it to prevent asynchronous data in case of a server crash (e.g. also save the players money when buying a house, but NOT when buying something cheap that you buy often - food, guns, etc). For most servers, a large part of the data will be such "slow data". Handling this correctly can save you a lot of trouble.<br />
The advantage of having those two types of data saving is that you can ignore the "slow data" in all other saving processes. This leads to method 3, saving in certain intervals. Saving everything every 10 minutes would be a long and painful process that could cause server lag, but leaving out all the "slow data" makes it possible. This method is highly recommended, but optional, and only a fail-save in case the server crashes before saving the data. You dont want your players to lose all the data since their last login, but losing just a few minutes wont hurt that much.<br />
<br />
Best thing probably is to take a look at some well-made gamemodes to see how their database management works.</div>
</td>
</tr>
</table>
</div>Great stuff, lots of moving parts to think about either way it seems like! <br />
I'll definitely take into consideration all of this. I assume I'll go with a combination of all three methods.
	</div>
	
	
	<div class="post_meta" id="post_meta_3639754">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search827d-2.html?action=finduser&amp;uid=28749" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplybc02.html?tid=598037&amp;replyto=3639754" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3658917"></a>
<div class="post classic " style="" id="post_3658917">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="membercec9.html?action=profile&amp;uid=23640"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="membercec9.html?action=profile&amp;uid=23640">Slice</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				High-roller<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 1,831<br />
	Threads: 69<br />
	Joined: Mar 2008
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputatione133.html?uid=23640"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread65a2-2.html?tid=598037&amp;pid=3658917#pid3658917" title="Re: Sync between database and game state?">#9</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 9 by Slice" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">17.02.2016, 11:32 <span class="post_edit" id="edited_by_3658917"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3658917">
		Personally, I link variables to database entries using PVars to store last known values and compare to them every time I do a sync (every 60sec).<br />
The rowid is saved in a PVar so the SQLite overhead becomes as little as possible, since it knows exactly where to perform the update right away, and only update if the value has been changed.<br />
I'll hopefully get around to open-sourcing this code eventually, but for now I'm too busy working on my gamemode.<br />
<br />
<br />
Just to clarify, I only use PVars to dynamically store the variable name, rowid, and previous value. The script modifies a normal variable just like any other.<br />
<br />
The DB is structured like this:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">CREATE TABLE `users` ( `oid` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` text NOT NULL COLLATE NOCASE, `passhash` blob NOT NULL );
CREATE UNIQUE INDEX `oid_users` ON `users` (`oid`);
CREATE UNIQUE INDEX `name_users` ON `users` (`name`);

CREATE TABLE `users_info` ( `uid` integer NOT NULL, `key` text NOT NULL COLLATE NOCASE, `index` integer DEFAULT(NULL), `type` integer NOT NULL, `value` NOT NULL );
CREATE INDEX `key_index_users_info` ON `users_info` (`key`, `index`);
CREATE UNIQUE INDEX `uid_key_index_users_info` ON `users_info` (`uid`, `key`, `index`);
s</pre>
</div>Note that "oid" will automatically link to SQLite's rowid. In users_info, however, I just refer to `rowid` in my queries.<br />
<br />
<br />
The code to sync users is this:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Code:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:359px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">forward</span> SaveUsers<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;<br/><span style="color: #2222BB;">public</span> SaveUsers<span style="color: #000000;">(</span><span style="color: #000000;">)</span><br/><span style="color: #000000;">{</span><br/>    <span style="color: #2222BB;">new</span> i <span style="color: #000000;">=</span> <span style="color: #000000;">0</span>;<br/><br/>    forEachPlayer <span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span> <span style="color: #2222BB;">if</span> <span style="color: #000000;">(</span>g_LoggedIn<span style="color: #000000;">[</span>playerid<span style="color: #000000;">]</span><span style="color: #000000;">)</span> <span style="color: #000000;">{</span><br/>        <span style="color: #2222BB;">if</span> <span style="color: #000000;">(</span>g_SaveTimer<span style="color: #000000;">[</span>playerid<span style="color: #000000;">]</span> <span style="color: #000000;">!=</span> <span style="color: #000000;">-</span><span style="color: #000000;">1</span><span style="color: #000000;">)</span> <span style="color: #000000;">{</span><br/>            KillTimer<span style="color: #000000;">(</span>g_SaveTimer<span style="color: #000000;">[</span>playerid<span style="color: #000000;">]</span><span style="color: #000000;">)</span>;<br/>        <span style="color: #000000;">}</span><br/><br/>        g_SaveTimer<span style="color: #000000;">[</span>playerid<span style="color: #000000;">]</span> <span style="color: #000000;">=</span> SetTimerEx<span style="color: #000000;">(</span><span style="color: #2222AA;">#SaveUserData, ++i * 100, false, "i", playerid);</span><br/>    <span style="color: #000000;">}</span><br/><br/>    SetTimer<span style="color: #000000;">(</span><span style="color: #2222AA;">#LastSaveFinished, i * 100, false);</span><br/><span style="color: #000000;">}</span><br/><br/><span style="color: #2222BB;">forward</span> LastSaveFinished<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;<br/><span style="color: #2222BB;">public</span> LastSaveFinished<span style="color: #000000;">(</span><span style="color: #000000;">)</span><br/><span style="color: #000000;">{</span><br/>    CallRemoteFunction<span style="color: #000000;">(</span><span style="color: #2222AA;">#OnUserDataSave, "");</span><br/><span style="color: #000000;">}</span></div></div></pre>
</div>Why? Because it will limit the size of save queries. I my script prints a warning if saving a single user takes more than 3ms, and I have not seen a warning yet..<br />
<br />
I did something similar in the past, btw: <a href="showthread8182-2.html?tid=311773" target="_blank">https://sampforum.blast.hk/showthread.php?tid=311773</a>
	</div>
	
	
	<div class="post_meta" id="post_meta_3658917">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search023a.html?action=finduser&amp;uid=23640" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply3b97.html?tid=598037&amp;replyto=3658917" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3660330"></a>
<div class="post classic " style="" id="post_3660330">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="membera2f8.html?action=profile&amp;uid=10237"><img src="uploads/avatars/10237.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="membera2f8.html?action=profile&amp;uid=10237">Mauzen</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				High-roller<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 4,878<br />
	Threads: 85<br />
	Joined: Jun 2007
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation6c70.html?uid=10237"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread73fb.html?tid=598037&amp;pid=3660330#pid3660330" title="Re: Sync between database and game state?">#10</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 10 by Mauzen" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">20.02.2016, 03:40 <span class="post_edit" id="edited_by_3660330"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3660330">
		[QUOTE=Slice;3658917]Personally, I link variables to database entries using PVars to store last known values and compare to them every time I do a sync (every 60sec).<br />
The rowid is saved in a PVar so the SQLite overhead becomes as little as possible, since it knows exactly where to perform the update right away, and only update if the value has been changed.<br />
I'll hopefully get around to open-sourcing this code eventually, but for now I'm too busy working on my gamemode.<br />
<br />
<br />
Wouldnt it be even more economical if you ignore the last value, and just set a "modified"-flag whenever you change one of the monitored variables in the script (or maybe check the old value before setting it)? That way you could save all those "did it change" checks every 60 seconds, just checking that flag should be measureable faster when working with many variables. (and thats actually a question, I dont know if its actually faster. Probably depends on the script/how often it writes duplicate values to variables)<br />
Though I still think that the slow/fast-changing data split is the best way to reduce script- and query-overhead. Variable saving is a pretty static thing, the script very well knows when they change, and the scripter knows how often they change. Adding many runtime checks to detect variable changes that you already know at script compilation can just make things slower.<br />
Sure, its no plug-and-play solution and requires more planning, but most scripts could use more planning anyways.
	</div>
	
	
	<div class="post_meta" id="post_meta_3660330">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchef86.html?action=finduser&amp;uid=10237" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply94d4-2.html?tid=598037&amp;replyto=3660330" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic -->
	</div>
</div>
	
			<div class="tfoot row">
				<div class="col-sm-6">
					<strong>&laquo; <a href="showthread197a-4.html?tid=598037&amp;action=nextoldest">Next Oldest</a> | <a href="showthread779d-4.html?tid=598037&amp;action=nextnewest">Next Newest</a> &raquo;</strong>
				</div>
				<div class="col-sm-6"><!-- start: showthread_search -->
	<div class="float_right">
		<form action="https://sampforum.blast.hk/search.php" method="post">
			<input type="hidden" name="action" value="thread" />
			<input type="hidden" name="tid" value="598037" />
			<input type="text" name="keywords" value="Enter Keywords" onfocus="if(this.value == 'Enter Keywords') { this.value = ''; }" onblur="if(this.value=='') { this.value='Enter Keywords'; }" class="textbox" size="25" />
			<input type="submit" class="button" value="Search Thread" />
		</form>
	</div>
<!-- end: showthread_search --></div>
			</div>
	<div class="float_left">
		
	</div>
	<div class="float_right">
		
	</div>
	<br class="clear" />
	
	
	
	<br />
	<div class="float_left">
		<ul class="thread_tools">
			<!-- start: showthread_printthread -->
<li class="printable"><a href="printthread28e6.html?tid=598037">View a Printable Version</a></li>
<!-- end: showthread_printthread -->
			
			
			
		</ul>
	</div>

	<div class="float_right" style="text-align: right;">
		
		<!-- start: forumjump_advanced -->
<form action="https://sampforum.blast.hk/forumdisplay.php" method="get">
<span class="smalltext">Forum Jump:</span>
<select name="fid" class="forumjump">
<option value="-4">Private Messages</option>
<option value="-3">User Control Panel</option>
<option value="-5">Who's Online</option>
<option value="-2">Search</option>
<option value="-1">Forum Home</option>
<!-- start: forumjump_bit -->
<option value="3" > SA-MP</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="74" >-- News and Updates</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="13" >-- General</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="16" >-- Client Support</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="20" >-- Bug Reports</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="21" >-- Screenshots and Videos</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="6" > SA-MP Server</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="19" >-- Server Support</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="22" >-- Server Advertisements</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="8" > SA-MP Scripting and Plugins</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="12" >-- Scripting Help</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="70" >---- Tutorials</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="84" selected="selected">---- Discussion</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="89" >---- Help Archive</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="71" >-- Gamemode Scripts</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="17" >-- Filterscripts</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="83" >---- Includes</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="82" >---- Tools and Files </option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="64" >---- Maps</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="18" >-- Plugin Development</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="92" > SA-MP DL Edition</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="90" >-- SA-MP 0.3.DL</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="94" >---- Model Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="7" > Other</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="23" >-- Everything and Nothing</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="9" > Non-English</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="33" >-- Languages</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="31" >---- Nederlands/Dutch</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="76" >------ Scripting Showroom en Discussie</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="87" >------ Off topic</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="29" >---- Español/Spanish</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="59" >------ Lanzamientos/Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="30" >---- Français/French</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="81" >------ Showroom</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="32" >---- Русский/Russian</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="66" >------ Релизы/Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="34" >---- Português/Portuguese</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="56" >------ Lançamentos/Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="40" >---- Română/Romanian</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="77" >------ Salonul Scripturilor</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="88" >---- Archive</option>
<!-- end: forumjump_bit -->
</select>
<!-- start: gobutton -->
<input type="submit" class="button" value="Go" />
<!-- end: gobutton -->
</form>
<script type="text/javascript">
$(".forumjump").on('change', function() {
	var option = $(this).val();

	if(option < 0)
	{
		window.location = 'forumdisplay0eb7.html?fid='+option;
	}
	else
	{
		window.location = 'forumdisplay0eb7.html?fid='+option;
	}
});
</script>
<!-- end: forumjump_advanced -->
	</div>
	<br class="clear" />
	<!-- start: showthread_usersbrowsing -->
<br />
<span class="smalltext">Users browsing this thread: 1 Guest(s)</span>
<br />
<!-- end: showthread_usersbrowsing -->
	<!-- start: footer -->
<div style="clear:both"><div style="padding-top: 10px"><!-- start: nav -->
<ol class="breadcrumb container"><!-- start: nav_bit -->
<li><a href="index-2.html">SA-MP Forums Archive</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplayb1dd.html?fid=8">SA-MP Scripting and Plugins</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplay696f.html?fid=12">Scripting Help</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplay28f3.html?fid=84&amp;page=8">Discussion</a></li>
<!-- end: nav_bit --><!-- start: nav_sep_active -->

<!-- end: nav_sep_active --></ol>
<!-- end: nav --></div></div>
</main>

<div class="blankspace"></div>

<footer id="footer">
	<div class="container">
    <div class="row">
		
        <!--<div class="col-sm-4 foot">
			<h3>About Our Community</h3>
			<p>Discuss about various topics in our community and have fun while doing so. Welcome to SA-MP Forums Archive</p>
			
		</div>		
		

		<div class="col-sm-4 foot">
			<h3>Quick Links</h3>
			<p>

 				<a href="https://sampforum.blast.hk" class="btn btn-success" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Forum Home"><i class="fa fa-home"></i></a>
				
				<a href="https://sampforum.blast.hk/archive/index.php?thread-598037.html" class="btn btn-danger" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Lite (Archive) Mode"><i class="fa fa-archive"></i></a>
				
				<a href="#" target="_blank"  rel="noopener" class="btn btn-primary" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Become a Fan"><i class="fa fa-facebook-square"></i></a>
				
				<a href="#" target="_blank"  rel="noopener" class="btn btn-info" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Follow Us"><i class="fa fa-twitter"></i></a>
				
				<a href="https://sampforum.blast.hk/misc.php?action=syndication" class="btn btn-warning" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="RSS Syndication"><i class="fa fa-rss"></i></a>
				<br/>
				<a href="misc.php?action=markread&amp;my_post_key=45a4994b49d1a8d87bc962654281a443" class="btn btn-danger" style="color: #fff; margin-top:10px" data-toggle="tooltip" data-placement="bottom" data-original-title="Mark all forums read"><i class="fa fa-book"></i> Mark all forums read</a><br /><br />
				
				
				</p>

		</div>
		
		<div class="col-sm-4 foot">
			
			 <h3>Reach Us</h3>
			 
<p><a href="contact.php" class="btn btn-primary" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Contact Us"><i class="fa fa-envelope"></i> Contact Us</a>&nbsp;
			
			<a href="showteam.php" class="btn btn-danger" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Meet Our Team"><i class="fa fa-users"></i> Forum Team</a></p>
		</div>-->
		
		
		
		<!-- The following piece of code allows MyBB to run scheduled tasks. DO NOT REMOVE --><!-- End task image code -->
		</div>
	
	</div>

	
<div id="copyright">
	<div class="container">
			<div class="pull-right"><!-- start: footer_languageselect -->
<div class="language">
<form method="POST" action="https://sampforum.blast.hk/showthread.php" id="lang_select">
	<input type="hidden" name="tid" value="598037" />

	<input type="hidden" name="my_post_key" value="45a4994b49d1a8d87bc962654281a443" />
	<select name="language" onchange="MyBB.changeLanguage();">
		<optgroup label="Quick Language Select">
			<!-- start: footer_languageselect_option -->
<option value="english" selected="selected">&nbsp;&nbsp;&nbsp;English (American)</option>
<!-- end: footer_languageselect_option --><!-- start: footer_languageselect_option -->
<option value="russian">&nbsp;&nbsp;&nbsp;Russian</option>
<!-- end: footer_languageselect_option -->
		</optgroup>
	</select>
	<!-- start: gobutton -->
<input type="submit" class="button" value="Go" />
<!-- end: gobutton -->
</form>
</div>
<!-- end: footer_languageselect --></div>
			<div class="pull-left">
				<!-- MyBB is free software developed and maintained by a volunteer community.
					It would be much appreciated by the MyBB Group if you left the full copyright and "powered by" notice intact,
					to show your support for MyBB.  If you choose to remove or modify the copyright below,
					you may be refused support on the MyBB Community Forums.

					This is free software, support us and we'll support you. -->
				Powered By <a href="http://www.mybb.com/" target="_blank"  rel="noopener" style="color: #fff;" >MyBB</a>. <a href="https://eree.in/" title="EREE" target="_blank" rel="noopener" style="color: #fff;">Crafted by EREE</a> and <a href="https://forum.androidbg.com/" title="AndroidBG" target="_blank" rel="noopener" style="color: #fff;">Android BG</a>. Also powered by <a href="https://www.blast.hk/"><b>blast.hk</b></a><!-- End powered by -->
				
			</div>
	</div>

</div>

</footer>

<!-- Fix for MentionMe popup window position -->
<script type="text/javascript">
	var MentionMe = (function(m) {
	m.customSCEditorContainerOffset = {
		left: 0,
		top: 2,
	};

	return m;
})(MentionMe || {});
</script>
<!-- End Fix for MentionMe popup window position -->
<!-- end: footer -->
	<script type="text/javascript">
		var thread_deleted = "0";
		if(thread_deleted == "1")
		{
			$("#quick_reply_form, .new_reply_button, .thread_tools, .inline_rating").hide();
			$("#moderator_options_selector option.option_mirage").attr("disabled","disabled");
		}
	</script>
</body>
</html>
<!-- end: showthread -->