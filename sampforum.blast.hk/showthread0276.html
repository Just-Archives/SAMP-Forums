<!DOCTYPE html><!-- start: showthread -->
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title>[Tutorial] AMX Assembly (#emit)</title>
<!-- start: headerinclude -->
<link rel="alternate" type="application/rss+xml" title="Latest Threads (RSS 2.0)" href="syndication.php" />
<link rel="alternate" type="application/atom+xml" title="Latest Threads (Atom 1.0)" href="syndication9896.php?type=atom1.0" />
<link rel="shortcut icon" href="favicon.ico" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<script type="text/javascript" src="jscripts/jquery7e70.js?ver=1823"></script>
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" src="jscripts/jquery.plugins.minc4a7.js?ver=1821"></script>
<script type="text/javascript" src="jscripts/generalad07.js?ver=1827"></script>
<script type="text/javascript" src="images/bootbb/js/tooltip.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link href='https://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css' />
<!-- link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" / -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css" integrity="sha256-gsmEoJAws/Kd3CjuOQzLie5Q3yshhvmo7YNtBG7aaEY=" crossorigin="anonymous">

<link type="text/css" rel="stylesheet" href="cache/themes/theme3/global982f.css?t=1628341445" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/css378d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/responsive78d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/star_ratings78d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/showthread78d5.css?t=1625923460" />
<link type="text/css" rel="stylesheet" href="cache/themes/theme3/greyfa7b.css?t=1628447859" />




<script type="text/javascript">
jQuery(document).on('click', '.panel-heading span.clickable', function(e){
    var jQuerythis = jQuery(this);
	if(!jQuerythis.hasClass('panel-collapsed')) {
		jQuerythis.parents('.panel').find('.panel-body').slideUp();
		jQuerythis.addClass('panel-collapsed');
		jQuerythis.find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
	} else {
		jQuerythis.parents('.panel').find('.panel-body').slideDown();
		jQuerythis.removeClass('panel-collapsed');
		jQuerythis.find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
	}
})
</script>




<script type="text/javascript">
	lang.unknown_error = "An unknown error has occurred.";
	lang.confirm_title = "Please Confirm";
	lang.expcol_collapse = "[-]";
	lang.expcol_expand = "[+]";
	lang.select2_match = "One result is available, press enter to select it.";
	lang.select2_matches = "{1} results are available, use up and down arrow keys to navigate.";
	lang.select2_nomatches = "No matches found";
	lang.select2_inputtooshort_single = "Please enter one or more character";
	lang.select2_inputtooshort_plural = "Please enter {1} or more characters";
	lang.select2_inputtoolong_single = "Please delete one character";
	lang.select2_inputtoolong_plural = "Please delete {1} characters";
	lang.select2_selectiontoobig_single = "You can only select one item";
	lang.select2_selectiontoobig_plural = "You can only select {1} items";
	lang.select2_loadmore = "Loading more results&hellip;";
	lang.select2_searching = "Searching&hellip;";
	
	var templates = {
		modal: '<div class=\"modal\">\
	<div style=\"overflow-y: auto; max-height: 400px;\">\
		<table border=\"0\" cellspacing=\"0\" cellpadding=\"5\" class=\"tborder\">\
			<tr>\
				<td class=\"thead\"><strong>__title__</strong></td>\
			</tr>\
			<tr>\
				<td class=\"trow1\">__message__</td>\
			</tr>\
			<tr>\
				<td class=\"tfoot\">\
					<div style=\"text-align: center\" class=\"modal_buttons\">__buttons__</div>\
				</td>\
			</tr>\
		</table>\
	</div>\
</div>',
		modal_button: '<input type=\"submit\" class=\"button\" value=\"__title__\"/>&nbsp;'
	};
	
	var cookieSecureFlag = "0";
	var cookieDomain = ".sampforum.blast.hk";
	var cookiePath = "index.html";
	var cookiePrefix = "";
	var deleteevent_confirm = "Are you sure you want to delete this event?";
	var removeattach_confirm = "Are you sure you want to remove the selected attachment from this post?";
	var loading_text = 'Loading. <br />Please Wait&hellip;';
	var saving_changes = 'Saving changes&hellip;';
	var use_xmlhttprequest = "1";
	var my_post_key = "fb3a3794df1b872082c4f912f4b319a5";
	var rootpath = "index.html";
	var imagepath = "images/bootbb/index.html";
  	var yes_confirm = "Yes";
	var no_confirm = "No";
	var MyBBEditor = null;
	var spinner_image = "images/bootbb/spinner.gif";
	var spinner = "<img src='" + spinner_image +"' alt='' />";
	var modal_zindex = 9999;
</script>

<!-- Make videos responsive - https://github.com/davatron5000/FitVids.js (additional video sites added for MyBB) -->
<script type="text/javascript" src="images/bootbb/js/jquery.fitvids.js"></script>
<script>
	$(document).ready(function(){
		// Target the iframe parent div
		var bvc = $(".bootbb-video-container");
		//bvc.css("max-width", "800px");
		bvc.fitVids();
	});
</script>
<!-- end: headerinclude -->
<script>
<!--
	var quickdelete_confirm = "Are you sure you want to delete this post?";
	var quickrestore_confirm = "Are you sure you want to restore this post?";
	var allowEditReason = "1";
	lang.save_changes = "Save Changes";
	lang.cancel_edit = "Cancel Edit";
	lang.quick_edit_update_error = "There was an error editing your reply:";
	lang.quick_reply_post_error = "There was an error posting your reply:";
	lang.quick_delete_error = "There was an error deleting your reply:";
	lang.quick_delete_success = "The post was deleted successfully.";
	lang.quick_delete_thread_success = "The thread was deleted successfully.";
	lang.quick_restore_error = "There was an error restoring your reply:";
	lang.quick_restore_success = "The post was restored successfully.";
	lang.editreason = "Edit Reason";
// -->
</script>
<!-- jeditable (jquery) -->
<script src="jscripts/reportdf88.js?ver=1820"></script>
<script src="jscripts/jeditable/jeditable.min.js"></script>
<script src="jscripts/threadad07.js?ver=1827"></script>
<meta name="description" content="Moved to GitHub: https://github.com/YashasSamaga/AMX-Assembly-Docs DEPRECATED #emit - Learn from the basics Last Update:15/7/2016 If you had ever asked someone how to use #emit, they would say &quot;its ve" />
<link rel="canonical" href="showthread0276.html?tid=591705" />
</head>
<body>
	<!-- start: header -->
<header>
<div class="navbar navbar-default">
     <div class="container">
          <div class="navbar-header">
               <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="Toggle navigation">
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span> 
               </button>
			  
			  <div class="navbar-header scaleimages">
				  <!--<a class="navbar-brand" href="https://sampforum.blast.hk">BootBB</a>-->
				  <a class="" href="index.html"><img src="images/bootbb/logo_forum.gif" /></a>
			  
			  </div>
          </div>
          <div class="collapse navbar-collapse navbar-ex1-collapse">
			  <ul class="nav navbar-nav navbar-right">
				  <!--<li id="nav-portal"><a href="https://sampforum.blast.hk/portal.php"><i class="fa fa-bell"></i> Portal</a></li>-->
               <li id="nav-forums"><a href="index-2.html"><i class="fa fa-group"></i> Forum</a></li>
				<!--<li><a href="https://sampforum.blast.hk/search.php?action=getnew"><i class="fa fa-comment"></i> New Posts</a></li>
            	<li><a href="https://sampforum.blast.hk/search.php?action=getdaily"><i class="fa fa-comments"></i> Today's Posts</a></li>-->
               <li id="nav-search"><a href="search.html"><i class="fa fa-search"></i> Search</a></li>
               <li id="nav-member"><a href="memberlist.html"><i class="fa fa-users"></i> Members</a></li>
               <li id="nav-help"><a href="misc0615.html?action=help"><i class="fa fa-life-bouy"></i> Help</a></li>
				  
<!--<li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cubes"></i> Misc <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
			  <li id="nav-help"><a href="https://sampforum.blast.hk/misc.php?action=help"><i class="fa fa-life-bouy"></i> Help</a></li>
			  <li class="divider"></li>
			  <li id="nav-calendar"><a href="https://sampforum.blast.hk/calendar.php"><i class="fa fa-calendar"></i> Calendar</a></li>
          </ul>
</li> -->
</ul>
  
          </div>
     </div>
</div>
</header>


<div id="container">
	<a name="top" id="top"></a>
		<div id="header">
			<div id="panel">
				<div class="upper">
					<div class="container">

						<!-- start: header_welcomeblock_guest -->
<!--<span><a href="https://sampforum.blast.hk/member.php?action=login" onclick="$('#quick_login').modal({ fadeDuration: 250, keepelement: true }); return false;" class="login btn btn-danger" style="color: #fff;"><i class="fa fa-sign-in"></i> Login</a> <a href="https://sampforum.blast.hk/member.php?action=register" class="register btn btn-success" style="color: #fff;"><i class="fa fa-user-plus"></i> Register</a></span>-->

<span class="float_right hidden-xs">Hello There, Guest!</span>

<br class="clearfix" />
	

				<div class="modal" id="quick_login" style="display: none;">
					<form method="post" action="https://sampforum.blast.hk/member.php">
						<input name="my_post_key" type="hidden" value="fb3a3794df1b872082c4f912f4b319a5" />
						<input name="action" type="hidden" value="do_login" />
						<input name="url" type="hidden" value="" />
						<input name="quick_login" type="hidden" value="1" />
						<table width="100%" cellspacing="0" cellpadding="0" border="0" class="tborder">
							<tr>
								<td class="thead" colspan="2"><strong>Login</strong></td>
							</tr>
							<tr>
								<td class="trow1" width="25%"><strong>Username:</strong></td>
								<td class="trow1"><input name="quick_username" id="quick_login_username" type="text" value="" class="textbox initial_focus" /></td>
							</tr>
							<tr>
								<td class="trow2"><strong>Password:</strong></td>
								<td class="trow2">
									<input name="quick_password" id="quick_login_password" type="password" value="" class="textbox" /> <a href="member9a16.html?action=lostpw" class="lost_password">Lost Password?</a>
								</td>
							</tr>
							<tr>
								<td class="trow1">&nbsp;</td>
								<td class="trow1 remember_me">
									<input name="quick_remember" id="quick_login_remember" type="checkbox" value="yes" class="checkbox" checked="checked" />
									<label for="quick_login_remember">Remember me</label>
								</td>
							</tr>
							<tr>
								<td class="trow2" colspan="2">
									<div align="center"><input name="submit" type="submit" class="button" value="Login" /></div>
								</td>
							</tr>
						</table>
					</form>
				</div>
				<script type="text/javascript">
					$("#quick_login input[name='url']").val($(location).attr('href'));
				</script>
<!-- end: header_welcomeblock_guest -->
					
					</div>
			</div>
			</div>
	</div>
			</div>
               
				   
                <main class="container">
				<br />
                 <!-- start: nav -->
<ol class="breadcrumb container"><!-- start: nav_bit -->
<li><a href="index-2.html">SA-MP Forums Archive</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplayb1dd.html?fid=8">SA-MP Scripting and Plugins</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplay696f.html?fid=12">Scripting Help</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplaybb37.html?fid=70&amp;page=5">Tutorials</a></li>
<!-- end: nav_bit --><!-- start: nav_sep_active -->

<!-- end: nav_sep_active --></ol>
<!-- end: nav -->
				
				
				
				
				
				
<!-- end: header -->
	
	
	<div class="float_left">
		<!-- start: multipage -->
<div class="pagination">
<span class="pages">Pages (2):</span>
<!-- start: multipage_page_current -->
 <span class="pagination_current">1</span>
<!-- end: multipage_page_current --><!-- start: multipage_page -->
<a href="showthread1f6a.html?tid=591705&amp;page=2" class="pagination_page">2</a>
<!-- end: multipage_page --><!-- start: multipage_nextpage -->
<a href="showthread1f6a.html?tid=591705&amp;page=2" class="pagination_next">Next &raquo;</a>
<!-- end: multipage_nextpage -->
</div>
<!-- end: multipage -->
	</div>
	<div class="float_right">
		
	</div>
	<br class="clear" />
	<div class="tborder tfixed clear">
		<div class="thead">
				<div class="float_right">
					<span class="smalltext"><a href="showthread0721-3.html?mode=threaded&amp;tid=591705&amp;pid=3596399#pid3596399">Threaded Mode</a></span>
				</div>
				
					[Tutorial] AMX Assembly (#emit)
			</div>
	</div>
<div id="posts_container">
	<div id="posts">
		<!-- start: postbit_classic -->

<a id="pid3596399"></a>
<div class="post classic " style="" id="post_3596399">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1c6d.html?action=profile&amp;uid=169426"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1c6d.html?action=profile&amp;uid=169426">Yashas</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 882<br />
	Threads: 50<br />
	Joined: Jun 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation997a.html?uid=169426"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread451c-6.html?tid=591705&amp;pid=3596399#pid3596399" title="AMX Assembly (#emit)">#1</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 1 by Yashas" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">15.10.2015, 17:33 <span class="post_edit" id="edited_by_3596399"><!-- start: postbit_editedby -->
<div class="edited_post postbit_edited postbit_editedby postbit_editedpost">(<!-- start: postbit_editedby_editreason -->
 <em>Последний раз редактировалось Yashas; 08.06.2018 в 14:31.
					
					
						Причина: recovered the revised version</em>
<!-- end: postbit_editedby_editreason -->)</div>
<!-- end: postbit_editedby --></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3596399">
		<font size="5">Moved to GitHub: <a href="https://github.com/YashasSamaga/AMX-Assembly-Docs" target="_blank"><b>https://github.com/YashasSamaga/AMX-Assembly-Docs</b></a></font><br />
<br />
<b><font size="5">DEPRECATED</font></b><br />
<br />
<font size="7"><font color="DarkSlateGray"><font color="RoyalBlue">#emit</font> - Learn from the basics</font></font><br />
<b><font color="DarkRed">Last Update:15/7/2016</font></b><br />
<br />
If you had ever asked someone how to use #emit, they would say "its very advanced and you needn't learn it". Yes, indeed it is advanced but that doesn't mean that one cannot learn it. This series of tutorials is intended to teach how to use #emit from the ground up. This tutorial will cover the very basics, i.e: from basic concepts like that of the stack, registers to the level of writing working assembly snippets. Before you begin to read this tutorial, it is important that you have a very good understanding of the PAWN Language. The aim of this tutorial is to provide you the necessary foundation which you'll need to become an independent learner.<br />
<br />
Every computer provides a set of simple instructions and each instruction has a code. In principle, you can write a program with numbers but it is practically not achievable. To make writing a program easier, we have low level languages such as assembly where the instructions are given understandable names instead of numbers but writing a program in assembly is also difficult as it still requires you to know a lot of technical details about the computer. To make programming even easier, we have high level languages like PAWN. However, all your PAWN code at the end, ends up as machine code (assembly code is machine code with instructions written in letters instead of numbers).<br />
<br />
PAWN is a high level language and does not have the complications which assembly would have posed, however, it allows you to add assembly code with PAWN code. #emit is the PAWN directive which allows you to put assembly instructions to your PAWN script.<br />
<br />
The assembly language is a very low-level language and it requires a you to be fully aware of how everything works internally to write programs with it. If you want to be successful in mastering the assembly language, you need to be dedicated and hard-working. You might find it hard initially but I am sure with a little bit of practice you will be able to master the feature. You'll need to try and play with opcodes after learning it. I mean it! You got to try every example and also play with it a bit to understand better. Remember that just reading won't help you at all.<br />
<br />
<font size="6"><font color="RoyalBlue">Basic Concepts &amp; Terminology</font></font><br />
Learning how to use #emit is as good as learning the assembly language. As said in the introduction, programming in assembly language requires you to know how the computer works in dept. Though most of the concepts mentioned here are well-documented on the internet, I have explain them here to an extent which is required for this tutorial.<br />
<br />
<font color="DarkGreen"><font size="5">AMX Machine</font></font><br />
AMX stands for Abstract Machine eXecutor. <a href="http://mathworld.wolfram.com/AbstractMachine.html" target="_blank"><b>Abstract Machine</b></a>, as the name says, is an abstract model of a computer which when implemented in the form of a software is called a <b><a href="https://en.wikipedia.org/wiki/Virtual_machine" target="_blank">virtual machine</a></b>. It is technically a virtual computer with its own way of functioning. Just like your programs run on your computer, AMX programs(.amx scripts) run in an AMX Computer (its virtual of course and runs on top of your real computer). This is something similar to the virtual machines or emulators you get on the internet like Bochs, VMWare, etc <br />
(to be honest, even PS, NDS emulators are virtual computers and AMX Machine is just another one). <br />
<br />
Windows is an operating system for PCs. It provides you with libraries to make a Windows executable (.exe file). Similarly, you can think of SAMP as an operating system for the AMX Machine. SAMP provides you lot of libraries (a_samp, a_player, etc) to interact with SAMP using which you make an AMX executable (.amx file).<br />
<br />
When you click on a Windows executable (.exe), you create a Windows process. Similarly, when you execute an .amx program, you create an AMX Instance. For every AMX File you load, you create an AMX Instance. AMX Instance is basically analogous to a process in Windows. Your game mode is an AMX instance and each of your filterscript is also an AMX instance of its own.<br />
<br />
<font color="DarkGreen"><font size="5">AMX Assembly Language</font></font><br />
A computer is only capable of understanding machine code.<br />
<br />
For example, these numbers (machine code),<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">89D8FAF4</pre>
</div>actually tell the computer to do the following<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">mov eax, ebx
cli
hlt</pre>
</div>The above code was actually assembly (Intel Assembly, not the one we will be learning here) which the computer cannot understand.<br />
<br />
Machine Code is made up of a sequence of bits where ordered combinations of bits represent instructions and data, in other words, machine code is just binary code which can be executed directly by the computer. <br />
<br />
To make our life easier, we have assembly language which is just plain text containing instructions/data written in human readable form. Except for the numbers to words change, Assembly language is identical to machine language, in fact, they are one-to-one analogs of each other. Assembly language literally names each instruction (which is actually just a number) and provides a syntax to write understandable code.<br />
<br />
In the earlier Intel assembly example which you saw, the 'mov' is an instruction to move data between registers, memory, etc. The 'cli' is an instruction to disable interrupts and the 'hlt' is an instruction to halt the computer. Registers? Interrupts? These are some technical words related to the Intel CPUs. Assembly language does make coding easier by avoiding numbers but it still isn't easy. <br />
<br />
To make coding even easier, we have high level languages such as PAWN. A computer cannot understand PAWN or even assembly language. Therefore, we have programs called compilers which convert your high level code into machine executable code.<br />
<br />
Like every computer, this AMX Machine has its own machine code (the machine code is know as pseudo-code for abstract machines). As said earlier, writing code in machine language will drive you insane, therefore we have AMX Assembly.<br />
<br />
<font color="DarkGreen"><font size="5">Binary Number System</font></font><br />
Every information that is stored in a computer is stored in the form of numbers. Just like we use the decimal system (Base 10: there are 10 different digits that can be used to form a number) the computer uses Binary System (Base 2: there are just 2 digits using which numbers are formed) to store information. What we call a digit in decimal system is known as a bit in the Binary System. Every bit can either be 1 or 0. A sequence of 8 bits make a byte. 1024 bytes make a kilo byte, 1024 kilobytes makes a megabyte and then comes gigabyte, terabyte, ....<br />
<br />
I would recommend you to go through <b><a href="https://en.wikipedia.org/wiki/Numeral_system" target="_blank">this wiki page</a></b> if you are totally new to number systems.<br />
<br />
There are lot of tutorials on the internet which explain how to interpret and perform basic operations on binary numbers so I am not going to explain any more about it here.<br />
<br />
You also need to learn about the bit operations such as AND, OR, XOR, SHIFTS,etc because we will be using them a lot when writing 'useful' code in assembly.<br />
<br />
You'll also need to know about <a href="https://en.wikipedia.org/wiki/Two%27s_complement" target="_blank"><b>Two's Complement</b></a> method to understand how negative numbers are stored.<br />
<br />
There is a <b><a href="https://sampwiki.blast.hk/wiki/Binary" target="_blank">SA-MP Wiki page</a></b> which talks about bit operations.<br />
<br />
Here is a another <b><a href="showthread5be5.html?tid=177523" target="_blank">good tutorial</a></b> on bitwise operators. The tutorial will teach what each bitwise operation means and how to use them in PAWN. There are instructions which AMX assembly provides to carry out the same operations in assembly.<br />
<br />
<font color="DarkGreen"><font size="5">Hexadecimal Number System</font></font><br />
The hexadecimal number system uses the base 16 to represent numbers. That means that there are 16 unique symbols which make up numbers. It is possible to use 0-9 to represent hexadecimal numbers but what about the remaining 6 symbols?<br />
<br />
Hexadecimal numbers are written as a set of symbols which can consist of the digits 0 to 9 and the alphabets A to F.<br />
In the hexadecimal system,<br />
0 stands for 0<br />
1 stands for 1<br />
2 stands for 2<br />
.<br />
.<br />
.<br />
9 stands for 9<br />
A stands for 10<br />
B stands for 11<br />
C stands for 12<br />
D stands for 13<br />
E stands for 14<br />
F stands for 15<br />
<br />
We use a convention/notation that helps us distinguish between decimals and hexadecimals. Every hexadecimal number is prefixed with 0x or 0X. And this is how we as well as the compiler would distinguish between decimals and hexadecimals.<br />
<br />
0xF = 15<br />
0xFF = 255 <br />
<br />
How is 0xFF equal to 255 in decimal notation? I won't be explaining it here. There are lot of tutorials on the internet on hexadecimal numbers. <br />
<br />
If you were wondering why would you need to know this, it is because PAWN compiler for mysterious reasons loves to write numbers in hexadecimal notation in the assembly output (PAWN compiler can produce assembly code of your PAWN code if you ask it to do so). If you are impatient, you can use a calculator to convert between numbers from one system to another but it is always good to know how read and write numbers in hexadecimal notation.<br />
<br />
<font color="DarkGreen"><font size="5">The Cell Concept</font></font><br />
PAWN is a typeless language which means there are no data types. Every data is stored in a cell or collection of cells. Though PAWN supports 64-bit and 16-bit cells, we will assume throughout the tutorial that a cell takes up 4 bytes of space since SA-MP is configured to make use of 32-bit cells.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">new a = 5;</pre>
</div>The above code creates a cell called "a" with the value 5.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">new b = 'A';</pre>
</div>The above code creates a cell called "b" with the value 65, the ASCII equivalent of the character 'A'. Even though ASCII characters can be uniquely represented with just one byte, PAWN stores the characters in 4 byte cells.<br />
<br />
<font color="DarkGreen"><font size="5">Addresses &amp; Offsets</font></font><br />
In this generation of computers, the fundamental memory unit is a byte. That means everything you store takes integral multiples of bytes of space.<br />
<br />
Just like every place on Earth has a unique address or co-ordinates, every byte in memory has a unique address associated with it. In Computer Science, an address is just a number which a computer uses to identify a byte in the memory. You can treat the computer memory to be a linear ordered sequence of bytes where a byte would have its address one more than the address of the preceding byte.<br />
<br />
A segment is just a section of memory. Base address is an address which points to the start of a segment and an offset is an address relative to it. Or put in different words, the memory is divided into small chunks or sections which we call a segment, just like we have cities and house no, base addresses are like cities and offsets are addresses relative to the base address, just like the house no. To know the exact location of a house, we need to specify the city as well as the house no. Similarly, to get the absolute address of a byte in the memory, we need to specify the segment address as well as the offset from the segment.<br />
<br />
We will look into an example of a one dimensional array to understand better. Though this does not exactly strictly demonstrate the addressing scheme, it will give an idea how it works.<br />
<br />
Suppose we have an array of 10 integers. Every element in the array has its own unique address. But we programmers instead of using these addresses directly, we make use of indexes.<br />
<br />
The address of the first element of the array is the <b>base address</b> of the array. The index which you use is like an offset which is added to the base address to retrieve the data that is stored in that segment. <br />
<br />
As said earlier every data stored in memory has a unique address using which you fetch data from the memory. So the first step before retrieving something from memory is to obtain the address of the data. The computer uses a simple algorithm to find the address of an array element. Let's say the computer needs to find the address of array[5], the computer will do the following calculations to do that.<br />
<ul><li>Obtain the base address of the segment (array[0] is the base address here)</li>
<li>Multiply the index by the size of the element to obtain the offset (Here it is 5 * 4 since every array element is a cell and takes 4 bytes)</li>
<li>Add the offset to the base address to obtain the address of array[5].</li>
</ul>
If the base address of the array was 1000, array[5] would have an address of 1000 + 5*4 = 1020.<br />
<br />
<font color="DarkGreen"><font size="5">Stack &amp; Heap</font></font><br />
Stack is a data structure which is used to store temporary information. You can think of it as a list of items where new items can be added to the list and old items can be removed. A stack is linear data structure which means all the data is arranged in a linear fashion. A stack uses a concept known as LIFO (last-in-first-out) according to which the item which was last put in to the stack will be removed first. A stack comes with two principal operations know as PUSH and POP. A push operation adds an item onto the stack and a POP operation to retrieves/removes the last pushed element from the stack. As always, we will see some examples to understand the concept better.<br />
<br />
Here is a list of operations which I wish to perform on an empty stack.Try guessing how the final stack would look like.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">PUSH 5
PUSH 10
PUSH 20
POP
PUSH 15
PUSH 20
POP
POP</pre>
</div>The final stack will just have two items at the end.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">10
5</pre>
</div>I first add the number 5 to the stack then add number 10 then 20. Then I execute a POP instruction to remove the most recent item from the stack, i.e: the number 20. After that I push 15 then 20 and then use POP instruction twice which removes number 15 and number 20 from the stack. So my final stack would have just 5 and 10. Note that, the 10 is at the top. The last item which was pushed stays at the top and hence is poped out first.<br />
<br />
The stack occupies some memory which essentially tells you that every item which is pushed onto the stack has an address. If you were to PUSH something onto the stack, where would you store the item? At which location/address in the memory? How do you/AMX machine know where the last pushed item is stored to pop the item? To solve this issue, a program implementing the stack data structure keeps few special variables to hold the addresses of the first element and last inserted element which are updated when a relavent change is done to the stack. This is how the computer knows where the last pushed item is stored. <br />
<br />
What happens if you try to POP an item from an empty stack? Your program will most probably crash. This error is known as 'stack underflow'. <br />
<br />
Most programs (the case with AMX scripts) implementing a stack allocate memory in advance for the stack whose size cannot be changed during run-time. So what happnens if you try to push an item when you have already reached the end of the stack memory, in other words, you ran out of space? Your program will most probably crash. This situation is called stack overflow. <br />
<br />
AMX Machine has a stack which is usually used to store arguments of functions, local variables and other information. It is also used as a temporary storage. Instead of the special variables which are required as mentioned earlier, the AMX Machine has a set of registers which do the same work. More on registers soon. For the time being, you may consider registers to be speical variables. <br />
<br />
Heap, as the name says, is just a data heap. It is a region of memory where most of the data is stored. In AMX scripts, the default values of global variables, global arrays, etc are all stored in the heap. It is also used to store local arrays. A program implementing a heap requires special variables for the very same reasons why special variables were needed in case of a stack. In case of AMX machine, we use registers in place of special variables.<br />
<br />
In the AMX Machine, the heap and stack share the same memory block. The heap grows upwards and the stack grows downwards. Given below is an example how the heap-stack region of memory looks in an AMX machine.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">Heap&gt;&gt; local array1, local array2 .............. [EMPTY UNUSED SPACE] ............... last pushed item, previous item, ....., first item &lt;&lt;Stack</pre>
</div>There lies lot of unused space between the heap and the stack most of the times but sometimes you may actually run out of space. Therefore, it is possible for the heap and the stack to overwrite each other which will result in a Heap-Stack Collusion Error at run-time. More about it later.<br />
<br />
<font color="DarkGreen"><font size="5">Registers</font></font><br />
Every CPU (microprocessor) comes with a set of registers. These registers are like temporary storage locations. Every register is capable of holding a data whose size depends on the machine. 32-bit computers have 32-bit registers and 64bit computers have 64bit registers. The CPU can perform operations ONLY on the data which are stored in registers. If you wanted to add the contents of two variables, the values of the variables are retrieved from the memory and are stored in registers where the addition operation is performed. After the operation, the contents of the registers are transferred to memory. Therefore, technically all the calculations such as adding, multiplying are carried out on the data stored in the registers. <br />
<br />
Here is an example which will make you understand the concept better.<br />
<br />
To add two numbers and then save the number at some memory location, the computer does something similar to the following:<br />
1. Get one of the numbers that is to be added from the memory and store it in one of the CPU's Register (Lets call this REGISTER 1)<br />
2. Get the other number and store it another register (Lets call this REGISTER 2)<br />
3. Execute the ADD Instruction which adds the contents of the two registers and stores it in one of them, let it be REGISTER 1 in our example.<br />
4. Get the address of the memory where the result has to be stored and store the address in REGISTER 2<br />
5. Then execute a MOVE instruction which copies the data in REGISTER 1 and stores it in the memory location pointed by the address in REGISTER 2<br />
<br />
This is how a computer basically works. There are few registers where all operations are carried out. The registers which we have used in our example belong to a class of registers known as general purpose registers. As the name suggests these registers can be used for any purpose. Apart from these registers, computers have special registers which are meant to perform a specific task. For example, the current instruction pointer register holds the address (if you did not know, the instructions or the code that is to be executed is stored in memory - code segment) of the current instruction that is being executed.<br />
<br />
Just like a computer, the AMX Virtual Machine has its set of registers. It mimics a duel-register processor. It means that there are two registers that carry out almost all the operations. These registers are known as the primary and the alternate register. These are general purpose registers. There are few more registers which have a specific purpose and cannot be used as general purpose registers. Below is a list with the names and description of all the registers of the AMX Machine.<br />
<br />
<b>Primary Register (PRI) :</b> All arithmetic operations are carried out in this register (Sometimes with the help of the alternate register). It is a general purpose register and you can use if for any purpose.<br />
<br />
<b>Alternate Register (ALT) :</b> This is another general purpose register which is used to carry out many operations along with the primary register.<br />
<br />
<b>Frame Pointer (FRM) :</b> This register points to the bottom of the current function's header. Local variables of a function are stored in the stack and the compiler does not know the absolute address of these variables rather it keeps track of the local variables using offsets which are relative to the frame pointer. Don't worry if you didn't get that part, we will discuss more about this in detail later.<br />
<br />
<b>Current Instruction Pointer (CIP) :</b> All the code is stored in the code segment in the memory and every instruction has an address. The CIP register stores the offset relative to the code segment of the current instruction being executed. The CIP register is incremented after execution of every instruction using which absolute address of the next instruction is obtained from the code segment by adding the offset stored in CIP to the base address of the code segment. The instruction is executed and the cycle repeats until the program ends. The increment and fetching of the next instruction is done automatically by the AMX machine and the programmer needn't write the assembly code to do it. In fact, it is impossible since the instruction to increment CIP would itself be an instruction. Nevermind, if you did not understand the previous line. All you need to know is that the incrementation of the CIP register is done automatically by the machine and you needn't worry about it.<br />
<br />
<b>Data Segment Register (DAT) :</b> This gives address to the start of the data segment relative to start of prefix.<br />
<br />
<b>Code Segment Register (COD) :</b> This gives base address (actually an offset relative to the start of the program) to the start of code segment.<br />
<br />
<b>Stack Top Pointer (STP) :</b> This points to the top of the stack.<br />
<br />
<b>Stack Pointer (STK) :</b> This register indicates current position in the stack.<br />
<br />
<b>Heap Register (HEA) :</b> This register indicates the current position in the heap. <br />
<br />
<font color="DarkGreen"><font size="5">Language Syntax &amp; Terminology</font></font><br />
<br />
<b>Mnemonic:</b> Every operation/command can be represented as a series of letters and symbols in assembly language which are known as mnemonics.<br />
<br />
<b><a href="https://en.wikipedia.org/wiki/Opcode" target="_blank">OpCode</a>:</b> The part of the instruction that specifies what operation to performed is called the OpCode. Every instruction is assigned a unique id using which the machine identifies what instruction it is. This unique id is known as OpCode.<br />
<br />
<b><a href="https://en.wikipedia.org/wiki/Operand" target="_blank">Operand</a>:</b> The object of the operation/instruction is called the operand. In other words, the arguments or parameters that are passed to the instruction are called operands. You can use the terms operand, parameters and arguments inter-changeably.<br />
<br />
Every instruction in the AMX Assembly Language follows a particular format. Every instruction is written by first writing the mnemonic and then the operands/parameter. <br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto"> [mnemonic] [operands]</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">PUSH 10 ; Here PUSH is the mnemonic and 10 is the parameter
POP.pri ; Here POP.pri is the mnemonic and it doesn't take any parameter</pre>
</div>To write assembly instructions in PAWN, you need to use the #emit directive. You first write "#emit" and then write the OpCode and then its operands. We will look at few examples.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">#emit opcode operand/parameter
#emit PUSH.C 123
#emit POP.pri</pre>
</div>Unlike other pre-processor directives, #emit must be used within a function. (Obviously an instruction lying in some non-executable part of the script wouldn't make any sense)<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 114px;
		text-align: left;
		overflow: auto">myFunc()
{
  #emit PUSH.C 10
  #emit POP.pri
  return 0;
}</pre>
</div>As said earlier, every instruction is stored in memory and hence they take some space. Every <b>instruction takes 4 bytes to store the OpCode</b> and if it has an <b>operand then it takes 4 more bytes</b> (4 bytes per operand). It is important that you know the above fact since you can abuse the knowledge to do stunts in your code. You can directly screw the CIP register and make fake function calls and do a lot more including crashing the script (by using setting the CIP register to incorrect values).<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">#emit PUSH.C 10 //Takes 8 bytes, 4 for the instruction opcode and 4 for the operand
#emit POP.pri //Takes just 4 bytes since the instruction doesn't have any operand</pre>
</div>AMX Assembly also allows the use of comments. Just like '//' in PAWN, AMX Assembly uses ';' as a prefix for comments. So any text that follows after a ';' is a comment. You will find such comments in the .asm file which the PAWN compiler generates from the .pwn file when you ask it to do so. However, the '\\' comments work when you are using emit (#emit is a PAWN pre processor directive and is not a part of the assembly language).<br />
<br />
<font size="6"><font color="RoyalBlue">AMX File &amp; Memory Structure</font></font><br />
Every program loaded into memory is not simply a randomly arranged chunk of memory. It is organized into different sections. A typical Windows Program has different sections for storing initialized data (data segment), uninitialized data (BSS Segment), code (Code Segment) , stack, heap, etc. Similarly, every AMX program (files with .amx extension) follows a definite structure in memory.<br />
<br />
The segments in memory are broadly classified into 5 types<ul><li><b>Prefix </b> - Present in the AMX File - Contains Start-Up Information, definitions of native,public functions,etc</li>
<li><b>Code</b> - Present in the AMX File - Contains Code</li>
<li><b>Data </b> - Present in the AMX File - Contains Data</li>
<li><b>Heap</b> - NOT Present in the AMX File - Will be built from the information in prefix</li>
<li><b>Stack</b> - NOT Present in the AMX File - Will be built from the information in prefix</li>
</ul>
The AMX program file contains only the prefix, code and data sections. The AMX Machine loads the program file into the memory and then allocates space for the heap and stack. Therefore, the program file has the following structure:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 130px;
		text-align: left;
		overflow: auto">| ---------------------- |
          PREFIX            
| ---------------------- |
           CODE
| ---------------------- |
           DATA
| ---------------------- |</pre>
</div>The actual memory structure will contain the heap-stack section in a separate memory block. However, an implementation can choose to keep the heap-stack memory block adjacent to the prefix-code-data memory block. In SA-MP, the heap-stack memory block follows the data section. Therefore, the actual memory layout of the AMX program loaded by SA-MP will be:<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 258px;
		text-align: left;
		overflow: auto">| ---------------------- |
          PREFIX            
| ---------------------- |
           CODE
| ---------------------- |
           DATA
| ---------------------- |
           HEAP
           | |
           | |
        FREE SPACE
           | |
           | |
          STACK
| ---------------------- |</pre>
</div>For the AMX Program, the absolute address 0 is assigned to the first byte of the prefix. Every absolute address in the AMX program is relative to the start of prefix.<br />
<br />
<font size="2"><u><b>Here is a more detailed version of the AMX File/Memory Structure</b></u></font><br />
<table><tr><td class="alt2"><b><u>Type</u></b></td><td class="alt2"><b><u>Size in bytes</u></b></td><td class="alt2"><b><u>Description</u></b></td></tr><tr><td class="alt2">size</td><td class="alt2">4</td><td class="alt2">size of the memory image, excluding the stack/heap </td></tr><tr><td class="alt2">magic</td><td class="alt2">2</td><td class="alt2">indicates the format and cell size </td></tr><tr><td class="alt2">file version</td><td class="alt2">1</td><td class="alt2">the format version, currently 8 </td></tr><tr><td class="alt2">amx version</td><td class="alt2">1</td><td class="alt2">required minimal version of the abstract machine </td></tr><tr><td class="alt2">flags</td><td class="alt2">2</td><td class="alt2">More information can be found in PAWN Implementor's Guide</td></tr><tr><td class="alt2">defsize</td><td class="alt2">2</td><td class="alt2">size of a structure/entry in the native functions table and the public functions tables </td></tr><tr><td class="alt2">cod</td><td class="alt2">4</td><td class="alt2">offset to the start of the code section </td></tr><tr><td class="alt2">dat</td><td class="alt2">4</td><td class="alt2">offset to the start of the data section</td></tr><tr><td class="alt2">hea</td><td class="alt2">4</td><td class="alt2">initial value of the heap, end of the data section </td></tr><tr><td class="alt2">stp</td><td class="alt2">4</td><td class="alt2">stack top value (the total memory requirements)</td></tr><tr><td class="alt2">cip</td><td class="alt2">4</td><td class="alt2">starting address (main() function), -1 if none</td></tr><tr><td class="alt2">publics</td><td class="alt2">4</td><td class="alt2">offset to the “public functions” table </td></tr><tr><td class="alt2">natives</td><td class="alt2">4</td><td class="alt2">offset to the “native functions” table </td></tr><tr><td class="alt2">libraries</td><td class="alt2">4</td><td class="alt2">offset to the table of libraries </td></tr><tr><td class="alt2">pubvars</td><td class="alt2">4</td><td class="alt2">offset to the “public variables” table</td></tr><tr><td class="alt2">tags</td><td class="alt2">4</td><td class="alt2">offset to the “public tags” table</td></tr><tr><td class="alt2">nametable</td><td class="alt2">4</td><td class="alt2">offset to the symbol name table</td></tr><tr><td class="alt2">overlays</td><td class="alt2">4</td><td class="alt2">offset to the overlay table</td></tr><tr><td class="alt2">publics table</td><td class="alt2">variable</td><td class="alt2">publics function table</td></tr><tr><td class="alt2">natives table</td><td class="alt2">variable</td><td class="alt2">native functions table</td></tr><tr><td class="alt2">library table</td><td class="alt2">variable</td><td class="alt2">library table</td></tr><tr><td class="alt2">pubvars table</td><td class="alt2">variable</td><td class="alt2">public variables table</td></tr><tr><td class="alt2">tags table</td><td class="alt2">variable</td><td class="alt2">public tags table</td></tr><tr><td class="alt2">overlay table</td><td class="alt2">variable</td><td class="alt2">the overlay table</td></tr><tr><td class="alt2">name table</td><td class="alt2">variable</td><td class="alt2">the symbol name table </td></tr></table>
<font size="2"><u><b>Structure of an entry in the tables look like</b></u></font><br />
<table><tr><td class="alt2">Address</td><td class="alt2">4 bytes</td><td class="alt2">If the entry is from the Publics Table, then this would be the offset (relative to the COD Register) to the start of the public function</td></tr><tr><td class="alt2">Pointer to the name</td><td class="alt2">4 bytes</td><td class="alt2">If this was from the Publics Table, then this would give the offset (relative to the PREFIX) to the name of the public (which is stored like any other string).</td></tr></table>
Every public function you write in your script is assigned a unique number by the compiler known as index according to the alphabetical order (the order in which the public function entries are stored in the public function table). You can obtain the index number of a public function with some emit tricks or by using the <b><a href="https://sampwiki.blast.hk/wiki/Funcidx" target="_blank">funcidx</a></b> native. Similarly, indexes are assigned for other entities of other tables including the native functions table. Play a bit with the funcidx function to get confortable with the index concept. Try changing the names of the publics and you might see a change in the index since the compiler stores the publics in alphabetical order. Do you know why it does so? Think for a while and you will get the answer. It has something to do with the working of CallLocalFunction and CallRemoteFunction. The spoiler hint I can give is that CallLocalFunction and CallRemoteFunction do a <b><a href="https://en.wikipedia.org/wiki/Binary_search_algorithm" target="_blank">Binary Search</a></b> on the tables to find the public function's address.<br />
<br />
The "native function table" and "library table" has a the same layout but the address field is meant to be used internally and should be zero in the AMX File. The native function table name field is filled by the compiler during compile time and the address field is left uninitilized (zero by default). The address field is left uninitialized because there is no way the PAWN compiler would be aware of address of the native function until the script is loaded (as a matter of fact, changing the order of the plugins they are loaded atually changes the offsets to the native function which clearly means there is no way the compiler would know the address of the natives beforehand). In fact, for those who have worked with plugins before, the RegisterNatives function basically fills the native functions table of the script with the correct addresses.<br />
<br />
The “public variables” table, again, has a similar record lay out as the public functions table. The address field of a public variable contains the variable’s address relative to the DAT section.<br />
<br />
The “tags” table uses the same format as well. This table only holds tags whose name or number might be used with the <b><a href="https://sampwiki.blast.hk/wiki/Keywords:Operators#tagof" target="_blank">tagof</a></b> operator. The “address” field of a tag record contains the tag identifier.<br />
<br />
This is how all the information is stored in your AMX File/Memory. Most of the entries in the table must be understandable for you except for few such as overlay, magic, size,etc which are of no use to us.<br />
<br />
If you are still curious to know about the size, magic number, flags, etc. you can find the information regarding them in the PAWN Implementer Guide. If you are suprised by hearing terms such as 'public variables' (not many know that you can make public variables, "public myvariable = 100;") you need to go through the PAWN Language Guide.<br />
<br />
It is important to know how the information is organized to make some good use of the inline assembly feature. By knowing how information is organized, you can now obtain meaningful information that is stored in the memory. The following example will show you how you can utilize the information that is given in this section of the tutorial to do something useful.<br />
<br />
<b><i>How to find number of commands in your script? (Works for ZCMD variants which prefix "cmd_" to every command public function's name)</i></b><br />
<br />
Suppose you are using ZCMD, then every command 'COMMAND' you make is a public function with the function name being "cmd_COMMAND". Suppose you make a command called "slap", then ZCMD creates a public function for it with the name "cmd_slap".<br />
<br />
Now if someone asks you to find the number of commands in your game mode, how will you do it? Here is the algorithm. <br />
<br />
Note that this is just the algorithm, everything that I mention here is possible using #emit. <br />
<ol style="list-style-type: decimal"><li>Get the address of the start of prefix</li>
<li>To find the address of start of the public function list, you first need to find the address of the public function list pointer and for that you need to find out how far away is the public function list pointer from the start of the prefix. Go check the table and start counting how many bytes you would need to go to reach the public function list pointer from the start. Let's start counting, "Size" takes 4 bytes, "magic" takes 2 bytes, "file version" takes 1 byte,.....,"CIP" takes 4 bytes, now by adding all those up you get 32 which means you need to go 32 bytes ahead to reach public function list pointer.</li>
<li>Now obtain the address stored in the public function list pointer.</li>
<li>Similarly obtain the address of the native function list.</li>
<li>Since the native function list comes immediately after the public function list. By knowing the difference in the addresses of the start of the native and public function list, you can find out how many public functions have been declared in the script. Since each entry in the list takes 8 bytes (Refer "Structure of an entry in the table looks like"), by dividing the difference in the addresses by 8, we get the number of public functions.</li>
<li>Now since we know the offset to the start of the public function list from the start of prefix, we need to add the address of the start of prefix</li>
<li>Now weed to go through each and every entry. Since the first 4 bytes of every entry gives the pointer to the public function which we don't need, we need to skip the first 4 bytes of every entry. The next 4 bytes will give the address to the name string.</li>
<li>Since we have the address to the name string (name of the public function), we need to check if the first 4 characters of the name string are "cmd_".</li>
<li>If the first 4 characters are "cmd_", then increment a counter.</li>
<li>Keep going through every entry until you have finished checking the names of all the public functions.</li>
<li>The counter will now have number of functions whose names are prefixed with "cmd_".</li>
</ol>
Working example of the above can be found <b><a href="https://github.com/YashasSamaga/I-ZCMD/blob/master/beta-izcmd03.inc" target="_blank">here (Click)</a></b>but you probably won't understand until you finish the tutorial. Visit the link after you complete reading the tutorial to understand better.<br />
<br />
<font size="6"><font color="RoyalBlue">Instruction/OpCode Library</font></font><br />
As explained earlier, every instruction consists of an OpCode follower by zero or one parameter.<br />
<br />
Many opcodes have implied registers as operands. In several cases, the implied register is part of the name of the opcode. For example, PUSH.pri is the name of the opcode that pushes the contents of PRI register on to the stack. This instruction has no parameters: its parameter (pri) is implied in the opcode name. This reduces the number of operands that are needed to decode an instruction and, hence, it reduces the time needed to decode an instruction thereby enhancing the performance.<br />
<br />
Core instructions set consists of fundamental instructions such as instructions that are used for loading data into the registers, accessing the special registers, etc.<br />
<br />
To improve speed and to reduce the memory footprint of the compiled programs, the abstract machine includes several macro instructions. These macro instructions are a sequence of “plain” instructions, in a single opcode. This not only improves performance but also reduces the memory footprint since now a single opcode replaces two or more plain opcodes. Whatever can be done by a single macro instruction can be done by a set of many instructions. The sole purpose of having macro instructions is to reduce the memory footprint and improve performance. Therefore, you should make use of macro instructions whenever possible. <br />
<br />
I have selected only few OpCodes from the PAWN Implementer Guide which I believe are important and compiled them into a neat table. <br />
<br />
The “semantics” column gives a brief description of what the opcode does. It uses the C language syntax for operators, which are the same as those of the pawn language. An item between square brackets indicates a memory access (relative to the DAT register, except for jump and call instructions). So, PRI = [address] means that the value read from memory at location DAT + address is stored in pri.<br />
<br />
I had once said about country code while discussing about segments, addresses and offsets. Here you can think of the DAT register to be the country code. You add the offset to the base address (say, offset to an item on the stack to the stack pointer) then you add the same to the address stored in the DAT register to obtain the absolute address. This however is not important since many instructions automatically add the address to the DAT before retrieving data.<br />
<br />
<b>Notation:</b><br />
<i>DISCLAIMER: The notation, format and description given below are my way of understanding.</i><br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">mnemonic | prefix | suffix</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">SHL.C.pri (shift bits to the left)
SHL | C | pri

ADD.C (add integers)
ADD | C

ZERO.alt (set to zero)
ZERO | | alt</pre>
</div>The mnemonic gives the idea of what the instruction does. For example, the ADD instruction tells that the instruction does some sort of addition operation.<br />
<br />
The prefix provides more information about the instruction. For example, the ".C" prefix to the "ADD.C" instruction tells that a constant is to be added.<br />
<br />
.C = constant<br />
.S = stack<br />
.I = indirection<br />
.B = variant of the one without B<br />
.ADR = address<br />
<br />
The suffix provides information about which register the instruction primarily affects. For example, the ".alt" suffix to the "ZERO.alt" instruction tells that the alternate register will be set to zero.<br />
<br />
.pri = primary register<br />
.alt = alternate register<br />
<br />
<b><u>Instruction Set</u></b><br />
<table><tr><td class="alt2"><b>#</b></td><td class="alt2"><b>mnemonic</b></td><td class="alt2"><b>operand</b></td><td class="alt2"><b>semantics</b></td></tr><tr><td class="alt2">1</td><td class="alt2">LOAD.pri</td><td class="alt2">address</td><td class="alt2">PRI = [address]</td></tr><tr><td class="alt2">2</td><td class="alt2">LOAD.alt</td><td class="alt2">address</td><td class="alt2">ALT = [address]</td></tr><tr><td class="alt2">3</td><td class="alt2">LOAD.S.pri</td><td class="alt2">offset</td><td class="alt2">PRI = [FRM + offset]</td></tr><tr><td class="alt2">4</td><td class="alt2">LOAD.S.alt</td><td class="alt2">offset</td><td class="alt2">ALT = [FRM + offset]</td></tr><tr><td class="alt2">5</td><td class="alt2">LREF.pri</td><td class="alt2">address</td><td class="alt2">PRI = [[ address ]]</td></tr><tr><td class="alt2">6</td><td class="alt2">LREF.alt</td><td class="alt2">address</td><td class="alt2">ALT = [[ address ]]</td></tr><tr><td class="alt2">7</td><td class="alt2">LREF.S.pri</td><td class="alt2">offset</td><td class="alt2">PRI = [[FRM + offset]]</td></tr><tr><td class="alt2">8</td><td class="alt2">LREF.S.alt</td><td class="alt2">offset</td><td class="alt2">ALT = [[FRM + offset]]</td></tr><tr><td class="alt2">9</td><td class="alt2">LOAD.I</td><td class="alt2"></td><td class="alt2">PRI = [PRI]</td></tr><tr><td class="alt2">10</td><td class="alt2">LODB.I</td><td class="alt2">number</td><td class="alt2">PRI = "number" of bytes from [PRI] (read 1/2/4 bytes)</td></tr><tr></tr><tr><td class="alt2">11</td><td class="alt2">CONST.pri</td><td class="alt2">value</td><td class="alt2">PRI = value</td></tr><tr><td class="alt2">12</td><td class="alt2">CONST.alt</td><td class="alt2">value</td><td class="alt2">ALT = value</td></tr><tr><td class="alt2">13</td><td class="alt2">ADDR.pri</td><td class="alt2">offset</td><td class="alt2">PRI = FRM + offset</td></tr><tr><td class="alt2">14</td><td class="alt2">ADDR.alt</td><td class="alt2">offset</td><td class="alt2">ALT = FRM + offset</td></tr><tr><td class="alt2">15</td><td class="alt2">STOR.pri</td><td class="alt2">address</td><td class="alt2">[address] = PRI</td></tr><tr></tr><tr><td class="alt2">16</td><td class="alt2">STOR.alt</td><td class="alt2">address</td><td class="alt2">[address] = ALT</td></tr><tr><td class="alt2">17</td><td class="alt2">STOR.S.pri</td><td class="alt2">offset</td><td class="alt2">[FRM + offset] = PRI</td></tr><tr><td class="alt2">18</td><td class="alt2">STOR.S.alt</td><td class="alt2">offset</td><td class="alt2">[FRM + offset] = ALT</td></tr><tr><td class="alt2">19</td><td class="alt2">SREF.pri</td><td class="alt2">address</td><td class="alt2">[[ address ]] = PRI</td></tr><tr><td class="alt2">20</td><td class="alt2">SREF.alt</td><td class="alt2">address</td><td class="alt2">[[address]] = ALT[\td]</td></tr><tr><td class="alt2">21</td><td class="alt2">SREF.S.pri</td><td class="alt2">offset</td><td class="alt2">[[FRM + offset]] = PRI</td></tr><tr><td class="alt2">22</td><td class="alt2">SREF.S.alt</td><td class="alt2">offset</td><td class="alt2">[[FRM + offset]] = ALT</td></tr><tr><td class="alt2">23</td><td class="alt2">STOR.I</td><td class="alt2"></td><td class="alt2">[ALT] = PRI (full cell)</td></tr><tr><td class="alt2">24</td><td class="alt2">STRB.I</td><td class="alt2">number</td><td class="alt2">"number" of bytes at [ALT] =  PRI (store 1/2/4 bytes)</td></tr><tr><td class="alt2">25</td><td class="alt2">LIDX</td><td class="alt2"></td><td class="alt2">PRI = [ ALT + (PRI Ч cell size) ] (load what is there at calculated index)</td></tr><tr><td class="alt2">26</td><td class="alt2">LIDX.B</td><td class="alt2">shift</td><td class="alt2">PRI = [ ALT + (PRI &lt;&lt; shift) ] (load what is there at calculated index)</td></tr><tr><td class="alt2">27</td><td class="alt2">IDXADDR</td><td class="alt2"></td><td class="alt2">PRI = ALT + (PRI Ч cell size) (calculate indexed address)</td></tr><tr><td class="alt2">28</td><td class="alt2">IDXADDR.B</td><td class="alt2">shift</td><td class="alt2">PRI = ALT + (PRI &lt;&lt; shift) (calculate indexed address)</td></tr><tr><td class="alt2">29</td><td class="alt2">ALIGN.pri</td><td class="alt2">number</td><td class="alt2">Little Endian: PRI ^= cell size - number </td></tr><tr><td class="alt2">30</td><td class="alt2">ALIGN.alt</td><td class="alt2">number</td><td class="alt2">Little Endian: ALT ^= cell size - number </td></tr><tr><td class="alt2">31</td><td class="alt2">LCTRL</td><td class="alt2">index</td><td class="alt2">PRI is set to the current value of any of the special registers. The index parameter must be: 0=COD, 1=DAT, 2=HEA,3=STP, 4=STK, 5=FRM, 6=CIP (of the next instruction)</td></tr><tr><td class="alt2">32</td><td class="alt2">SCTRL</td><td class="alt2">index</td><td class="alt2">Set the indexed special registers to the value in PRI.The index parameter must be: 2=HEA, 4=STK, 5=FRM, 6=CIP</td></tr><tr><td class="alt2">33</td><td class="alt2">MOVE.pri</td><td class="alt2"></td><td class="alt2">PRI = ALT</td></tr><tr><td class="alt2">34</td><td class="alt2">MOVE.alt</td><td class="alt2"></td><td class="alt2">ALT = PRI</td></tr><tr><td class="alt2">35</td><td class="alt2">XCHG</td><td class="alt2"></td><td class="alt2">Exchange contents of PRI and ALT</td></tr><tr><td class="alt2">36</td><td class="alt2">PUSH.pri</td><td class="alt2"></td><td class="alt2">[STK] = PRI and STK = STK - cell size</td></tr><tr><td class="alt2">37</td><td class="alt2">PUSH.alt</td><td class="alt2"></td><td class="alt2">[STK] = ALT and STK = STK - cell size</td></tr><tr></tr><tr><td class="alt2">38</td><td class="alt2">PICK</td><td class="alt2">offset</td><td class="alt2">PRI = [STK + offset]</td></tr><td class="alt2">39</td><td class="alt2">PUSH.C</td><td class="alt2">value</td><td class="alt2"> [STK] = value,STK = STK - cell size</td><tr><td class="alt2">40</td><td class="alt2">PUSH</td><td class="alt2">address</td><td class="alt2">[STK] = [address], STK = STK - cell size </td></tr><tr><td class="alt2">41</td><td class="alt2">PUSH.S</td><td class="alt2">offset</td><td class="alt2">[STK] = [FRM + offset], STK = STK - cell size </td></tr><tr><td class="alt2">42</td><td class="alt2">POP.pri</td><td class="alt2"></td><td class="alt2">PRI = [STK] and STK = STK + cell size</td></tr><tr><td class="alt2">43</td><td class="alt2">POP.alt</td><td class="alt2"></td><td class="alt2">ALT = [STK] and STK = STK + cell size</td></tr><tr><td class="alt2">44</td><td class="alt2">STACK</td><td class="alt2">value</td><td class="alt2">ALT = STK and STK = STK + value</td></tr><tr><td class="alt2">45</td><td class="alt2">HEAP</td><td class="alt2">value</td><td class="alt2">ALT = HEA and HEA = HEA + value</td></tr><tr><td class="alt2">46</td><td class="alt2">PROC</td><td class="alt2">value</td><td class="alt2">ALT = HEA and HEA = HEA + value</td></tr><tr><td class="alt2">47</td><td class="alt2">RET</td><td class="alt2"></td><td class="alt2">STK = STK + cell size, FRM = [STK],STK = STK + cell size,CIP = [STK], The RET instruction cleans up the stack frame and returns from the function to the instruction after the call</td></tr><tr><td class="alt2">48</td><td class="alt2">RETN</td><td class="alt2"></td><td class="alt2">STK = STK + cell size, FRM = [STK],STK = STK + cell size, CIP = [STK], STK = STK + [STK]The RETN instruction removes a specifed number of bytes from the stack. The value to adjust STK with must be pushed prior to the call.</td></tr><tr><td class="alt2">49</td><td class="alt2">CALL</td><td class="alt2">offset</td><td class="alt2"> [STK] = CIP + 5 STK = STK − cell size CIP = CIP + oﬀset The CALL instruction jumps to an address after storing the address of the next sequential instruction on the stack. The address jumped to is relative to the current CIP, but the address on the stack is an absolute address. </td></tr><tr><td class="alt2">50</td><td class="alt2">CALL.pri</td><td class="alt2"></td><td class="alt2"> [STK] = CIP + 1STK = STK − cell size CIP = PRI Jumps to the address in PRI after storing the address of the next sequential instruction on the stack.</td></tr><tr><td class="alt2">65</td><td class="alt2">SHL</td><td class="alt2"></td><td class="alt2">PRI = PRI &lt;&lt; ALT </td></tr><tr><td class="alt2">66</td><td class="alt2">SHR</td><td class="alt2"></td><td class="alt2">PRI = PRI &gt;&gt; ALT (without sign extension) </td></tr><tr><td class="alt2">67</td><td class="alt2">SSHR</td><td class="alt2"></td><td class="alt2">PRI = PRI &gt;&gt; ALT (with sign extension) </td></tr><tr><td class="alt2">68</td><td class="alt2">SHL.C.pri</td><td class="alt2">value</td><td class="alt2">PRI = PRI &lt;&lt; value </td></tr><tr><td class="alt2">69</td><td class="alt2">SHL.C.alt </td><td class="alt2">value</td><td class="alt2">ALT = ALT &lt;&lt; value </td></tr><tr><td class="alt2">70</td><td class="alt2">SHR.C.pri</td><td class="alt2">value</td><td class="alt2">PRI = PRI &gt;&gt; value </td></tr><tr><td class="alt2">71</td><td class="alt2">SHR.C.alt </td><td class="alt2">value</td><td class="alt2">ALT = ALT &gt;&gt; value </td></tr><tr><td class="alt2">72</td><td class="alt2">SMUL</td><td class="alt2"></td><td class="alt2">PRI = PRI * ALT (signed multiply)</td></tr><tr><td class="alt2">73</td><td class="alt2">SDIV</td><td class="alt2"></td><td class="alt2">PRI = PRI / ALT (signed divide),ALT = PRI mod ALT</td></tr><tr><td class="alt2">74</td><td class="alt2">SDIV.alt</td><td class="alt2"></td><td class="alt2">PRI = ALT / PRI (signed divide),ALT = ALT mod PRI</td></tr><tr><td class="alt2">75</td><td class="alt2">UMUL</td><td class="alt2"></td><td class="alt2">PRI = PRI * ALT (unsigned multiply)</td></tr><tr><td class="alt2">76</td><td class="alt2">UDIV</td><td class="alt2"></td><td class="alt2">PRI = PRI / ALT (unsigned divide),ALT = PRI mod ALT</td></tr><tr><td class="alt2">77</td><td class="alt2">UDIV.alt</td><td class="alt2"></td><td class="alt2">PRI = ALT / PRI (unsigned divide),ALT = ALT mod PRI</td></tr><tr><td class="alt2">78</td><td class="alt2">ADD</td><td class="alt2"></td><td class="alt2">PRI = PRI + ALT</td></tr><tr><td class="alt2">79</td><td class="alt2">SUB</td><td class="alt2"></td><td class="alt2">PRI = PRI - ALT</td></tr><tr><td class="alt2">80</td><td class="alt2">SUB.alt</td><td class="alt2"></td><td class="alt2">PRI = ALT - PRI</td></tr><tr><td class="alt2">81</td><td class="alt2">AND</td><td class="alt2"></td><td class="alt2">PRI = PRI &amp; ALT </td></tr><tr><td class="alt2">82</td><td class="alt2">OR</td><td class="alt2"></td><td class="alt2">PRI = PRI | ALT </td></tr><tr><td class="alt2">83</td><td class="alt2">XOR</td><td class="alt2"></td><td class="alt2">PRI = PRI ^ ALT</td></tr><tr><td class="alt2">84</td><td class="alt2">NOT</td><td class="alt2"></td><td class="alt2">PRI = !PRI</td></tr><tr><td class="alt2">85</td><td class="alt2">NEG</td><td class="alt2"></td><td class="alt2">PRI = -PRI</td></tr><tr><td class="alt2">86</td><td class="alt2">INVERT</td><td class="alt2"></td><td class="alt2">PRI = ~PRI</td></tr><tr><td class="alt2">87</td><td class="alt2">ADD.C</td><td class="alt2">value</td><td class="alt2">PRI = PRI + value</td></tr><tr><td class="alt2">88</td><td class="alt2">SMUL.C</td><td class="alt2">value</td><td class="alt2">PRI = PRI * value</td></tr><tr><td class="alt2">89</td><td class="alt2">ZERO.pri</td><td class="alt2"></td><td class="alt2">PRI = 0</td></tr><tr></tr><tr><td class="alt2">90</td><td class="alt2">ZERO.alt</td><td class="alt2"></td><td class="alt2">ALT = 0</td></tr><tr></tr><tr><td class="alt2">91</td><td class="alt2">ZERO</td><td class="alt2">address</td><td class="alt2">[address] = 0</td></tr><tr><td class="alt2">92</td><td class="alt2">ZERO.S</td><td class="alt2">offset</td><td class="alt2">[FRM + offset] = 0</td></tr><tr><td class="alt2">93</td><td class="alt2">SIGN.pri</td><td class="alt2"></td><td class="alt2">sign extent the byte in PRI to a cell</td></tr><tr><td class="alt2">94</td><td class="alt2">SIGN.alt</td><td class="alt2"></td><td class="alt2">sign extent the byte in ALT to a cell</td></tr><tr><td class="alt2">95</td><td class="alt2">EQ</td><td class="alt2"></td><td class="alt2">PRI = PRI == ALT ? 1 : 0</td></tr><tr><td class="alt2">96</td><td class="alt2">NEQ</td><td class="alt2"></td><td class="alt2">PRI = PRI != ALT ? 1 : 0</td></tr><tr><td class="alt2">97</td><td class="alt2">LESS</td><td class="alt2"></td><td class="alt2">PRI = PRI &lt; ALT ? 1 : 0 (unsigned)</td></tr><tr><td class="alt2">98</td><td class="alt2">LEQ</td><td class="alt2"></td><td class="alt2">PRI = PRI &lt;= ALT ? 1 : 0 (unsigned)</td></tr><tr><td class="alt2">99</td><td class="alt2">GRTR</td><td class="alt2"></td><td class="alt2">PRI = PRI &gt; ALT ? 1 : 0 (unsigned)</td></tr><tr><td class="alt2">100</td><td class="alt2">GEQ</td><td class="alt2"></td><td class="alt2">PRI = PRI &gt;= ALT ? 1 : 0 (unsigned)</td></tr><tr><td class="alt2">101</td><td class="alt2">SLESS</td><td class="alt2"></td><td class="alt2">PRI &lt; ALT ? 1 : 0 (signed)</td></tr><tr><td class="alt2">102</td><td class="alt2">SLEQ</td><td class="alt2"></td><td class="alt2">PRI = PRI &lt;= ALT ? 1 : 0 (signed)</td></tr><tr><td class="alt2">103</td><td class="alt2">SGRTR</td><td class="alt2"></td><td class="alt2">PRI = PRI &gt; ALT ? 1 : 0 (signed)</td></tr><tr><td class="alt2">104</td><td class="alt2">SGEQ</td><td class="alt2"></td><td class="alt2">PRI = PRI &gt;= ALT ? 1 : 0 (signed)</td></tr><tr><td class="alt2">105</td><td class="alt2">EQ.C.pri</td><td class="alt2">value</td><td class="alt2">PRI = PRI == value ? 1 : 0</td></tr><tr><td class="alt2">106</td><td class="alt2">EQ.C.alt</td><td class="alt2">value</td><td class="alt2">PRI = ALT == value ? 1 : 0</td></tr><tr><td class="alt2">107</td><td class="alt2">INC.pri</td><td class="alt2"></td><td class="alt2">PRI = PRI + 1</td></tr><tr><td class="alt2">108</td><td class="alt2">INC.alt</td><td class="alt2"></td><td class="alt2">ALT = ALT + 1</td></tr><tr><td class="alt2">109</td><td class="alt2">INC</td><td class="alt2"></td><td class="alt2">[address] = [address] + 1</td></tr><tr></tr><tr><td class="alt2">110</td><td class="alt2">INC.S</td><td class="alt2">offset</td><td class="alt2">[FRM + offset] = [FRM + offset] + 1</td></tr><tr></tr><tr><td class="alt2">111</td><td class="alt2">INC.I</td><td class="alt2"></td><td class="alt2">[PRI] = [PRI] + 1</td></tr><tr><td class="alt2">112</td><td class="alt2">DEC.pri</td><td class="alt2"></td><td class="alt2">PRI = PRI - 1</td></tr><tr><td class="alt2">113</td><td class="alt2">DEC.alt</td><td class="alt2"></td><td class="alt2">ALT = ALT - 1</td></tr><tr></tr><tr><td class="alt2">114</td><td class="alt2">DEC</td><td class="alt2">address</td><td class="alt2">[address] = [address] - 1</td></tr><tr></tr><tr><td class="alt2">115</td><td class="alt2">DEC.S</td><td class="alt2"></td><td class="alt2">[FRM + offset] = [FRM + offset] - 1</td></tr><tr><td class="alt2">116</td><td class="alt2">DEC.I</td><td class="alt2"></td><td class="alt2">[PRI] = [PRI] - 1</td></tr><tr><td class="alt2">117</td><td class="alt2">MOVS</td><td class="alt2">number</td><td class="alt2">Copy memory from [PRI] to [ALT]. The parameter speciﬁes the number of bytes. The blocks should not overlap</td></tr><tr><td class="alt2">118</td><td class="alt2">CMPS</td><td class="alt2">number</td><td class="alt2">Compare memory blocks at [PRI] and [ALT]. The parameter speciﬁes the number of bytes. The blocks should notoverlap.</td></tr><tr><td class="alt2">119</td><td class="alt2">FILL</td><td class="alt2">number</td><td class="alt2"> Fill memory at [ALT] with value in [PRI]. The parameter specifes the number of bytes, which must be a multiple of the cell size.</td></tr><tr><td class="alt2">120</td><td class="alt2">HALT</td><td class="alt2">0</td><td class="alt2">Abort execution (exit value in PRI), parameters other than 0 have a special meaning.</td></tr><tr><td class="alt2">121</td><td class="alt2">BOUNDS</td><td class="alt2">value</td><td class="alt2">Abort execution if PRI &gt; value or if PRI &lt; 0</td></tr><tr><td class="alt2">122</td><td class="alt2">SYSREQ.pri</td><td class="alt2"></td><td class="alt2">call system service, service number in PRI</td></tr><tr><td class="alt2">123</td><td class="alt2">SYSREQ.C</td><td class="alt2">address</td><td class="alt2">call system service</td></tr><tr><td class="alt2">129</td><td class="alt2">SWITCH</td><td class="alt2">offset</td><td class="alt2">Compare PRI to the values in the case table (whose address is passed as an oﬀset from CIP) and jump to the associated the address in the matching record.</td></tr><tr><td class="alt2">130</td><td class="alt2">CASETBL</td><td class="alt2">...</td><td class="alt2">A variable number of case records follows this opcode, where each record takes two cells.</td></tr><tr><td class="alt2">131</td><td class="alt2">SWAP.pri</td><td class="alt2"></td><td class="alt2">[STK] = PRI and PRI = [STK] </td></tr><tr><td class="alt2">132</td><td class="alt2">SWAP.alt</td><td class="alt2"></td><td class="alt2">[STK] = ALT and ALT = [STK] </td></tr><tr><td class="alt2">133</td><td class="alt2">PUSH.ADR</td><td class="alt2">offset</td><td class="alt2"> [STK] = FRM + ofset,STK = STK - cell size</td></tr><tr><td class="alt2">134</td><td class="alt2">NOP</td><td class="alt2"></td><td class="alt2">no operation; used for code alignment</td></tr></table>
<font color="DarkGreen"><font size="5">Switch-Case</font></font><br />
<br />
The "SWITCH" instruction takes an address (relative to CIP) to the case table as a parameter. The case table formally starts with a casetbl instruction followed by two numbers and then a series of records. The first number which follows the casetbl instruction indicates the number of cases in the case table and the second number holds the address (relative to CIP) to the default case. Each record consists of two numbers: case value and jump address. The first number indicates the case value and the second number gives the address (relative to CIP of the current record).<br />
<br />
A typical switch-case layout in PAWN would look like:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">switch(expression)
{
    case 2: {}
    case 4: {}
    case 3: {}
    case 7: {}
    case 5: {}
}</pre>
</div>When the code is compiled the compiler adds instructions to evaluate "expression". The result of the evaluation is stored in the primary register. After that, the switch instruction and the case table is added. The "SWITCH" instruction compares the value stored in PRI to the case value of each record in the case table. If it finds a match, it jumps to the address pointed by the matching record. If it fails to find a match, it uses the default address which is stored in the second number that immediately follows the "CASETBL" instruction.<br />
<br />
When the compiler is asked to give the assembly output for the PAWN code, the compiler gives the assembly code which won't be the actual assembly code. The compiler makes many changes so as to make it easier to interpret and understand the assembly code. One way by which the compiler helps is by changing the instruction addresses with labels. The labels are sort of markers in the assembly output. Therefore, the assembly output shown does not have a one-to-one correspondence with the AMX binary.<br />
<br />
The assembly equivalent given by the compiler for the aforementioned example PAWN code would be:<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 386px;
		text-align: left;
		overflow: auto">; PRI has the value of the expression
        switch 0

; the following are different code blocks represented by label (l.2, l.3, l.4, ...)
l.2		; 2c
	jump 1
l.3		; 34
	jump 1
l.4		; 3c
	jump 1
l.5		; 44
	jump 1
l.6		; 4c
	jump 1
l.0		; 54
	
        casetbl 
	case 5 1 ; the first two numbers indicate number of records and default jump address
	case 2 2 ; the first record
	case 3 4 ; case value: 3, jump label: 4
	case 4 3 ; the compiler writes correct addresses in place of the labels while building the actual binary (.amx file)
	case 5 6 ; the labels are there only to make things easier for us
	case 7 5 ; the fifth &amp; the last record</pre>
</div>If you haven't noticed yet, look how the case values in the records are ordered. They are ordered in ascending order. This is done by the compiler intentionally so that the AMX machine can search the case table using binary search which of course is faster than a linear search.<br />
<br />
<font color="DarkGreen"><font size="5">Examples</font></font><br />
<br />
<b>Usage of basic Load/Store instructions</b><br />
LOAD.pri/alt is used to load global variables<br />
LOAD.S.pri/alt is used to load local variables<br />
<br />
".S" stands for stack<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 418px;
		text-align: left;
		overflow: auto">new a = 10, b = 15;
func()
{
  new local1, local2 = 10;
  #emit LOAD.pri a //Will store the contents of a in PRI
  #emit LOAD.alt b //Will store the contents of b in PRI

  #emit XCHG //Exchange the contents of PRI and ALT
  //Now PRI has the contents of b and ALT has the contents of a
 
  #emit STOR.S.pri local1 //Value of PRI is now stored in local1
  //Note that .S must be used while performing the operation on local variables (variables stored in the stack)

  #emit LOAD.S.pri local1 //Will store the contents of local1 in PRI
  #emit LOAD.S.alt local2 //Will store the contents of local2 in ALT

  //Note that .S must be used while loading the contents of local variables
  
  #emit ADD // PRI = PRI + ALT = local1 + local2 =
  
  #emit STOR.pri a //Store the value of PRI in the global variable a
  //Note that .S hasn't been used here

  printf("a:%d b:%d local1:%d local2:%d", a, b, local1, local2);
}</pre>
</div><b>Usage of stack as temporary storage</b><br />
While pushing constants onto the stack, the ".C" suffix is used with PUSH<br />
<br />
".C" and "CONST." stand for constant<br />
".S" stands for stack<br />
<br />
When variable names are loaded as constant, for example,<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 98px;
		text-align: left;
		overflow: auto">new variable_name;
func()
{
  #emit CONST.pri variable_name
}</pre>
</div>the address of the variable_name is stored in PRI. In general, the names of variables represent the address.<br />
<br />
To load the contents of a global variable to the primary register, you must use "LOAD.pri variable_name". By the definition of the instruction, LOAD.pri stores the contents stored at the address given as a parameter. Therefore, variable_name acts as an address which is replaced by actual numbers by the compiler.<br />
<br />
You can also push addresses of variables using "PUSH.C variable_name".<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 498px;
		text-align: left;
		overflow: auto">new global = 123;
func()
{
  new local = 10;
  new addr_global;

  #emit CONST.pri 8 //PRI = 8
  #emit LOAD.S.alt local //ALT = 2
  
  #emit SUB // PRI = ALT - PRI = 10 - 8 = 2

  #emit PUSH.pri //Push the value of PRI to the stack

  #emit PUSH global //Push the value stored in global on to the stack
  #emit POP.alt //Remove the value stored in global out of the stack

  #emit PUSH.C global //Push the address of global onto the stack
  #emit PUSH.S local //Push the value stored in local to the stack
  
  local = 6; 
  global = local * local; 

  #emit POP.pri //Pop the last pushed value into PRI 
  //last pushed was local, which had a value of 10 when pushed and hence PRI = 10

  #emit CONST.alt 5 //ALT = 5
  #emit SDIV.alt //PRI = ALT / PRI (signed divide),ALT = ALT mod PRI

  //Now ALT = 5 since 5 divided by 10 leaves a remainder of 5
  //PRI = 0 since 10 does not divide 5
 
  #emit POP.pri //Get the address of global which was pushed before local
  #emit STOR.S addr_global //Store the address of global in addr_global

  #emit POP.pri
  #emit STOR.S.pri local 
}</pre>
</div><b>Finding the address of functions</b><br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">new addr;
#emit CONST.pri func1
#emit STOR.S.pri addr
}</pre>
</div>There is a bug in PAWN Compiler which crashes the compiler if you use a function name which isn't present in the file.<br />
<br />
For example, if func1 was present in another file (it could be in an include) and you try to use "CONST.pri func1" in another script, it will crash the compiler even if you #include the other file. <br />
<br />
<b>Accessing elements of arrays that are arguments</b><br />
To obtain the value stored at an address, we will use LOAD.I (PRI = [PRI]).<br />
<br />
".I" means indirection.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 242px;
		text-align: left;
		overflow: auto">public OnPlayerCommandText(playerid,cmdtext[])
{
  new index = 2;

  #emit LOAD.S.alt cmdtext 
  #emit LOAD.S.pri index 
  #emit IDXADDR //PRI = ALT + (PRI Ч cell size) (calculate indexed address)

  //Now PRI contains the address of the element stored in index 2 of cmdtext (cmdtext[2])

  #emit LOAD.I //PRI = [PRI] //Since PRI contains the address of cmdtext[2], [PRI] will give the value stored at index 2
  //Instead of using IDXADDR and then LOAD.I, you can do the same with just one instruction using LIDX
  //LIDX = PRI = [ALT + (PRI Ч cell size)]
}</pre>
</div><b>Accessing the element of a local array</b><br />
Since local arrays are stored in heap, we cannot load the array using LOAD.S. We need to directly load the address of the array into PRI using the ADDR.PRI instruction.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 194px;
		text-align: left;
		overflow: auto">main()
{
  new a[] = "AMX Assembly";
  new character; 
  #emit ADDR.pri a
  #emit ADD.C 8
  #emit LOAD.I
  #emit STOR.S.pri character

  printf("%c", character);
}</pre>
</div><b>Skipping instructions by directly manipulating the contents of CIP</b><br />
LCTRL is used to obtain the value stored in the special registers and SCTRL is used to update the contents of the special registers. In the following example, we will obtain the value of CIP and modify it thus skipping instructions in between.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 210px;
		text-align: left;
		overflow: auto">func()
{
  #emit LCTRL 6 //Get the current value of CIP
  #emit ADD.C 28 //Add 28 to PRI (This instruction takes 8 bytes)
  #emit SCTRL 6 //Set CIP to the value stored in PRI (This instruction takes 8 bytes)
  //Adding 28 will make the AMX Machine to jump skip the next 3 instructions and jump to the last NOT instruction

  #emit PUSH.pri //Takes 4 bytes - THIS WONT BE EXECUTED
  #emit CONST.alt 10 //Takes 8 bytes - THIS WONT BE EXECUTED

  #emit NOT //Takes 4 bytes - THIS WILL BE EXECUTED
}</pre>
</div><b>Multiplying/Dividing numbers by powers of 2</b><br />
To understand the following code, you need to know bitwise operators.<br />
<br />
Shifting the bits of a number by n to the left multiplies the number by 2^n and shifting the bits of a number by n to the right divides the number by 2^n.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 434px;
		text-align: left;
		overflow: auto">MultiplyBy4(a)
{
  #emit LOAD.S.pri a
  #emit SHL.C.pri 2
  #emit STOR.S.pri a 

  //Equivalent code
  //#emit LOAD.S.pri a
  //#emit CONST.alt 2
  //#emit SHL

  return a;
}
DivideBy4(a)
{
  #emit LOAD.S.pri a
  #emit SHR.C.pri 2
  #emit STOR.S.pri a 

  //Equivalent code
  //#emit LOAD.S.pri a
  //#emit CONST.alt 2
  //#emit SHR

  return a;
}</pre>
</div>We haven't tried using all the instructions yet but most of the remaining instructions are easy if you have understood these examples properly.<br />
<br />
There are still some instructions such as STACK,RETN,SYSREQ,etc about which we will discuss in extreme detail later in this tutorial.<br />
<br />
The examples in this section are too simple and were meant to give you a feel for #emit. You can find #emit being used for useful purposes at the snippets section.<br />
<br />
<font size="6"><font color="RoyalBlue">Stack &amp; Functions</font></font><br />
This section will explain how stack really works in AMX and how to perform various tasks related to functions such as calling, returning, passing arguments, etc.<br />
<br />
<font color="DarkGreen"><font size="5">Parameters and Local Variables of a function</font></font><br />
The frame pointer ("FRM") points to the address at the bottom of the running function's header (can be treated as the address to the start of the stack for the running function). If that scared you, here is a much nicer way to say the same. The FRM pointer basically stores an address which points to the start of the stack for the current function that is being executed. When you use an offset of a local variable (or that of an item on stack) say, for the PUSH.S instruction, you add that offset to the FRM to get the address which is then added to DAT to get the absolute address. Basically, you use offsets of the local variables and function arguments which are relative to the frame pointer when you write the code using variable names. The offsets are simple whole numbers such as 4, 8, 12! You will learn more about it soon! The stack pointer("STK") points to the last data put on to the stack whereas frame pointer ("FRM") points to a data somewhere in the middle of the stack. Where exactly in the middle? We will talk about in a later section.<br />
<br />
Every local variable that you create are pushed on to the stack and every local array gets are stored in the heap. Note that it is possible for the heap and stack to overwrite each other since they share the same memory block. In such a case you should see a run-time error similar to the following:<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">[15:39:44] [debug] Stack pointer (STK) is 0xFFFFF3E0, heap pointer (HEA) is 0x244
[15:39:44] [debug] AMX backtrace:
[15:39:44] [debug] #0 000003fc in main () from test.amx
[15:39:44] Script[gamemodes/test.amx]: Run time error 3: "Stack/heap collision (insufficient stack size)"</pre>
</div>I managed to force a collision error by creating a local array with 5000 elements (Stack/Heap Size was 16384 bytes when compiled but I needed at least 20108 bytes to store the contents of the stack and heap without colliding which is more than what I have hence the error).<br />
<br />
You can solve the problem by asking the compiler to increase the stack size by using the dynamic pragma directive.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">#pragma dynamic [required size]</pre>
</div>The "new" keyword when used within a function is basically responsible for creating space for your variable in the stack. <br />
<br />
For example, the following code <br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">func()
{
  new x = 101,y = 102 , z = 103;
}</pre>
</div>would have an assembly equivalent to (as produced by the PAWN compiler)<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 162px;
		text-align: left;
		overflow: auto">;&#36;lcl x fffffffc
push.c 65 //x on the stack, 65 = 101 in hexadecimal
;&#36;exp
;&#36;lcl y fffffff8
push.c 66 //y on the stack, 66 = 102 in hexadecimal
;&#36;exp
;&#36;lcl z fffffff4
push.c 65 //z on the stack, 67 = 103 in hexadecimal
;&#36;exp</pre>
</div>Ignore the ";&#36;exp" lines. The "&#36;lcl" lines are quite useful since they give the relative address of the variable. These lines are added by the compiler to improve readability of the assembly output. <br />
<br />
If you observe the addresses carefully, you will realize that the addresses of the local variables are actually negative. Local variables are located below the function frame pointer and the function arguments are located above the function frame pointer. Therefore, the relative addresses of local variables are negative. If that did not make any sense, the following examples should make it clear.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">myFunc(a,b,c)
{
  new m, n;
  for(new i = 0; i &lt; 10; i++) //STK 12 bytes below the frame pointer here since there are 3 local variables (m, n, i)
  { 

  }
}</pre>
</div>If you remember, the stack pointer gives the current position in the stack. In the above code, at the instant when AMX is executing the first statement inside the loop; at the start of the loop, since 3 local variables have been created, the stack pointer will be 12 bytes below the frame pointer (don't get confused, just remember that the frame pointer points to a position somewhere in the stack - we will discuss where in detail soon) at "i". If you now declare a new variable, you would push the variable onto the stack which would move the stack pointer down by another 4 bytes. <br />
<br />
Similarly, when a variable goes out of scope, the stack pointer moves up by 4 bytes.<br />
<br />
The local variables "m", "n" and "i" have relative address of -4,-8 and -12 respectively. The argument "a" has a relative address of 12, "b" has a relative address of 16. Where did the address 0-12 go? There are important information stored in those addresses about which we will discuss in a few minutes. For now, assume that the addresses of the function arguments start from 12 and some top secret information is stored from 0-12.<br />
<br />
I had earlier mentioned that names of functions, local variables act like addresses for the compiler. <br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">new var_name;
#emit CONST.pri var_name //Loads the address of var_name relative to FRM into PRI</pre>
</div>The compiler will automatically replace the "var_name" with the correct address. You can give the address in numbers too but finding the numerical address would be a really hectic job most of the times. We will study them anyway.<br />
<br />
Finding the address of local variables or arguments is easy since there are not too many local variables/arguments. Many OpCodes accept the address relative to the frame pointer so it could be useful to know the relative addresses of the local variables.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 114px;
		text-align: left;
		overflow: auto">func(a,b)
{
  #emit LOAD.S.pri a
  //is same as
  #emit LOAD.S.pri 12 //The relative address of a is 12 
}</pre>
</div>The first argument in the above code has the address 12 and the second has the address 16. <br />
<br />
If you are not sure of the address or lazy to find the address, you can use the compiler to find the address using the idea given below.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 322px;
		text-align: left;
		overflow: auto">func(a,b)
{
  new x;
  new y;
  new z;

  #emit CONST.pri x
  #emit STOR.S.pri y

  #emit CONST.pri y
  #emit STOR.S.pri z

  #emit CONST.pri z
  #emit STOR.S.pri x

  printf("Address of x: %d",y);
  printf("Address of y: %d",z);
  printf("Address of z: %d",x);
}</pre>
</div>The output will be<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">-4
-8
-12</pre>
</div>If you try to find the address of the function parameters you should get 12 and 16 for 'a' and 'b' respectively.<br />
<br />
If you want to pass the negative address to the instructions, you will have to use hexadecimal notation because the PAWN Compiler doesn't allow negative decimals as operands (the compiler isn't smart enough to realize that '-' sign you add to the decimal number indicates that the number is negative - the compiler complains about the '-' sign because it expected a number not a sign - it is a n00b). The hexadecimal numbers should be in <b>two's complement</b> since AMX makes use of the two's complement system to store negative numbers.<br />
<br />
The compiler keeps track of the STK pointer itself when it is compiling. The compiler won't be aware of any changes you do to the STK pointer yourself using #emit (PUSH and POP instructions alter the STK pointer so any such instruction added by you using #emit won't inform the compiler about it). This has horrible consequences. More about the issue with examples will be discussed in the later.<br />
<br />
<font color="DarkGreen"><font size="5">Making function calls</font></font><br />
Before calling a function, you need push the arguments, total size of arguments and the return address to the stack. Based on this information, the function knows how many arguments are there, what are the arguments and where to jump to after the function completes its execution.<br />
<br />
The general procedure for calling a function and the timeline of the executing function is given below<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 114px;
		text-align: left;
		overflow: auto">; Push the arguments
; Push the total size of all arguments combined (number of arguments pushed * 4)
; Push Return Address
; Function Call
; Function executes
; Restores the previous state and returns to the caller function</pre>
</div>To learn more about the structure of the stack after a function is called, we will pop the contents of the stack and print them on the screen and use the printed information to compare with the values we had set to the locals and arguments and try to decode the stack structure. The following code will print the contents of the stack on the screen.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 498px;
		text-align: left;
		overflow: auto">new x;
func(a,b)
{
	new z = 101;
	new y = 102;
	
	#emit POP.pri
	#emit STOR.pri x
		
	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);

  #emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

  printf("%d",x);

	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);

	#emit POP.pri
	#emit STOR.pri x

	//Nothing more to POP but lets investigate what is in the FRM register
  #emit LCTRL 5
	#emit STOR.S.pri z

	printf("FRM in func: %d", z);

	for(;;) { } //If I allow the function to return, it will crash the server (run-time error) because the POP instructions change the STK Register and the return instruction expects STK to be having the correct address so that the next POP instruction would pop the return address. Did not get it? Anyway I am lying a bit here. The compiler sets the STK to the correct value before returning but it wont be aware of the changes we did so it wont set it to the correct value while returning. More about this later.

  return x; //If this were to be executed, you would get a "Invalid memory access" run-time error.
}
main()
{
  new zyx ;
  #emit LCTRL 5
  #emit STOR.S.pri zyx

  printf("FRM in main: %d", zyx);

  zyx = 1;
  func(1001,1002);
  new abc = 2;
}</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 178px;
		text-align: left;
		overflow: auto">FRM in main: 17988
102 ; y
101 ; x
17988 ; Frame of "main"
1900 ; Return address
8 ; we pushed 2 arguments, number of bytes they take is 8
1001 ; argument 1
1002 ; argument 2
1 ; zyx local variable from the main()
FRM in func: 17960</pre>
</div>From the above information , you can guess the stack structure after a function call. Here is how it looks (descending order of relative addresses)<br />
<br />
The number before the : indicates the address relative to the frame.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 242px;
		text-align: left;
		overflow: auto">; Stack before initiating the calling process

; Argument n
; Argument n-1
; .
; .
; .
; 16:Argument 2
; 12:Argument 1
; 8:Number of arguments in terms of the size (4 * n)
; 4:Return Address
; 0:Previous Function's Frame Pointer (FRM)

; Local Variables created in the called function</pre>
</div>Before getting into the details, let us first discuss what that "frame" thing really means. As said in an earlier section, every item in the stack has a relative address with respect to frame pointer (the negative relative addresses we talked about). To obtain the complete address we add the relative address/offset to the frame pointer.<br />
<br />
Just a remainder, I said 'complete address' but it actually it isn't, you need to add address of DAT register to that so called complete address to obtain the actual address. Never mind if you don't understand it. The assembly OpCodes accept addresses relative to DAT everywhere so it shouldn't bother you. You will learn eventually as time passes.<br />
<br />
I hope that you are gaining some intution about the frame pointer. At this stage, I can revial a new fact. The frame pointer is related to the current executing function and is changed when you make a function call or when you return. It is set to such a value that all local variables go below the position pointed by the frame pointer and all arguments and other information (return address, previous function's frame pointer) go above the frame pointer.<br />
<br />
Go back to the output printed by our stack printing code and observe that the local variable 'abc' is not yet on the stack when func is called because func is called before the new instruction which puts abc onto the stack. Also note that there is no 'x' in the stack since 'x' is a global variable and resides in the heap.<br />
<br />
If you observe the order in which the arguments are pushed, you will find that arguments are pushed in the reverse order. It is done so that when the function is called the arguments are popped in the correct order. Do you remember the LIFO rule? What you pushed last will be poped first. Of course, the arguments are not poped when the function alled but the order of arguments start from the top of the stack so the last argument you pushed must be the first argument of the function.<br />
<br />
Lets verify the above statement again and investigate what that number 8 which was pushed in our previous example really means.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">call_f(a,b)
{

}
func()
{
  call_f(5,6);
}</pre>
</div>The PAWN Compiler gives an assembly output as follows for the above code<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">push.c 6 //Argument 2
push.c 5 //Argument 1 
push.c 8 //Sum total of the size of arguments
call Func</pre>
</div>The arguments are pushed first in the reverse order after which the number/size of arguments is pushed. Since two arguments are being passed, the total size of the arguments will be 2*4, hence 8 is pushed. <br />
<br />
The next instruction, "CALL", jumps to an address after storing the absolute address of the next sequential instruction of the calling function, i.e: the return address, on the stack. It is using this address which was pushed, the function which was called knows where to return after the called function ends. <br />
<br />
To find the return address manually (address of the instruction which comes after CALL instruction of the calling function), we need to add 8 to the CIP when it is pointing to the CALL instruction. Since every instruction takes 4 bytes and every parameter takes 4 bytes, the total number of bytes to jump will be 8. By adding 8 to the CIP, we get the address of the next instruction, i.e: the return address in our case. <br />
<br />
The return address is pushed artifically by directly assigning the 'return address' to the position pointed by the STK and then by decreasing the cell size by 4 (just updating the STK pointer so that it points to the new top of the stack position).<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">[STK] = CIP + 2*4
STK = STK - cell size</pre>
</div>After pushing the return address, CIP is then set to the address of the function which has to be called.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">CIP = CIP + offset</pre>
</div>The AMX machine now executes the instruction pointed by CIP, in other words, executing the code of the called function.<br />
<br />
We actually needn't do the above calculation while using CALL instruction since the instruction does all those calculations automatically.<br />
<br />
There is also an instruction CALL.pri which allows us to jump to the address stored in PRI. Unfortunately the CALL and CALL.pri instructions have been<b> removed </b>for security reasons.<br />
<br />
That sounds bad... after studying how CALL instruction works and we can't even use them. No need to get disappointed because by studying how the CALL instruction works, we know how function calls are made step by step and we can FAKE the call instruction. <br />
<br />
Since we know what the CALL instruction does, we can mimic it by pushing the return address ourselves and directly modifying the CIP pointer ourselves to point to the start of the function that is to be called.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 274px;
		text-align: left;
		overflow: auto">#emit PUSH argument
#emit PUSH argument
.
.
.
#emit PUSH.C total_size_of_arguments_pushed //number of arguments * 4

//Now we need to calculate and push the return address

#emit LCTRL 6 //Get the value of CIP and store it in PRI
#emit ADD.C 28 // Add 28 to PRI to get the address of the instruction which comes after SCTRL
#emit PUSH.pri // PRI will be having the return address and we will PUSH it onto the stack
#emit LOAD.pri pointer // Load the address of the function to be called from a variable into PRI
#emit SCTRL 6 // Set the CIP to the address in PRI

//The function will set the CIP to the return address which is here</pre>
</div>The working of the above code has been explained in the comments and requires no further explanation. The only thing you might be confused with is about that '28' and where we get the 'pointer' variable. Remember that each OpCode takes 4 bytes and every operand takes 4 more bytes. Now count the number of OpCodes (number of instructions) and the number of operands and find out by what amount you should increment address stored in CIP from LCTRL to get the address of the instruction that comes after SCTRL. Regarding the pointer thingy, ignore it for now. There is a dedicated sub-section which explains how to obtain addresses of the function.<br />
<br />
<font color="DarkGreen"><font size="5">Calling native functions using SYSREQ</font></font><br />
Every native that is used in the script is given a unique index in the native function table by the compiler (just like an index is assigned to public functions). The SYSREQ.C takes one parameter which is an index to the native function in the native function table. <br />
<br />
Calling a native function is quite similar to the procedure we adapt to call any other function. The only difference lies in the final step. The SYSREQ instruction must be used to call a native function instead of manually updating the CIP pointer.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 98px;
		text-align: left;
		overflow: auto">#emit PUSH Argument3
#emit PUSH Argument2
#emit PUSH Argument1
#emit PUSH.C total_size_of_arguments
#emit SYSREQ.C native_function</pre>
</div>A function in pawn cleans up its arguments that were pushed on the stack, because it returns with the RETN instruction. But the function called using SYSREQ.C instruction does not remove items from the stack, so the AMX machine expects us to explicitly clean the stack using the STACK instruction after the SYSREQ.C instruction.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 98px;
		text-align: left;
		overflow: auto">PUSH.S health
PUSH.S playerid
PUSH.C 8
SYSREQ.C SetPlayerHealth
STACK 12 //Restoring the stack to its original condition.</pre>
</div>Since we pushed 12 bytes (inclusive of the PUSH.C 8) onto the stack before calling, we need to move the STACK pointer up by 12 bytes (which is equivalent to popping three items from the stack). If the stack is not restored to the original condition, the script might show undefined behaviour and will also crash the AMX Instance in most cases. It is important that the stack has been restored before returning from a function. <br />
<br />
The PAWN Compiler adds an entry to the native function list for every native you use in your script. But as said earlier while we were discussing few examples the PAWN compiler isn't aware of any changes done using #emit. The PAWN compiler adds an entry to the native functions table if and only if the script makes a function call to the native. When you call a native the usual way (without using emit), the compiler checks if the native has already been added to the native functions table and if not added, it adds it after which it spits out the SYSREQ instruction with the native function's id. That means, if a native function has not been used anywhere in your script and you try to call it using SYSREQ.C, it will crash the compiler because the native you are trying to all does not exist in the native function's table and the compiler panics when it doesn't find it. <br />
<br />
Here is one workaround for the bug. <br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">public _SYSREQ_FIX()
{
  CallTheNativeFunction();
}</pre>
</div>You needn't really call the function "_SYSREQ_FIX", you just need to declare a public function so that the compiler adds the native function to the native function table.<br />
<br />
Now your SYSREQ calls will no more cause the compiler to crash.<br />
<br />
<font color="DarkGreen"><font size="5">Methods of passing arguments</font></font><br />
<br />
<b>Call by value</b> <br />
When an variable is passed by call by value method, a copy of the variable is created. Any modifications done by the called function won't affect the original variable.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 178px;
		text-align: left;
		overflow: auto">func(a,b)
{
  a = 6;
}
func2()
{
  new m = 10;
  func(m,5); 
  //m will be 10
}</pre>
</div>The argument "m" is pushed in this manner<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">#emit PUSH.S m</pre>
</div>The argument is modified using the following instructions<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">#emit CONST.pri 6
#emit STOR.S.pri a</pre>
</div><b>Call by reference (Reference Variables) </b><br />
When variables are passed as references, the address is pushed instead of creating a copy of the variable on the stack. Therefore, any changes made in the called function will affect the variable.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 178px;
		text-align: left;
		overflow: auto">func(&amp;a)
{
  a = 5;
}
func2()
{
  new m = 10;
  func(m); 
  //m will be 5
}</pre>
</div>The address of the variable "m" is pushed using the following instruction<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">#emit PUSH.addr m</pre>
</div>The value at that address is modified using the following instructions<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">#emit CONST.pri 5
#emit SREF.S.pri a</pre>
</div><b>Passing Arrays as arguments</b><br />
Passing the array is equivalent to passing the address of the array. This explains why modifying the contents of an array which was passed as an argument affects the array which was originally passed.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 194px;
		text-align: left;
		overflow: auto">new global_str[10];
public OnPlayerCommandText(playerid, cmdtext[]) //cmdtext is like a local array
{
  //Pushing the address of the global string
  #emit PUSH.C global_str 

  //Pushing a local string
  #emit PUSH.S cmdtext

  // Rest of the function call instructions
}</pre>
</div>The array is modified in the called function as if it was passed by call by reference.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">func(a[])
{
  a[5] = 123;
}</pre>
</div>The function which was called will use the following code to modify the contents of the array<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 98px;
		text-align: left;
		overflow: auto">#emit LOAD.S.pri c
#emit ADD.C 14
#emit MOVE.alt
#emit CONST.pri 7b
#emit STOR.I</pre>
</div>We will be discussing about arrays in detail in "Arrays &amp; Strings" section, so you needn't worry if you couldn't understand the above set of instructions.<br />
<br />
You can pass part of the arrays in PAWN using the idea used in the following code<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 162px;
		text-align: left;
		overflow: auto">func(a[])
{
  printf("String:%s",a);
}
main ()
{
  new a[] = "AMX Assembly";
  func(a[1]);
}</pre>
</div>The printf will print just "MX Assembly" in the console since the address of "a[1]" was passed instead of "a[0]". It should be clear how strings work in PAWN once you see the assembly equivalent of the above PAWN code.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">#emit ADDR.pri a //Load the address of a into PRI
#emit ADD.C 4 //Since we need 'a[1]', we need to add 4 bytes to the address of 'a' (each array element is a cell which takes 4 bytes)
#emit PUSH.pri //Push the calculated address
//Push 4 onto the stack and call the function</pre>
</div><b>Variable Arguments</b><br />
Arguments that are passed to function as a variable argument are passed as references which is why you can modify the variable argument using <b><a href="https://sampwiki.blast.hk/wiki/Setarg" target="_blank">setarg</a></b>.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 194px;
		text-align: left;
		overflow: auto">func(a,...)
{
  setarg(1, 0, 8);
}
func2()
{
  new a = 7;
  new b = 12;
  func(a,b);
  //b = 8
}</pre>
</div>The argument 'a' will be pushed as if it was passed by call by value and the argument 'b' will be pushed as if it was passed by call by reference. <br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">#emit PUSH.ADR b //Variable Argument
#emit PUSH.S a //Call by Value</pre>
</div><font color="DarkGreen"><font size="5">Return Instruction</font></font><br />
The stack must be restored to its initial state (when the function was called) before returning. If not restored correctly, then it will give rise to a run-time error and will render you whole script unusable.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 162px;
		text-align: left;
		overflow: auto">func()
{
  new a,b;
}
main ()
{
  func();

}</pre>
</div>The PAWN Compiler keeps track of the STK and updates it every time you create a local variable or when a local variable goes out of scope. Using this information, the compiler restores the stack to its original condtition before returning. The assembly equivalent should show this step.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">stack 8
zero.pri
retn</pre>
</div>It moves the STK pointer up by 8 bytes since there are still two local variables on the stack after which it returns.<br />
<br />
The PAWN Compiler is doing a good job but unfortunately the compiler isn't smart enough to update the STK pointer when we emit assembly instructions which modify the stack. The following example clearly shows the problem with the compiler's limited intelligence.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">func()
{
  #emit PUSH.C 123 //The compiler isn't aware of this
}</pre>
</div>The above code will give rise to a run-time error. The compiler doesn't add a "STACK" instruction to move the STP pointer up by 4 bytes while returning as it is not aware of the PUSH instruction, therefore the return instruction (added by the compiler) will pop "123" and use it as the return address, hence leading to a crash. <br />
<br />
If you have pushed values onto the stack, you need to clear them before using the return instructions. When you use "return value;" in a function, the compiler automatically clears the STACK as per its knowledge before returning. <br />
<br />
The above buggy code can be fixed in two ways<ul><li>Simply POP the value from the stack before returning</li>
<li>Use STACK 4 to move the stack pointer up by 4 bytes before returning</li>
</ul>
That is just one possibility. The compiler won't restore the stack to its original condition for us when we are placing the return instructions ourselves. It is our responsibility to ensure that the stack has been restored before we use the return instruction.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">func()
{
  new a,b;
  #emit ZERO.pri
  #emit RETN

  return 0; //The compiler will complain about not returning even though we use the RETN instruction. The sole purpose of this line is to keep the compiler happy.
}</pre>
</div>In the above code, the compiler does add a "STACK 8" instruction just before "return 0" but it doesn't add it before the "RETN" instruction which we placed manually. Hence, the stack won't been restored to its original condition before returning and hence it will give a run-time error.<br />
<br />
In general , you must move the stack pointer up by 4 bytes for every local variable which is still in scope and 4 bytes for every mismatched PUSH instructions.<br />
<br />
What ever the case maybe, you just ensure that the stack is at the same condition as it was at the start of the function before returning.<br />
<br />
The reason for the crash when you don't restore the stack due to the RETN/RET instructions pop the wrong return address from the stack and jumping to it We know that before calling a function, the return address is pushed onto the stack. The return address will be the next item on the stack to be popped. If the STK pointer is not set properly or in other words the stack hasn't been restored to the initial state, the RET/RETN instruction will pop the wrong address from the stack and will jump to some unknown location which is usually invalid. Therefore, causing the server to crash.<br />
<br />
<b>Returning values</b><br />
You already know about the "return" keyword but you do not know how it works.<br />
<br />
When you use "return 0;" , this is what happens<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">#emit ZERO.pri //PRI = 0
#emit RETN</pre>
</div>If you do "return variable; ,<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">#emit LOAD.S.pri variable //Assuming variable is a local variable
#emit STACK x //To fix the stack
#emit RETN</pre>
</div>You by now might have guessed how return works. <br />
<br />
Whatever has to be returned by a function is stored in PRI register before executing a RET/RETN instruction. <br />
<br />
We will look at a useful example to make you more comfortable with it.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 194px;
		text-align: left;
		overflow: auto">stock getAddress(arr[]) //Finds the address of the passed array and returns it
{
  #emit LOAD.S.pri arr
  #emit RETN //We don't need a STACK instruction because we never created any locals nor we pushed something on to the stack

  //does the same as the following
  new addr;
  #emit LOAD.S.pri
  #emit STOR.S.pri addr
  return addr; //The compiler will automatically add the stack correct instruction before returning
}</pre>
</div><font color="DarkGreen"><font size="5">Finding functions</font></font><br />
There are two ways to obtain the address of a function.<br />
<br />
<b>Using CONST.pri</b><br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">#emit CONST.pri func_name
#emit STOR.S.pri local_var</pre>
</div>This is one and the only way to find the address of a non-public and non-native function.<br />
<br />
<b>Searching the public function list</b><br />
The AMX machine<b><a href="https://github.com/Zeex/pawn/blob/b261bacfa490b4e381ec9f76e1046f709d6ba6f7/source/amx/amx.c#L1467-L1492" target="_blank"> performs a binary search to find the address of a public function </a></b>when you use CallLocalFunction/CallRemoteFunction for which the public function list needs to be sorted.<br />
<br />
You can treat the public functions list as a sorted array of strings. Hence, every public function in that list has an index which <b><a href="https://sampwiki.blast.hk/wiki/Funcidx" target="_blank">funcidx</a></b> returns.<br />
<br />
Using the index you can now jump to the entry in the public function list to find out the address of the function.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 354px;
		text-align: left;
		overflow: auto">new
  idx = funcidx("function"),
  pointer;

#emit LCTRL 1 //Get the offset to DAT
#emit NEG //Invert to get the offset to start of prefix

#emit ADD.C 32 //Public function list comes 32 bytes after the start of prefix
#emit STOR.S.pri pointer //Store the address to the public function list
#emit LREF.S.alt pointer
// Get the pointer to the function at the given index.

#emit LCTRL 1
#emit NEG
#emit ADD
#emit LOAD.S.alt idx //Load the index to ALT
#emit SHL.C.alt 3 //Multiply the value stored in ALT by 8 since each entry in the list takes 8 bytes
#emit ADD 
#emit STOR.S.pri pointer 
#emit LREF.S.pri pointer //Obtain the address
#emit STOR.S.pri pointer</pre>
</div><font size="6"><font color="RoyalBlue">Arrays &amp; Strings</font></font><br />
<br />
<font color="DarkGreen"><font size="5">Single Dimensional Arrays</font></font><br />
The memory layout of a single dimension array in PAWN is similar to the memory layout of a single dimension array in C/C++. The contents of an array are stored in a linearly where the passing the array is equivalent to passing the address of the first element.<br />
<br />
If you know the address of the first element of the array, then you can find the address of any element of the array using the following formula.<br />
<br />
Since every item in the array is a cell, every item takes 4 bytes. To get the address of the second element in the array, we add 4 to the address of the first element. To get the address of the third element of the array, we add 8 to the first element of the array. We can generalize this to a formula.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">Address of nth element of the array = Address of the first element + (n-1) *4</pre>
</div>If you have understood how single dimension arrays are stored in memory, then you should be able to understand the following code which modifies the 4 element of the array.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 242px;
		text-align: left;
		overflow: auto">new arr[100];

main ()
{
  #emit CONST.pri arr //Load the address of the array (address of the first element)
  #emit ADD.C 12 // (n-1)*4 = (4-1) *4 = 3 * 4 = 12
  //PRI now has the address of the 4th element of the array
  
  #emit PUSH.pri //Push the address of the 4th element of the array
  #emit CONST.pri 10
  #emit POP.alt //Pop the address into ALT
  #emit STOR.I //Store PRI in [ALT]

}</pre>
</div>There are two macro instructions "IDXADDR" and "LIDX" which can be used for calculating the address of an array element and loading the data stored in an array element respectively.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 130px;
		text-align: left;
		overflow: auto">#emit CONST.alt array_address
#emit CONST.pri n
#emit IDXADDR //PRI now has the address of the (n + 1)th element

#emit CONST.alt array_address
#emit CONST.pri n
#emit LIDX //PRI now has the value stored in the (n + 1)th element</pre>
</div><font color="DarkGreen"><font size="5">Two Dimensional Arrays</font></font><br />
Two dimensional are not that nice and they are completely different from C/C++ Style memory layout of two dimensional arrays.<br />
<br />
Two dimensional arrays consists a single dimensional array which holds the offsets to the sub-arrays.<br />
<br />
For example, an array declared as "arr[5][6]" would have a single dimensional array with 5 elements where each element points to a six element sub-array. You can imagine a two dimensional array to be a array of pointers where each pointer points to a sub-array.<br />
<br />
The total memory footprint of a two dimensional array is given by the following formula<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">number of cells needed = major_dimension + major_dimensionЧminor_dimension</pre>
</div>As stated above, the “major dimension” of two-dimensional arrays holds the offsets to the sub-arrays. This offset is in bytes and it is relative to the address of the cell from which the offset was read. <br />
<br />
If that sounds complicated, the example should clear all your doubts.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">new arr[5][6];</pre>
</div>If you have to obtain the address of the first element of arr[2], then you will have to follow these steps:<br />
*<i>Major Array:I call the array that holds the offsets to the sub-ararys as major array</i><ol style="list-style-type: decimal"><li>Get the address of the major array</li>
<li>Find the address of the 2nd element of the major array</li>
<li>Now find the offset to the arr[2] by loading the value stored in the address found in the previous step</li>
<li>Add the offset to the address of the 2nd element of the major array</li>
</ol>
You now have the address of the first element of arr[2].<br />
<br />
Once you know the first element of arr[2], you can treat arr[2] as a single dimension array.<br />
<br />
To find the value of arr[2][4] should now be extremely simple. <br />
Anyway here is the snippet which does it<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 338px;
		text-align: left;
		overflow: auto">#emit CONST.alt arr //Load the address of the array
#emit CONST.pri 2 //We want to access the 2nd sub-array
#emit IDXADDR //Address of the 2nd element of the major array

#emit MOVE.alt //Keep a copy of that address since we need to add it to the offset to get the address of the sub array

//ALT = PRI = Address of the 2nd element of the major array
#emit LOAD.I

//ALT = Address of the 2nd element of the major array
//PRI = offset relative to the address stored in the ALT to the 2nd sub-array
#emit ADD

//PRI now has the address of the sub-array
#emit MOVE.alt //Move the address of the first element of the sub-array from PRI to ALT

#emit CONST.pri 4 //We want the 4th element of the sub-array
#emit LIDX//Load the value stored at arr[2][4]

#emit STOR.S.pri arr_4_2</pre>
</div><font color="DarkGreen"><font size="5">Higher Dimensional Arrays</font></font><br />
A three dimensional array holds a single dimensional array of pointers to sub-two-dimensional-arrays which in turn hold single-dimensional array of pointers to sub-sub-arrays. This isn't that hard once you have understood two dimensional arrays properly.<br />
<br />
Here is an example which illustrates how to access the data stored in arr[3][3][3]<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 370px;
		text-align: left;
		overflow: auto">#emit CONST.pri arr //Load the address of the array
#emit ADD.C 12 //Get the address of the 3rd element of the major array
#emit MOVE.alt //Make a copy of the address since we need to add it to the offset
#emit LOAD.I //Get the offset
#emit ADD //ALT contains the address of the 3rd element of the major array and PRI contains the offset

//PRI now has the address of the 3rd sub-two-dimensional array
//Now everything is similar to what we've used in the previous section

#emit ADD.C 12 //Get the address of the 3rd element of the sub-2-dimensional array
#emit MOVE.alt //Make a copy of the address
#emit LOAD.I //Get the offset
#emit ADD //Get the address of the arr[3][3]

//Now its an operation on a single dimensional array
//PRI has the address of the sub-sub-array

#emit ADD.C 12 //We need the 3rd element of the sub-sub-array

//PRI now has the address of arr[3][3][3]

#emit STOR.S.pri arr_3_3_3</pre>
</div><font color="DarkGreen"><font size="5">Packed Arrays</font></font><br />
One thing most of you don't know is the characters are not stored in the same order in packed strings as they are stored in unpacked strings.<br />
<br />
For example, "AMX Assembly" is stored in different ways would look like<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">AMX Assembly ; C String
A M X A s s e m b l y ; PAWN Strings 
 XMAessAylbm ; Packed Strings</pre>
</div>Packed strings look messed up. The reason why PAWN stores packed strings in such order is because PAWN cells are stored in <b><a href="https://en.wikipedia.org/wiki/Endianness" target="_blank">little-endian system</a></b>.<br />
<br />
By little-endian, we mean that bytes of every cell are read backwards.<br />
<br />
So how do you interpret a packed string? Let's take the same example, " XMAessAylbm".<br />
<br />
We first divide the packed string to make groups of 4 characters.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto"> XMA|essA|ylbm</pre>
</div>Now we reverse the order in each cell to obtain a byte order string.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">|AMX |Asse|mbly</pre>
</div>*note that I have ignored the null character in all the examples<br />
<br />
I hope by now you are familar with packed strings. The purpose of adding a Packed Strings sub-section is to demonstrate how to obtain the individual bytes from a cell and to let you know that 4 characters are stored in one cell so that you push the correct character when passing packed strings. Explore and find out what the compiler does when you use the following code<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">packed_Array{5} = 123;</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">new str[4 char] = !"AMX"; 3 characters + 1 null character</pre>
</div>To rip apart str[0] into 4 byte pieces, we need to make use of bitwise operators.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">(cell&gt;&gt;8*n) &amp; 0xFF)</pre>
</div>n = 0 for the first byte<br />
n = 1 for the second byte<br />
n = 2 for the third byte<br />
n = 3 for the fourth byte<br />
<br />
<font size="6"><font color="RoyalBlue">Snippets</font></font><br />
<br />
<font size="4"><b>I-ZCMD Variants</b></font><br />
I-ZCMD has two special beta versions which heavily rely on AMX assembly to function properly.<br />
<br />
<a href="https://github.com/YashasSamaga/I-ZCMD/blob/master/beta-izcmd03.inc" target="_blank"><b><u>I-ZCMD Beta 03 version</u></b></a><br />
The principle is pretty simple. This version of IZCMD searches the public function list and finds every command function's address and its name and builds a sorted list of commands. When a command is called, it performs a binary search on the sorted list and finds the address of the command function if it exists which is then used to call the command function.<br />
<br />
<a href="https://github.com/YashasSamaga/I-ZCMD/blob/master/single-use-version(izcmd beta).inc" target="_blank"><b><u>I-ZCMD Single Use Version</u></b></a><br />
This makes a cache of commands with their function's addresses and stores them as properties. When a player uses a command it searches through the property list to find the correct address for the command function and executes it.<br />
<br />
<b><font size="4">y_amx</font></b><br />
<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
			<br />
				This library simply provides simple access to the various AMX file elements. Information on segment offsets (absolute and relative to "DAT"), various methods to list all public and native functions (and some other rarely used elements), and read and write arbitrary addresses within the AMX address space. See above for more details.<br />
			<br />
		</td>
</tr>
</table>
</div>Every #emit beginneer needs to explore y_amx.<br />
<br />
You can find y_amx.inc at <b><a href="https://github.com/Misiur/YSI-Includes/blob/YSI.tl/YSI_Storage/y_amx.inc" target="_blank">YSI Includes Respository at GitHub</a></b>.<br />
<br />
<font size="4"><b>Sort multi-dimensional arrays</b></font><br />
This include was written by Slice which uses a quite unique out-of-box algorithm to sort multi dimensional arrays. <br />
<br />
The algorithim doesn't really modify the contents of the array while sorting rather it changes the addresses of the major array.<br />
<br />
You can find the MD-Sort Include <b><a href="showthreadb511-2.html?tid=343172" target="_blank">here</a></b>.<br />
<br />
<font size="4"><font size="4"><b>Variadic Functions</b></font></font><br />
This include was written by Emmet which makes use of lot of #emit directives to allow a new way of handling functions that accept variable arguments.<br />
<br />
You can find the Variadic Functions include <b><a href="showthread419a-2.html?tid=479657" target="_blank">here</a></b><br />
<br />
<font size="6"><font color="RoyalBlue">Compiler Bugs</font></font><br />
There are lot of compiler bugs which you need to be aware of while using #emit.<br />
<br />
You can find the list of known bugs in this thread, <b><a href="showthread31a5.html?pid=3518345#pid3518345" target="_blank">"Known Runtime/Compiler PAWN Bugs "<br />
</a></b><br />
<br />
<font size="6"><font color="RoyalBlue">Additional Information</font></font><br />
<br />
<b>#emit Tutorial by ******</b><br />
<b><a href="showthread6922-2.html?tid=570930" target="_blank">here</a></b>.<br />
<br />
<b>#emit Discussion Thread</b><br />
There is a topic at the Disscusion Board which you can post your questions/queries regarding emit usage.<br />
<br />
You can find the topic <b><a href="showthreadefc9.html?tid=578587" target="_blank">here</a></b>.<br />
<br />
<b>PAWN Documentation</b><br />
The official documentation can be found here.<br />
<b><a href="http://www.compuphase.com/pawn/Pawn_Implementer_Guide.pdf" target="_blank">http://www.compuphase.com/pawn/Pawn_...nter_Guide.pdf</a></b><br />
<br />
Note that the above documentation is for the latest version of PAWN. SA-MP isn't using the latest version of PAWN and hence there might be some discrepancies in the documentation and the version which the SAMP is using.<br />
<br />
If you are using YSI, then there should be copies of the 2007 PAWN documentation in the pawno folder.<br />
<br />
<b><a href="https://github.com/Zeex/pawn/raw/master/doc/pawn-imp.pdf" target="_blank"><br />
PAWN Implementer Guide Link #1</a></b><br />
<br />
<a href="https://github.com/Y-Less/YSI/raw/master/pawno/Pawn_Implementer_Guide.pdf" target="_blank"><b>PAWN Implementer Guide Link #2</b></a><br />
<br />
A copy of the 2007 PAWN Implementer Guide Document to the thread.<br />
<br />
<b>PAWN Generate Assembly File Option</b><br />
You can tell the PAWN Compiler to give you the assembly generated for you PAWN Code by using the "-a" flag.<br />
If you don't know how to feed the flags to the compiler then follow these steps:<ol style="list-style-type: decimal"><li>Create a new file in the pawno directory called "pawn.cfg"</li>
<li>Add a line with "-a"</li>
<li>Save!</li>
</ol>
Now the PAWN Compiler will create an .asm file instead of an AMX.<br />
<br />
<font size="6"><font color="RoyalBlue">Credits</font></font><br />
Thanks to everyone who have displayed their scripts to the public which use AMX Assembly from which I learnt most of the assembly. Especially ******'s includes from which I learnt a lot.<br />
<br />
Special Thanks to ****** for his #emit tutorial.
	</div>
	
	
	<div class="post_meta" id="post_meta_3596399">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchd637.html?action=finduser&amp;uid=169426" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply3df7.html?tid=591705&amp;replyto=3596399" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3596402"></a>
<div class="post classic " style="" id="post_3596402">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1c6d.html?action=profile&amp;uid=169426"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1c6d.html?action=profile&amp;uid=169426">Yashas</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 882<br />
	Threads: 50<br />
	Joined: Jun 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation997a.html?uid=169426"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread63ff.html?tid=591705&amp;pid=3596402#pid3596402" title="Re: AMX Assembly (#emit)">#2</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 2 by Yashas" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">15.10.2015, 17:35 <span class="post_edit" id="edited_by_3596402"><!-- start: postbit_editedby -->
<div class="edited_post postbit_edited postbit_editedby postbit_editedpost">(<!-- start: postbit_editedby_editreason -->
 <em>Последний раз редактировалось Yashas; 01.10.2017 в 07:35.</em>
<!-- end: postbit_editedby_editreason -->)</div>
<!-- end: postbit_editedby --></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3596402">
		<font size="6"><font color="RoyalBlue">Jump Instructions</font></font><br />
There are assembly instructions which allow you to jump.<br />
<br />
<font color="DarkGreen"><font size="5">Instruction List &amp; Usage</font></font><br />
Here is a list of all of them:<br />
<table><tr><td class="alt2"><b><u>#</u></b></td><td class="alt2"><b><u>mnemonic</u></b></td><td class="alt2"><b><u>operand</u></b></td><td class="alt2"><b><u>semantics</u></b></td></tr><tr><td class="alt2">51</td><td class="alt2">JUMP</td><td class="alt2">oﬀset</td><td class="alt2">CIP = CIP + oﬀset (jump to the address relative from the current position)</td></tr><tr><td class="alt2">53</td><td class="alt2">JZER</td><td class="alt2">offset</td><td class="alt2">if PRI == 0 then CIP = CIP + oﬀset</td></tr><tr><td class="alt2">54</td><td class="alt2">JNZ</td><td class="alt2">offset</td><td class="alt2">if PRI != 0 then CIP = CIP + oﬀset</td></tr><tr><td class="alt2">55</td><td class="alt2">JEQ</td><td class="alt2">offset</td><td class="alt2">if PRI == ALT then CIP = CIP + oﬀset</td></tr><tr><td class="alt2">56</td><td class="alt2">JNEQ</td><td class="alt2">offset</td><td class="alt2">if PRI != ALT then CIP = CIP + oﬀset</td></tr><tr><td class="alt2">57</td><td class="alt2">JLESS</td><td class="alt2">offset</td><td class="alt2">if PRI &lt; ALT then CIP = CIP + oﬀset (unsigned) </td></tr><tr><td class="alt2">58</td><td class="alt2">JLEQ</td><td class="alt2">offset</td><td class="alt2">if PRI &lt;= ALT then CIP = CIP + oﬀset (unsigned)</td></tr><tr><td class="alt2">59</td><td class="alt2">JGRTR</td><td class="alt2">offset</td><td class="alt2">if PRI &gt; ALT then CIP = CIP + oﬀset (unsigned)</td></tr><tr><td class="alt2">60</td><td class="alt2">JGEQ</td><td class="alt2">offset</td><td class="alt2">if PRI &gt;= ALT then CIP = CIP + oﬀset (unsigned)</td></tr><tr><td class="alt2">61</td><td class="alt2">JSLESS</td><td class="alt2">offset</td><td class="alt2">if PRI &lt; ALT then CIP = CIP + oﬀset (signed)</td></tr><tr><td class="alt2">62</td><td class="alt2">JSLEQ</td><td class="alt2">offset</td><td class="alt2">if PRI &lt;= ALT then CIP = CIP + oﬀset (signed)</td></tr><tr><td class="alt2">63</td><td class="alt2">JSGRTR</td><td class="alt2">offset</td><td class="alt2">if PRI &gt; ALT then CIP = CIP + oﬀset (signed)</td></tr><tr><td class="alt2">64</td><td class="alt2">JSGEQ</td><td class="alt2">offset</td><td class="alt2">if PRI &gt;= ALT then CIP = CIP + oﬀset (signed)</td></tr><tr><td class="alt2">128</td><td class="alt2">JUMP.pri</td><td class="alt2"></td><td class="alt2">CIP = PRI (indirect jump)</td></tr></table>
The PAWN Implementer Guide says we can pass offsets to the jump instructions but unfortunately passing offsets as numbers crashes the compiler. <br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 226px;
		text-align: left;
		overflow: auto">main()
{
     new x,y = 10,z = 50;
     
     #emit LOAD.S.pri y
     #emit LOAD.S.alt z
     #emit JEQ 8

     #emit CONST.pri 100

     #emit STOR.S.pri x
     printf("%d",x);
}</pre>
</div>The above code will crash the compiler.<br />
<br />
The only way you can now pass offsets to the jump instructions is by using labels.<br />
<br />
The following code illustrates how to use labels as offsets for jump instructions<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 370px;
		text-align: left;
		overflow: auto">#include &lt;a_samp&gt;
main()
{
     new y = 10,z = 11;

     print("Checking two numbers for equality");
     goto check;

     not_equal:
     printf("The numbers are not equal");
     return 0;

     equal:
     print("The numbers are equal!");
     return 0;

     check:
     #emit LOAD.S.pri y
     #emit LOAD.S.alt z
     #emit JEQ equal
     #emit JUMP not_equal
}</pre>
</div>Using jump instructions in assembly hardly gives you any advantage. It will only improve performance by negligible amount when compared to using "goto label;".<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">if(k == 0) goto label;</pre>
</div>will produce an assembly output<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 98px;
		text-align: left;
		overflow: auto">#emit LOAD.S.pri k
#emit JZER somewhere

somewhere:
JUMP label</pre>
</div>The extra jump can be avoided by manually jumping using assembly<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">#emit LOAD.S.pri k
#emit JZER label</pre>
</div><font color="DarkGreen"><font size="5">Compiler Bug</font></font><br />
If you try to compile the following code you will get an error stating that symbol "abc" is undefined even though it is defined.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Код:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 130px;
		text-align: left;
		overflow: auto">goto abc; //No error
#emit LOAD.pri a
#emit LOAD.alt b
#emit JSLESS abc //Error, undefined symbol abc

abc:
your code</pre>
</div>The compiler allows you to use goto with lables that are defined later. But unfortunately the compiler does not recognize labels that are defined later when you use #emit.<br />
<br />
<b>Bug #13 in <b><a href="showthread31a5.html?pid=3518345#pid3518345" target="_blank">Known Runtime/Compiler Bugs</a></b> topic.</b>
	</div>
	
	
	<div class="post_meta" id="post_meta_3596402">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchd637.html?action=finduser&amp;uid=169426" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplydb8c-3.html?tid=591705&amp;replyto=3596402" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3596404"></a>
<div class="post classic " style="" id="post_3596404">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1c6d.html?action=profile&amp;uid=169426"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1c6d.html?action=profile&amp;uid=169426">Yashas</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 882<br />
	Threads: 50<br />
	Joined: Jun 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation997a.html?uid=169426"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread9bba-3.html?tid=591705&amp;pid=3596404#pid3596404" title="Re: AMX Assembly (#emit)">#3</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 3 by Yashas" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">15.10.2015, 17:37 <span class="post_edit" id="edited_by_3596404"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3596404">
		<font color="DarkGreen"><b><font size="6">Reserved</font></b></font>
	</div>
	
	
	<div class="post_meta" id="post_meta_3596404">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchd637.html?action=finduser&amp;uid=169426" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply14c3-3.html?tid=591705&amp;replyto=3596404" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3596427"></a>
<div class="post classic " style="" id="post_3596427">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member7860.html?action=profile&amp;uid=216222"><img src="uploads/avatars/216222.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member7860.html?action=profile&amp;uid=216222">Ahmad45123</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 826<br />
	Threads: 64<br />
	Joined: Oct 2013
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation264c.html?uid=216222"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread5055-3.html?tid=591705&amp;pid=3596427#pid3596427" title="Re: AMX Assembly (#emit)">#4</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 4 by Ahmad45123" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">15.10.2015, 18:10 <span class="post_edit" id="edited_by_3596427"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3596427">
		Wow, finally a proper tutorial, thanks allot matte.<br />
+REP you have great effort here.<br />
<br />
E: oops, cant rep cuz i am on mobile.. Will do it once i am on pc.
	</div>
	
	
	<div class="post_meta" id="post_meta_3596427">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchf378.html?action=finduser&amp;uid=216222" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply7fbc-2.html?tid=591705&amp;replyto=3596427" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3596506"></a>
<div class="post classic " style="" id="post_3596506">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="memberf3c8.html?action=profile&amp;uid=248531"><img src="uploads/avatars/248531.png" alt="" width="45" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="memberf3c8.html?action=profile&amp;uid=248531">SecretBoss</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 807<br />
	Threads: 62<br />
	Joined: Dec 2014
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputationb83c.html?uid=248531"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread8ac9.html?tid=591705&amp;pid=3596506#pid3596506" title="Re: AMX Assembly (#emit)">#5</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 5 by SecretBoss" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">15.10.2015, 20:31 <span class="post_edit" id="edited_by_3596506"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3596506">
		Amazing job, but it will take ages to read also it took more to write it, thanks its very useful!
	</div>
	
	
	<div class="post_meta" id="post_meta_3596506">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search14cf.html?action=finduser&amp;uid=248531" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply12f3.html?tid=591705&amp;replyto=3596506" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3597182"></a>
<div class="post classic " style="" id="post_3597182">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member6ae1.html?action=profile&amp;uid=155081"><img src="uploads/avatars/155081.png" alt="" width="42" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member6ae1.html?action=profile&amp;uid=155081">Beckett</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				High-roller<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 1,794<br />
	Threads: 104<br />
	Joined: Feb 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputatione494.html?uid=155081"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread0ba9-5.html?tid=591705&amp;pid=3597182#pid3597182" title="Re: AMX Assembly (#emit)">#6</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 6 by Beckett" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">17.10.2015, 08:49 <span class="post_edit" id="edited_by_3597182"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3597182">
		Magnificent. Didn't really have time to read it all but there's plenty of useful information out there, well done.
	</div>
	
	
	<div class="post_meta" id="post_meta_3597182">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search5fa9.html?action=finduser&amp;uid=155081" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplyb335.html?tid=591705&amp;replyto=3597182" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3641209"></a>
<div class="post classic " style="" id="post_3641209">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member080e.html?action=profile&amp;uid=155364"><img src="uploads/avatars/155364.png" alt="" width="55" height="28" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member080e.html?action=profile&amp;uid=155364">Stanford</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 983<br />
	Threads: 98<br />
	Joined: Feb 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputationcf5d.html?uid=155364"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadb9be-2.html?tid=591705&amp;pid=3641209#pid3641209" title="Re: AMX Assembly (#emit)">#7</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 7 by Stanford" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">13.01.2016, 23:19 <span class="post_edit" id="edited_by_3641209"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3641209">
		Amazingly written thanks for this huge efforts I hope that I will know how to use #emit properly one day.. Who knows maybe this tutorial will save me <img alt="" border="0" class="inlineimg" src="images/smilies/smile.png" title="Smiley"/>
	</div>
	
	
	<div class="post_meta" id="post_meta_3641209">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search2e30.html?action=finduser&amp;uid=155364" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply4f40.html?tid=591705&amp;replyto=3641209" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3701105"></a>
<div class="post classic " style="" id="post_3701105">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member7070.html?action=profile&amp;uid=272632"><img src="uploads/avatars/272632.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member7070.html?action=profile&amp;uid=272632">darkdevil</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Little Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 43<br />
	Threads: 4<br />
	Joined: Jan 2016
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation31ad.html?uid=272632"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread0b2b-3.html?tid=591705&amp;pid=3701105#pid3701105" title="Re: AMX Assembly (#emit)">#8</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 8 by darkdevil" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">17.05.2016, 14:37 <span class="post_edit" id="edited_by_3701105"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3701105">
		Big essay btw nice tutorial
	</div>
	
	
	<div class="post_meta" id="post_meta_3701105">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchdb9d.html?action=finduser&amp;uid=272632" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplyd0cc.html?tid=591705&amp;replyto=3701105" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3722845"></a>
<div class="post classic " style="" id="post_3722845">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member37b3.html?action=profile&amp;uid=238036"><img src="uploads/avatars/238036.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member37b3.html?action=profile&amp;uid=238036">Dutheil</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 507<br />
	Threads: 29<br />
	Joined: Jul 2014
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation3fb0.html?uid=238036"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadbc9d-2.html?tid=591705&amp;pid=3722845#pid3722845" title="Re: AMX Assembly (#emit)">#9</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 9 by Dutheil" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">24.06.2016, 20:59 <span class="post_edit" id="edited_by_3722845"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3722845">
		<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
			<br />
				; 16:Argument 2<br />
; 12:Argument 1<br />
; 8:Number of arguments in terms of the size (4 * n)<br />
; 4:Return Address<br />
<b><font color="Red">; 0:Frame</font></b><br />
</td>
</tr>
</table>
</div>It is not exact. *(data + frm) stores the previous frame pointer and not the frame pointer.<br />
Except if there is a difference between "frame" and "frame pointer".
	</div>
	
	
	<div class="post_meta" id="post_meta_3722845">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search84b9.html?action=finduser&amp;uid=238036" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplyd545.html?tid=591705&amp;replyto=3722845" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3722857"></a>
<div class="post classic " style="" id="post_3722857">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="memberc71b.html?action=profile&amp;uid=9765"><img src="uploads/avatars/9765.png" alt="" width="55" height="49" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="memberc71b.html?action=profile&amp;uid=9765">Nero_3D</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				High-roller<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 2,856<br />
	Threads: 6<br />
	Joined: Jun 2007
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation12eb.html?uid=9765"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread088c.html?tid=591705&amp;pid=3722857#pid3722857" title="Re: AMX Assembly (#emit)">#10</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 10 by Nero_3D" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">24.06.2016, 21:32 <span class="post_edit" id="edited_by_3722857"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3722857">
		<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Dutheil</strong><br />
<a href="showthreadbc9d-2.html?pid=3722845#pid3722845" rel="nofollow"><img alt="Посмотреть сообщение" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">It is not exact. *(data + frm) stores the previous frame pointer and not the frame pointer.<br />
Except if there is a difference between "frame" and "frame pointer".</div>
</td>
</tr>
</table>
</div>You can't store pointers, you store addresses (absolute or relative)<br />
<br />
And in that case the 0 is a relative address, relative to the current frame which is (DAT + FRM), so its the same<br />
And nearly all addresses are relative to DAT
	</div>
	
	
	<div class="post_meta" id="post_meta_3722857">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchf973.html?action=finduser&amp;uid=9765" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplya115.html?tid=591705&amp;replyto=3722857" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3723047"></a>
<div class="post classic " style="" id="post_3723047">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1c6d.html?action=profile&amp;uid=169426"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1c6d.html?action=profile&amp;uid=169426">Yashas</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 882<br />
	Threads: 50<br />
	Joined: Jun 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation997a.html?uid=169426"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadf14c-3.html?tid=591705&amp;pid=3723047#pid3723047" title="Re: AMX Assembly (#emit)">#11</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 11 by Yashas" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">25.06.2016, 06:59 <span class="post_edit" id="edited_by_3723047"><!-- start: postbit_editedby -->
<div class="edited_post postbit_edited postbit_editedby postbit_editedpost">(<!-- start: postbit_editedby_editreason -->
 <em>Last edited by Yashas; 25/06/2016 at 04:58 PM.</em>
<!-- end: postbit_editedby_editreason -->)</div>
<!-- end: postbit_editedby --></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3723047">
		<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Dutheil</strong><br />
<a href="showthreadbc9d-2.html?pid=3722845#pid3722845" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">It is not exact. *(data + frm) stores the previous frame pointer and not the frame pointer.<br />
Except if there is a difference between "frame" and "frame pointer".</div>
</td>
</tr>
</table>
</div>Yes, the way I have written is quite ambiguous and the context is so wrong too. I was talking about the stack printed from the func() and I should have cleary mentioned that it is the FRM of the main. My intention was to convey that 0 is the FRM pointer's start. I mean, everything above and below is with respect to the frame but yeah, I agree with you that is misleading.<br />
<br />
Thanks for letting me know.<br />
<br />
Corrected it &amp; added new information about FRAMEs. <br />
<br />
<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Nero_3D</strong><br />
<a href="showthread088c.html?pid=3722857#pid3722857" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">You can't store pointers, you store addresses (absolute or relative)<br />
<br />
And in that case the 0 is a relative address, relative to the current frame which is (DAT + FRM), so its the same<br />
And nearly all addresses are relative to DAT</div>
</td>
</tr>
</table>
</div>You are right but he was talking about something else. I said "frame" without mentioning of which function it was (caller or called function).<br />
<br />
I was looking for suggestions to improve the tutorial. Let me know if you have any. I hope to make it unambiguous and complete by the end of this year. The ambiguity can be found only by a reader who is new to emit because most of us tend to implicitly assume the correct meanings of the ambiguous terms.<br />
<br />
If you think there is any part which isn't covered in this tutorial, let me know that as well!<br />
<br />
<b>Changes to the tutorial:</b><br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">The frame pointer ("FRM") points to the address at the bottom of the running function's header (can be treated as the address to the start of the stack for the running function). The stack pointer("STK") points to the last data put on to the stack.</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">The frame pointer ("FRM") points to the address at the bottom of the running function's header (can be treated as the address to the start of the stack for the running function). If that scared you, here is a much nicer way to say the same. The FRM pointer basically stores an address which points to the start of the stack. When you use an offset of a local variable (or that of an item on stack) , you add that offset to the FRM to get the address which is then added to DAT to get the absolute address. If you did not understand, no need to worry because you will get another chance at "Making function calls" section. The stack pointer("STK") points to the last data put on to the stack.</pre>
</div>--------------------------------------------------------------------------------------------------<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 498px;
		text-align: left;
		overflow: auto">new x;
func(a,b)
{
	new z = 101;
	new y = 102;
	
	#emit POP.pri
	#emit STOR.pri x
		
	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);

        #emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

    printf("%d",x);

	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);

	#emit POP.pri
	#emit STOR.pri x

	//Nothing more to POP

	for(;;) { } //If I allow the function to return, it will crash the server (run-time error) because the POP instructions change the STK Register and the return instruction expects STK to be having the correct address so that the next POP instruction would pop the return address. Did not get it? More about this later.

    return x; //If this were to be executed, you would get a "Invalid memory access" run-time error.
}
main()
{
   new zyx = 1;
   func(1001,1002);
   new abc = 2;
}</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">102 ; y
101 ; x
16468 ; Function Frame
596 ; Return Address
8 ; Since we pushed 2 arguments, we had pushed 8
1001 ; argument 1
1002 ; argument 2
1 ; xyz, Local Variable from the previous function</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 498px;
		text-align: left;
		overflow: auto">new x;
func(a,b)
{
	new z = 101;
	new y = 102;
	
	#emit POP.pri
	#emit STOR.pri x
		
	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);

        #emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);
		
	#emit POP.pri
	#emit STOR.pri x

        printf("%d",x);

	#emit POP.pri
	#emit STOR.pri x

	printf("%d",x);

	#emit POP.pri
	#emit STOR.pri x

	//Nothing more to POP but lets investigate what is in the FRM register
        #emit LCTRL 5
	#emit STOR.S.pri z

	printf("FRM in func: %d", z);

	for(;;) { } //If I allow the function to return, it will crash the server (run-time error) because the POP instructions change the STK Register and the return instruction expects STK to be having the correct address so that the next POP instruction would pop the return address. Did not get it? More about this later.

    return x; //If this were to be executed, you would get a "Invalid memory access" run-time error.
}
main()
{
    new zyx ;
    #emit LCTRL 5
    #emit STOR.S.pri zyx

    printf("FRM in main: %d", zyx);

    zyx = 1;
    func(1001,1002);
    new abc = 2;
}</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 178px;
		text-align: left;
		overflow: auto">FRM in main: 17988
102 ; y
101 ; x
17988 ; Frame of "main"
1900 ; Return address
8 ; we pushed 2 arguments, number of bytes they take is 8
1001 ; argument 1
1002 ; argument 2
1 ; zyx local variable from the main()
FRM in func: 17960</pre>
</div>--------------------------------------------------------------------------------------------------<br />
<u>Added</u><br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 98px;
		text-align: left;
		overflow: auto">Before getting into the details, let us first discuss what that "frame" thing really means. As said in an earlier section, every item in the stack has a relative address with respect to frame pointer (the negative relative addresses we talked about). To obtain the complete address we add the relative address/offset to the frame pointer.

Just a note, I said 'complete address' actually it isn't, you need to add DAT to that address to obtain the actual address. Never mind if you don't understand it. The assembly OpCodes accept addresses relative to DAT everywhere so it shouldn't bother you. You will learn eventually as time passes.

Also note that abc is not yet on the stack when func is called nor is x there since x is a global variable and resides in the heap.</pre>
</div>--------------------------------------------------------------------------------------------------
	</div>
	
	
	<div class="post_meta" id="post_meta_3723047">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchd637.html?action=finduser&amp;uid=169426" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply460d.html?tid=591705&amp;replyto=3723047" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3735019"></a>
<div class="post classic " style="" id="post_3735019">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member1c6d.html?action=profile&amp;uid=169426"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member1c6d.html?action=profile&amp;uid=169426">Yashas</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 882<br />
	Threads: 50<br />
	Joined: Jun 2012
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation997a.html?uid=169426"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreada072.html?tid=591705&amp;pid=3735019#pid3735019" title="Re: AMX Assembly (#emit)">#12</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 12 by Yashas" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">15.07.2016, 15:00 <span class="post_edit" id="edited_by_3735019"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3735019">
		Updated all sections with new content. <br />
More detailed explainations for parts which people found hard to understand (Reported via PM).<br />
Fixed all ambigious explainations which were reported via PMs.<br />
<br />
If you have suggestions/improvements, please let me know via PM. Also let me know if you find any part of the tutorial hard to understand so that it can be improved.
	</div>
	
	
	<div class="post_meta" id="post_meta_3735019">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchd637.html?action=finduser&amp;uid=169426" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplycf06.html?tid=591705&amp;replyto=3735019" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3748073"></a>
<div class="post classic " style="" id="post_3748073">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member9bfe.html?action=profile&amp;uid=248291"><img src="uploads/avatars/248291.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member9bfe.html?action=profile&amp;uid=248291"><s>Luicy.</s></a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Banned<br />
				<span class="postbit_userstars"></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 775<br />
	Threads: 78<br />
	Joined: Dec 2014
	<br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadac59-2.html?tid=591705&amp;pid=3748073#pid3748073" title="Re: AMX Assembly (#emit)">#13</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 13 by Luicy." style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">05.08.2016, 19:07 <span class="post_edit" id="edited_by_3748073"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3748073">
		This is wonderful, if I sometime get interested in AMX Assemblies, I will read this for sure.<br />
Enjoy your reputation and keep it up.
	</div>
	
	
	<div class="post_meta" id="post_meta_3748073">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search1be8.html?action=finduser&amp;uid=248291" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply2196-2.html?tid=591705&amp;replyto=3748073" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3758484"></a>
<div class="post classic " style="" id="post_3758484">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member3d71.html?action=profile&amp;uid=261265"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member3d71.html?action=profile&amp;uid=261265">Sanya4</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Little Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 36<br />
	Threads: 15<br />
	Joined: Jun 2015
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputatione8dd.html?uid=261265"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread0c84-3.html?tid=591705&amp;pid=3758484#pid3758484" title="Re: AMX Assembly (#emit)">#14</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 14 by Sanya4" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">26.08.2016, 21:16 <span class="post_edit" id="edited_by_3758484"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3758484">
		WTF?! Just wanted to ask: Y_Less did it on purpose?!!111<br />
<br />
<b>IN  "Usage of stack as temporary storage":</b><br />
we see:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 226px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB">     </span><span style="color: #FF8000">#emit POP.pri  //Pop the last pushed value into PRI 
<br/>     //last pushed was local, which had a value of 10 when pushed and hence PRI = 10

<br/>//by me: PRI is 10, ALT is 5

<br/>     #emit CONST.alt 5  //ALT = 5
<br/>     #emit SDIV //PRI = ALT / PRI (signed divide),ALT = ALT mod PRI

<br/>//by me: let's count, 5/10=0
<br/>// 5 mod 10= 5

<br/>    //Now ALT = 0 since 5 divides 10 completely and leaves no remainder
<br/>    //PRI = 2 since 10 divided by 5 gives 2 &lt;=== WTF?! 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>Did anyone get it? xD (Usually, in asm's it collects to PRI(As PRI is A, ALT is B, where a is accumulator register, b is base register))<br />
<br />
<b>IN "Finding the address of functions"</b><br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #007700">new </span><span style="color: #0000BB">addr</span><span style="color: #007700">;
<br/></span><span style="color: #FF8000">#emit CONST.pri func1
<br/>#emit STOR.S.pri addr 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>Doesn't work with public function, should it be or what?!(Compared with funcidx)<br />
<br />
<b>IN "Accessing elements of arrays that are arguments"</b><br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 114px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #007700">public </span><span style="color: #0000BB">OnPlayerCommandText</span><span style="color: #007700">(</span><span style="color: #0000BB">playerid</span><span style="color: #007700">,</span><span style="color: #0000BB">cmdtext</span><span style="color: #007700">[])
<br/>{
<br/>     new </span><span style="color: #0000BB">index </span><span style="color: #007700">= </span><span style="color: #0000BB">2</span><span style="color: #007700">;

<br/>     </span><span style="color: #FF8000">#emit LOAD.S.alt cmdtext 
<br/>     #emit LOAD.pri index  //&lt;==================== GOOD joke! 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>#emit LOAD.pri index FACEPALM x999<br />
<br />
<br />
Also it's ok:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #FF8000">#emit LOAD.S.alt cmdtext 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>You are loading a value, NOT address!<br />
I think, it should be:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #FF8000">#emit CONST.pri cmdtext 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>And btw, write right sematics for IDXADDR:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB">PRI </span><span style="color: #007700">= </span><span style="color: #0000BB">ALT </span><span style="color: #007700">+ (</span><span style="color: #0000BB">PRI Ч cell size</span><span style="color: #007700">) (</span><span style="color: #0000BB">calculate indexed address</span><span style="color: #007700">) 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div> Everyone can get it.<br />
Change it to understandable(not everyone can understand it):<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"> PRI </span><span style="color: #007700">= </span><span style="color: #0000BB">ALT </span><span style="color: #007700">+ </span><span style="color: #0000BB">CELLSIZE </span><span style="color: #007700">* </span><span style="color: #0000BB">PRI 
<br/></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>And where is wrong(who didn't get it):<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 242px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #007700">public </span><span style="color: #0000BB">OnPlayerCommandText</span><span style="color: #007700">(</span><span style="color: #0000BB">playerid</span><span style="color: #007700">,</span><span style="color: #0000BB">cmdtext</span><span style="color: #007700">[])
<br/>{
<br/>     new </span><span style="color: #0000BB">index </span><span style="color: #007700">= </span><span style="color: #0000BB">2</span><span style="color: #007700">;

<br/>     </span><span style="color: #FF8000">#emit CONST.alt cmdtext 
<br/>     #emit LOAD.S.pri index 
<br/>     #emit IDXADDR //PRI = ALT + (PRI * cell size) (calculate indexed address)

<br/>    //Now PRI contains the address of the element stored in index 2 of cmdtext (cmdtext[2])

<br/>     #emit LOAD.I //PRI = [PRI] //Since PRI contains the address of cmdtext[2], [PRI] will give the value stored at index 2
<br/>     //Instead of using IDXADDR and then LOAD.I, you can do the same with just one instruction using LIDX
<br/>     //LIDX = PRI = [ALT + (PRI x cell size)]
<br/></span><span style="color: #007700">} 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>I read until it, Gonna post more &lt;s&gt;bugs&lt;/s&gt; easter eggs(maybe).<br />
I see no the first time when Y_Less using trololo functions.<br />
<br />
edit 1:<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 194px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB">main</span><span style="color: #007700">()
<br/>{
<br/>     new </span><span style="color: #0000BB">a</span><span style="color: #007700">[] = </span><span style="color: #DD0000">"AMX Assembly"</span><span style="color: #007700">;
<br/>     new </span><span style="color: #0000BB">character</span><span style="color: #007700">;     
<br/>     </span><span style="color: #FF8000">#emit ADDR.pri a
<br/>     #emit ADD.C 8
<br/>     #emit LOAD.I
<br/>     #emit STOR.S.pri character

<br/>     </span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%c"</span><span style="color: #007700">, </span><span style="color: #0000BB">character</span><span style="color: #007700">);
<br/>} 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>Just gonna wrote here. 8 is 2 symbols as cell is 4. u wouldn't understand maybe cos I wrote it.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #FF8000">#emit ADD.C 4*n //where n is amount of symbols 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>
	</div>
	
	
	<div class="post_meta" id="post_meta_3758484">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search3880.html?action=finduser&amp;uid=261265" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplyb9b6-2.html?tid=591705&amp;replyto=3758484" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3758591"></a>
<div class="post classic " style="" id="post_3758591">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="memberc71b.html?action=profile&amp;uid=9765"><img src="uploads/avatars/9765.png" alt="" width="55" height="49" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="memberc71b.html?action=profile&amp;uid=9765">Nero_3D</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				High-roller<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 2,856<br />
	Threads: 6<br />
	Joined: Jun 2007
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation12eb.html?uid=9765"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreaddcda-2.html?tid=591705&amp;pid=3758591#pid3758591" title="Re: AMX Assembly (#emit)">#15</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 15 by Nero_3D" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">27.08.2016, 03:14 <span class="post_edit" id="edited_by_3758591"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3758591">
		<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Sanya4</strong><br />
<a href="showthread0c84-3.html?pid=3758484#pid3758484" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic"><b>IN  "Usage of stack as temporary storage":</b><br />
we see:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #FF8000">//CODE 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>Did anyone get it? xD (Usually, in asm's it collects to PRI(As PRI is A, ALT is B, where a is accumulator register, b is base register))</div>
</td>
</tr>
</table>
</div>it should be PRI / ALT, ALT / PRI would be SDIV.alt<br />
<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Sanya4</strong><br />
<a href="showthread0c84-3.html?pid=3758484#pid3758484" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic"><b>IN "Finding the address of functions"</b><br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #007700">new </span><span style="color: #0000BB">addr</span><span style="color: #007700">;
<br/></span><span style="color: #FF8000">#emit CONST.pri func1
<br/>#emit STOR.S.pri addr 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>Doesn't work with public function, should it be or what?!(Compared with funcidx)</div>
</td>
</tr>
</table>
</div>As far as I know it works flawless if the function is defined before this code<br />
<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Sanya4</strong><br />
<a href="showthread0c84-3.html?pid=3758484#pid3758484" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">I think, it should be:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #FF8000">#emit CONST.pri cmdtext 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div></div>
</td>
</tr>
</table>
</div>#emit LOAD.S.alt cmdtext is correct, use const.pri to get the relative address (cmdtext would be 16)
	</div>
	
	
	<div class="post_meta" id="post_meta_3758591">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchf973.html?action=finduser&amp;uid=9765" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply2518.html?tid=591705&amp;replyto=3758591" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3758946"></a>
<div class="post classic " style="" id="post_3758946">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member3d71.html?action=profile&amp;uid=261265"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member3d71.html?action=profile&amp;uid=261265">Sanya4</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Little Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 36<br />
	Threads: 15<br />
	Joined: Jun 2015
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputatione8dd.html?uid=261265"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread6d47-2.html?tid=591705&amp;pid=3758946#pid3758946" title="Re: AMX Assembly (#emit)">#16</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 16 by Sanya4" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">27.08.2016, 19:12 <span class="post_edit" id="edited_by_3758946"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3758946">
		btw, can u give me link to all opcodes?(not found as well)<br />
<br />
About getting address of function: I think funcidx returns id only for public(and count only publics)/<br />
<br />
And why we are using LOAD.S.alt(it stores content, not address)? But CONST.pri loads addreess?!?!!?!?<br />
<br />
edit 1:<br />
semantic for sub:<br />
WRONG:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB">PRI </span><span style="color: #007700">= </span><span style="color: #0000BB">ALT </span><span style="color: #007700">- </span><span style="color: #0000BB">PRI 
<br/></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>right:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB">PRI </span><span style="color: #007700">= </span><span style="color: #0000BB">PRI </span><span style="color: #007700">-</span><span style="color: #0000BB">ALT 
<br/></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>semantic for sdiv:<br />
WRONG:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 34px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB">shown in example 
<br/></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>right:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP Code:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 50px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB">PRI </span><span style="color: #007700">= </span><span style="color: #0000BB">PRI</span><span style="color: #007700">/</span><span style="color: #0000BB">ALT </span><span style="color: #007700">(</span><span style="color: #0000BB">quotient</span><span style="color: #007700">)
<br/></span><span style="color: #0000BB">ALT </span><span style="color: #007700">= </span><span style="color: #0000BB">PRI</span><span style="color: #007700">%</span><span style="color: #0000BB">ALT </span><span style="color: #007700">(</span><span style="color: #0000BB">the second register consists remainder</span><span style="color: #007700">) 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>
	</div>
	
	
	<div class="post_meta" id="post_meta_3758946">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search3880.html?action=finduser&amp;uid=261265" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplycb65.html?tid=591705&amp;replyto=3758946" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3759011"></a>
<div class="post classic " style="" id="post_3759011">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="memberc71b.html?action=profile&amp;uid=9765"><img src="uploads/avatars/9765.png" alt="" width="55" height="49" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="memberc71b.html?action=profile&amp;uid=9765">Nero_3D</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				High-roller<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 2,856<br />
	Threads: 6<br />
	Joined: Jun 2007
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation12eb.html?uid=9765"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadb10b-2.html?tid=591705&amp;pid=3759011#pid3759011" title="Re: AMX Assembly (#emit)">#17</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 17 by Nero_3D" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">27.08.2016, 22:15 <span class="post_edit" id="edited_by_3759011"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3759011">
		<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Sanya4</strong><br />
<a href="showthread6d47-2.html?pid=3758946#pid3758946" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">btw, can u give me link to all opcodes?(not found as well)</div>
</td>
</tr>
</table>
</div>Look into the Pawn Implementer's Guide<br />
<br />
<a href="http://y-less.com/uploads/pawn-imp-3.0.3367.pdf" target="_blank">http://y-less.com/uploads/pawn-imp-3.0.3367.pdf</a> (2005 version)<br />
(Or in the rar file from the first post - 2007 version)<br />
<br />
and search for Instruction reference (should be either page 94ff or 99ff)<br />
<br />
<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Sanya4</strong><br />
<a href="showthread6d47-2.html?pid=3758946#pid3758946" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">About getting address of function: I think funcidx returns id only for public(and count only publics)</div>
</td>
</tr>
</table>
</div>funcidx returns the index in the public table, see the implementer's guide<br />
<br />
<div style="margin:20px; margin-top:5px; ">
<div class="smallfont" style="margin-bottom:2px">Quote:</div>
<table border="0" cellpadding="6" cellspacing="0" width="100%">
<tr>
<td class="alt2" style="border: 1px solid #C2C2C2; font-size: 8pt;">
<div>
					Originally Posted by <strong>Sanya4</strong><br />
<a href="showthread6d47-2.html?pid=3758946#pid3758946" rel="nofollow"><img alt="View Post" border="0" class="inlineimg" src="images/buttons/viewpost.gif"/></a><br />
</div>
<div style="font-style:italic">And why we are using LOAD.S.alt(it stores content, not address)? But CONST.pri loads addreess?!?!!?!?</div>
</td>
</tr>
</table>
</div>you needs to use load.s.alt because arrays are always passed by reference (only the address is passed)<br />
const.pri/alt doesn't load anything, it just puts the given value into pri/alt<br />
<br />
Doing load.s.alt cmdtext would load the address where content of cmdtext is saved<br />
however doing const.alt cmdtext would only transfer the relative address into alt<br />
<br />
const.pri/alt 5 // pri/alt = 5<br />
const.pri/alt global_variable // gets address relative to DAT section<br />
const.pri/alt local_variable // gets address relative to FRAME<br />
const.pri/alt function // gets address relative to COD<br />
<br />
also add.c cmdtext is the same as add.c 16
	</div>
	
	
	<div class="post_meta" id="post_meta_3759011">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchf973.html?action=finduser&amp;uid=9765" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply2809.html?tid=591705&amp;replyto=3759011" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3759122"></a>
<div class="post classic " style="" id="post_3759122">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="memberb962.html?action=profile&amp;uid=266698"><img src="uploads/avatars/266698.png" alt="" width="55" height="51" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="memberb962.html?action=profile&amp;uid=266698">JakeXxX</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Big Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 154<br />
	Threads: 12<br />
	Joined: Sep 2015
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputationdd10.html?uid=266698"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreadd15d-5.html?tid=591705&amp;pid=3759122#pid3759122" title="Re: AMX Assembly (#emit)">#18</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 18 by JakeXxX" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">28.08.2016, 07:35 <span class="post_edit" id="edited_by_3759122"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3759122">
		Nice tutorial!
	</div>
	
	
	<div class="post_meta" id="post_meta_3759122">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search19f3.html?action=finduser&amp;uid=266698" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply2039.html?tid=591705&amp;replyto=3759122" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3838050"></a>
<div class="post classic " style="" id="post_3838050">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member4351.html?action=profile&amp;uid=34"><img src="images/default_avatar.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member4351.html?action=profile&amp;uid=34">spookie</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Little Clucker<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 3<br />
	Threads: 0<br />
	Joined: Apr 2005
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputationdf40.html?uid=34"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthreaddf62.html?tid=591705&amp;pid=3838050#pid3838050" title="Re: AMX Assembly (#emit)">#19</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 19 by spookie" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">31.01.2017, 22:14 <span class="post_edit" id="edited_by_3838050"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3838050">
		Apologies for bumping an old thread, but this tutorial is fantastic!.. Fair play to you, Yashas!
	</div>
	
	
	<div class="post_meta" id="post_meta_3838050">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="searchdd62.html?action=finduser&amp;uid=34" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreply8756-2.html?tid=591705&amp;replyto=3838050" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic --><!-- start: postbit_classic -->

<a id="pid3838229"></a>
<div class="post classic " style="" id="post_3838229">
<div class="post_author scaleimages">
	<!-- start: postbit_avatar -->
<div class="postbit_avatar author_avatar"><a href="member90a8.html?action=profile&amp;uid=245435"><img src="uploads/avatars/245435.png" alt="" width="55" height="55" /></a></div>
<!-- end: postbit_avatar -->
	<div class="author_information">
			<strong><span class="largetext"><a href="member90a8.html?action=profile&amp;uid=245435">HydraHumza</a></span></strong> <!-- start: postbit_offline -->
<span class="online_status status_offline" title="Offline"></span>
<!-- end: postbit_offline --><br />
			<span class="smalltext">
				Gangsta<br />
				<span class="postbit_userstars"><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><img src="images/star.png" alt="*" /><br /></span>
				
			</span>
	</div>
	<div class="author_statistics">
		<!-- start: postbit_author_user -->
	Posts: 626<br />
	Threads: 46<br />
	Joined: Oct 2014
	<!-- start: postbit_reputation -->
<br />Reputation: <!-- start: postbit_reputation_formatted_link -->
<a href="reputation8959.html?uid=245435"><strong class="reputation_neutral">0</strong></a>
<!-- end: postbit_reputation_formatted_link -->
<!-- end: postbit_reputation --><br />
<!-- end: postbit_author_user -->
	</div>
</div>
<div class="post_content">
	<div class="post_head">
		<!-- start: postbit_posturl -->
<div class="float_right" style="vertical-align: top">
<strong><a href="showthread0384-2.html?tid=591705&amp;pid=3838229#pid3838229" title="Re: AMX Assembly (#emit)">#20</a></strong>

</div>
<!-- end: postbit_posturl -->
		
		<h1 aria-label="Post: 20 by HydraHumza" style="display:inline;font-size:9px;"><!-- helps navigation for screen readers --></h1>
		<span class="post_date">01.02.2017, 12:03 <span class="post_edit" id="edited_by_3838229"></span></span>
	
	</div>
	<div class="post_body scaleimages" id="pid_3838229">
		A pretty decent tutorial. Really appreciate it.
	</div>
	
	
	<div class="post_meta" id="post_meta_3838229">
		
	</div>
</div>
<div class="post_controls">
	<div class="postbit_buttons author_buttons float_left">
		<!-- start: postbit_find -->
<a href="search7e6c.html?action=finduser&amp;uid=245435" title="Find all posts by this user" class="postbit_find"><span>Find</span></a>
<!-- end: postbit_find -->
	</div>
	<div class="postbit_buttons post_management_buttons float_right">
		<!-- start: postbit_quote -->
<a href="newreplyc1e3.html?tid=591705&amp;replyto=3838229" title="Quote this message in a reply" class="postbit_quote postbit_mirage"><span>Reply</span></a>
<!-- end: postbit_quote -->
	</div>
</div>
</div>
<!-- end: postbit_classic -->
	</div>
</div>
	
			<div class="tfoot row">
				<div class="col-sm-6">
					<strong>&laquo; <a href="showthreadf43e.html?tid=591705&amp;action=nextoldest">Next Oldest</a> | <a href="showthread0727.html?tid=591705&amp;action=nextnewest">Next Newest</a> &raquo;</strong>
				</div>
				<div class="col-sm-6"><!-- start: showthread_search -->
	<div class="float_right">
		<form action="https://sampforum.blast.hk/search.php" method="post">
			<input type="hidden" name="action" value="thread" />
			<input type="hidden" name="tid" value="591705" />
			<input type="text" name="keywords" value="Enter Keywords" onfocus="if(this.value == 'Enter Keywords') { this.value = ''; }" onblur="if(this.value=='') { this.value='Enter Keywords'; }" class="textbox" size="25" />
			<input type="submit" class="button" value="Search Thread" />
		</form>
	</div>
<!-- end: showthread_search --></div>
			</div>
	<div class="float_left">
		<!-- start: multipage -->
<div class="pagination">
<span class="pages">Pages (2):</span>
<!-- start: multipage_page_current -->
 <span class="pagination_current">1</span>
<!-- end: multipage_page_current --><!-- start: multipage_page -->
<a href="showthread1f6a.html?tid=591705&amp;page=2" class="pagination_page">2</a>
<!-- end: multipage_page --><!-- start: multipage_nextpage -->
<a href="showthread1f6a.html?tid=591705&amp;page=2" class="pagination_next">Next &raquo;</a>
<!-- end: multipage_nextpage -->
</div>
<!-- end: multipage -->
	</div>
	<div class="float_right">
		
	</div>
	<br class="clear" />
	
	
	
	<br />
	<div class="float_left">
		<ul class="thread_tools">
			<!-- start: showthread_printthread -->
<li class="printable"><a href="printthread0276.html?tid=591705">View a Printable Version</a></li>
<!-- end: showthread_printthread -->
			
			
			
		</ul>
	</div>

	<div class="float_right" style="text-align: right;">
		
		<!-- start: forumjump_advanced -->
<form action="https://sampforum.blast.hk/forumdisplay.php" method="get">
<span class="smalltext">Forum Jump:</span>
<select name="fid" class="forumjump">
<option value="-4">Private Messages</option>
<option value="-3">User Control Panel</option>
<option value="-5">Who's Online</option>
<option value="-2">Search</option>
<option value="-1">Forum Home</option>
<!-- start: forumjump_bit -->
<option value="3" > SA-MP</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="74" >-- News and Updates</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="13" >-- General</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="16" >-- Client Support</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="20" >-- Bug Reports</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="21" >-- Screenshots and Videos</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="6" > SA-MP Server</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="19" >-- Server Support</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="22" >-- Server Advertisements</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="8" > SA-MP Scripting and Plugins</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="12" >-- Scripting Help</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="70" selected="selected">---- Tutorials</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="84" >---- Discussion</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="89" >---- Help Archive</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="71" >-- Gamemode Scripts</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="17" >-- Filterscripts</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="83" >---- Includes</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="82" >---- Tools and Files </option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="64" >---- Maps</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="18" >-- Plugin Development</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="92" > SA-MP DL Edition</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="90" >-- SA-MP 0.3.DL</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="94" >---- Model Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="7" > Other</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="23" >-- Everything and Nothing</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="9" > Non-English</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="33" >-- Languages</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="31" >---- Nederlands/Dutch</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="76" >------ Scripting Showroom en Discussie</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="87" >------ Off topic</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="29" >---- Español/Spanish</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="59" >------ Lanzamientos/Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="30" >---- Français/French</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="81" >------ Showroom</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="32" >---- Русский/Russian</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="66" >------ Релизы/Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="34" >---- Português/Portuguese</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="56" >------ Lançamentos/Releases</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="40" >---- Română/Romanian</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="77" >------ Salonul Scripturilor</option>
<!-- end: forumjump_bit --><!-- start: forumjump_bit -->
<option value="88" >---- Archive</option>
<!-- end: forumjump_bit -->
</select>
<!-- start: gobutton -->
<input type="submit" class="button" value="Go" />
<!-- end: gobutton -->
</form>
<script type="text/javascript">
$(".forumjump").on('change', function() {
	var option = $(this).val();

	if(option < 0)
	{
		window.location = 'forumdisplay0eb7.html?fid='+option;
	}
	else
	{
		window.location = 'forumdisplay0eb7.html?fid='+option;
	}
});
</script>
<!-- end: forumjump_advanced -->
	</div>
	<br class="clear" />
	<!-- start: showthread_usersbrowsing -->
<br />
<span class="smalltext">Users browsing this thread: 1 Guest(s)</span>
<br />
<!-- end: showthread_usersbrowsing -->
	<!-- start: footer -->
<div style="clear:both"><div style="padding-top: 10px"><!-- start: nav -->
<ol class="breadcrumb container"><!-- start: nav_bit -->
<li><a href="index-2.html">SA-MP Forums Archive</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplayb1dd.html?fid=8">SA-MP Scripting and Plugins</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplay696f.html?fid=12">Scripting Help</a></li>
<!-- end: nav_bit --><!-- start: nav_bit -->
<li><a href="forumdisplaybb37.html?fid=70&amp;page=5">Tutorials</a></li>
<!-- end: nav_bit --><!-- start: nav_sep_active -->

<!-- end: nav_sep_active --></ol>
<!-- end: nav --></div></div>
</main>

<div class="blankspace"></div>

<footer id="footer">
	<div class="container">
    <div class="row">
		
        <!--<div class="col-sm-4 foot">
			<h3>About Our Community</h3>
			<p>Discuss about various topics in our community and have fun while doing so. Welcome to SA-MP Forums Archive</p>
			
		</div>		
		

		<div class="col-sm-4 foot">
			<h3>Quick Links</h3>
			<p>

 				<a href="https://sampforum.blast.hk" class="btn btn-success" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Forum Home"><i class="fa fa-home"></i></a>
				
				<a href="https://sampforum.blast.hk/archive/index.php?thread-591705.html" class="btn btn-danger" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Lite (Archive) Mode"><i class="fa fa-archive"></i></a>
				
				<a href="#" target="_blank"  rel="noopener" class="btn btn-primary" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Become a Fan"><i class="fa fa-facebook-square"></i></a>
				
				<a href="#" target="_blank"  rel="noopener" class="btn btn-info" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" data-original-title="Follow Us"><i class="fa fa-twitter"></i></a>
				
				<a href="https://sampforum.blast.hk/misc.php?action=syndication" class="btn btn-warning" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="RSS Syndication"><i class="fa fa-rss"></i></a>
				<br/>
				<a href="misc.php?action=markread&amp;my_post_key=fb3a3794df1b872082c4f912f4b319a5" class="btn btn-danger" style="color: #fff; margin-top:10px" data-toggle="tooltip" data-placement="bottom" data-original-title="Mark all forums read"><i class="fa fa-book"></i> Mark all forums read</a><br /><br />
				
				
				</p>

		</div>
		
		<div class="col-sm-4 foot">
			
			 <h3>Reach Us</h3>
			 
<p><a href="contact.php" class="btn btn-primary" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Contact Us"><i class="fa fa-envelope"></i> Contact Us</a>&nbsp;
			
			<a href="showteam.php" class="btn btn-danger" style="color: #fff;" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Meet Our Team"><i class="fa fa-users"></i> Forum Team</a></p>
		</div>-->
		
		
		
		<!-- The following piece of code allows MyBB to run scheduled tasks. DO NOT REMOVE --><!-- End task image code -->
		</div>
	
	</div>

	
<div id="copyright">
	<div class="container">
			<div class="pull-right"><!-- start: footer_languageselect -->
<div class="language">
<form method="POST" action="https://sampforum.blast.hk/showthread.php" id="lang_select">
	<input type="hidden" name="tid" value="591705" />

	<input type="hidden" name="my_post_key" value="fb3a3794df1b872082c4f912f4b319a5" />
	<select name="language" onchange="MyBB.changeLanguage();">
		<optgroup label="Quick Language Select">
			<!-- start: footer_languageselect_option -->
<option value="english" selected="selected">&nbsp;&nbsp;&nbsp;English (American)</option>
<!-- end: footer_languageselect_option --><!-- start: footer_languageselect_option -->
<option value="russian">&nbsp;&nbsp;&nbsp;Russian</option>
<!-- end: footer_languageselect_option -->
		</optgroup>
	</select>
	<!-- start: gobutton -->
<input type="submit" class="button" value="Go" />
<!-- end: gobutton -->
</form>
</div>
<!-- end: footer_languageselect --></div>
			<div class="pull-left">
				<!-- MyBB is free software developed and maintained by a volunteer community.
					It would be much appreciated by the MyBB Group if you left the full copyright and "powered by" notice intact,
					to show your support for MyBB.  If you choose to remove or modify the copyright below,
					you may be refused support on the MyBB Community Forums.

					This is free software, support us and we'll support you. -->
				Powered By <a href="http://www.mybb.com/" target="_blank"  rel="noopener" style="color: #fff;" >MyBB</a>. <a href="https://eree.in/" title="EREE" target="_blank" rel="noopener" style="color: #fff;">Crafted by EREE</a> and <a href="https://forum.androidbg.com/" title="AndroidBG" target="_blank" rel="noopener" style="color: #fff;">Android BG</a>. Also powered by <a href="https://www.blast.hk/"><b>blast.hk</b></a><!-- End powered by -->
				
			</div>
	</div>

</div>

</footer>

<!-- Fix for MentionMe popup window position -->
<script type="text/javascript">
	var MentionMe = (function(m) {
	m.customSCEditorContainerOffset = {
		left: 0,
		top: 2,
	};

	return m;
})(MentionMe || {});
</script>
<!-- End Fix for MentionMe popup window position -->
<!-- end: footer -->
	<script type="text/javascript">
		var thread_deleted = "0";
		if(thread_deleted == "1")
		{
			$("#quick_reply_form, .new_reply_button, .thread_tools, .inline_rating").hide();
			$("#moderator_options_selector option.option_mirage").attr("disabled","disabled");
		}
	</script>
</body>
</html>
<!-- end: showthread -->