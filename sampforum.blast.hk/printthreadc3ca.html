<!DOCTYPE html><!-- start: printthread -->
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<title> [Tutorial] 0.3.DL: How to add custom skin, object and use the Redirect() - Printable Version</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="description" content="SA-MP 0.3.DL How to add custom skin, object and use the Redirect() It's necessary use SA-MP 0.3.DLHow to add custom skins in server-side You must open models folder inside in your sa-mp server. After" />
<link rel="canonical" href="showthreadc3ca.html?tid=656282" />
</head>
<body>
<div>

<div><a href="index-2.html"><img src="images/bootbb/logo_forum.gif" alt="SA-MP Forums Archive" title="SA-MP Forums Archive" /></a></div>


<div>
<span class="largetext"> <a href="showthreadc3ca.html?tid=656282">[Tutorial] 0.3.DL: How to add custom skin, object and use the Redirect()</a> - Printable Version</span><br />
<br />
+- SA-MP Forums Archive (<em>https://sampforum.blast.hk</em>)<br />
<!-- start: printthread_nav -->
+-- Forum: SA-MP Scripting and Plugins (<i>https://sampforum.blast.hk/forumdisplay.php?fid=8</i>)<br />
<!-- end: printthread_nav --><!-- start: printthread_nav -->
+--- Forum: Scripting Help (<i>https://sampforum.blast.hk/forumdisplay.php?fid=12</i>)<br />
<!-- end: printthread_nav --><!-- start: printthread_nav -->
+---- Forum: Tutorials (<i>https://sampforum.blast.hk/forumdisplay.php?fid=70</i>)<br />
<!-- end: printthread_nav -->
+---- Thread:  [Tutorial] 0.3.DL: How to add custom skin, object and use the Redirect() (<em>/showthread.php?tid=656282</em>)<br />
<br />
</div>


<div><br /><hr size="1" /><!-- start: printthread_post -->
0.3.DL: How to add custom skin, object and use the Redirect() - <a href="member2b8b.html?action=profile&amp;uid=145509">willttoonn</a> -  11.07.2018
<br />
<br />
<div align="center"><font size="10">SA-MP 0.3.DL</font><br />
<font size="5">How to add custom skin, object and use the Redirect()</font><br />
It's necessary use <a href="showthread85c8.html?tid=644105" target="_blank">SA-MP 0.3.DL</a></div><ul><li><font size="3">How to add custom skins in server-side</font><ul><li> You must open <b>models</b> folder inside in your <u>sa-mp server</u>.<br />
<img alt="" border="0" src="https://i.imgur.com/9MVksOL.png"/><br/></li>
<li> After this, you will add the .dff and .txd skin files over there.<br />
<img alt="" border="0" src="https://i.imgur.com/s49DohB.png"/><br/></li>
<li> After add the skin files inside of the models folder, you must edit the file <b>artconfig.txt</b>. (This file is located in the same folder)<br />
<br />
Use the params <b>AddCharModel(baseid, newid, dffname[], txdname[]);</b> in the artconfig.txt.<ul><li> <b>baseid</b> - This is the skin base, he will copy the anim, voice and basic sounds to apply in your custom skin. Note: You can use only default sa-mp skins (0-311).</li>
<li> <b>newid</b> - This is will be the new skin ID between 20000 and 30000. (e.g. 20012).</li>
<li> <b>dffname[]</b> - Here you will be put the location of skin file .dff, starting in folder models.</li>
<li> <b>txdname[]</b> - Here you will be put the location of skin file .txd, starting in folder models.</li>
</ul>
<u>Example:</u><br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:39px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;">AddCharModel<span style="color: #000000;">(</span><span style="color: #000000;">280</span>, <span style="color: #000000;">25000</span>, <span style="color: #000066;">"police_asiatic.dff"</span>, <span style="color: #000066;">"police_asiatic.txd"</span><span style="color: #000000;">)</span>;</div></div></pre>
</div>
<img alt="" border="0" src="https://i.imgur.com/cNYNDL2.png"/><br/></li>
<li> After edit your artconfig.txt go to server.cfg and put this params to active the artwork.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:39px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;">useartwork <span style="color: #000000;">1</span></div></div></pre>
</div></li>
<li> Start up your samp-server.exe and enjoy.<br/></li>
<li> All custom skins will be downloaded before you enter in server.<br />
<img alt="" border="0" src="https://i.imgur.com/CndksFJ.png"/><br/></li>
<li> The custom skins are downloaded by client-side and will be placed in folder <u>GTA San Andreas User Files\SAMP\cache\server_ip<img alt="" border="0" class="inlineimg" src="images/smilies/razz.gif" title="Tongue"/>ort\</u>. The files has different names that are defined by sa-mp script using some criptografy to make that.</li>
</ul></li>
<li><font size="3">How to add custom objects in server-side</font><ul><li> You must open <b>models</b> folder inside in your <u>sa-mp server</u>.<br />
<img alt="" border="0" src="https://i.imgur.com/9MVksOL.png"/><br/></li>
<li> After this, you will add the .dff and .txd skin files over there.<br />
<img alt="" border="0" src="https://i.imgur.com/6UwsFPp.png"/><br/></li>
<li> After add the skin files inside of the models folder, you must edit the file <b>artconfig.txt</b>. (This file is located in the same folder)<br />
<br />
Use the params <b>AddSimpleModel(virtualworld, baseid, newid, dffname[], txdname[]);</b> in the artconfig.txt.<ul><li> <b>virtualworld</b> - This is the virtual world wherein the object to be visible. If you put value -1 the object will be visible in all virtual worlds.</li>
<li> <b>baseid</b> - This is the native objejct, he will copy the colission and anothers params. Note: If you use some object without colission you new object wont have colission.</li>
<li> <b>newid</b> - This is will be the new skin ID between -1000 and -30000. (e.g. -24121).</li>
<li> <b>dffname[]</b> - Here you will be put the location of custom object file .dff, starting in folder models.</li>
<li> <b>txdname[]</b> - Here you will be put the location of custom object file .txd, starting in folder models.</li>
</ul>
<u>Example:</u><br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:39px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;">AddSimpleModel<span style="color: #000000;">(</span><span style="color: #000000;">-</span><span style="color: #000000;">1</span>, <span style="color: #000000;">18865</span>, <span style="color: #000000;">-</span><span style="color: #000000;">1000</span>, <span style="color: #000066;">"AxomCamPOLICE1.dff"</span>, <span style="color: #000066;">"AxomCamPOLICE1.txd"</span><span style="color: #000000;">)</span>;</div></div></pre>
</div>
<img alt="" border="0" src="https://i.imgur.com/ArUh01v.png"/><br/></li>
<li> After edit your artconfig.txt go to server.cfg and put this params to active the artwork.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:39px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;">useartwork <span style="color: #000000;">1</span></div></div></pre>
</div></li>
<li> Start up your samp-server.exe and enjoy.<br/></li>
<li> All custom objects will be downloaded before you enter in server.<br />
<img alt="" border="0" src="https://i.imgur.com/CndksFJ.png"/><br/></li>
<li> The custom skins are downloaded by client-side and will be placed in folder <u>GTA San Andreas User Files\SAMP\cache\server_ip<img alt="" border="0" class="inlineimg" src="images/smilies/razz.gif" title="Tongue"/>ort\</u>. The files has different names that are defined by sa-mp script using some criptografy to make that.</li>
</ul></li>
<li><font size="3">How to use Redirect()</font><ul><li> All files placed in your Redirect will must be same to files in samp-server folder <b>models/</b>.<br/></li>
<li> Open your gamemode.<br/></li>
<li> Put the native <b>OnPlayerRequestDownload(playerid, type, crc)</b> in your script, I suggest on top of the native <u>OnGameModeInit</u>.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:103px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>            <br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Create a new global variable without size, on top of the OnPlayerRequestDownload with name <b>SERVER_DOWNLOAD</b>.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:119px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>            <br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Put the URL with place of your models in your website. For example, I will use the website <u><a href="http://www.dev-wil.com/downloads/038/models" target="_blank">http://www.dev-wil.com/downloads/038/models</a></u>.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:119px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>            <br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Now, create the parameters of your OnPlayerRequestDownload so that it replaces the download with sa-mp server by the one of your site. Enter a condition to check if the player is connected. Create conditions with the <b>DOWNLOAD_REQUEST_TEXTURE_FILE </b> and <b>DOWNLOAD_REQUEST_MODEL_FILE</b> types to define the function that will fetch the .txd or the .dff file, respectively. <br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:215px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span>IsPlayerConnected<span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span><span style="color: #000000;">)</span><br/>                    <span style="color: #2222BB;">return</span> <span style="color: #000000;">0</span>;<br/>                <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_TEXTURE_FILE<span style="color: #000000;">)</span><br/>                    <span style="color: #000000;">{</span><span style="color: #000000;">}</span><br/>                <span style="color: #2222BB;">else</span> <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_MODEL_FILE<span style="color: #000000;">)</span><br/>                    <span style="color: #000000;">{</span><span style="color: #000000;">}</span><br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Add the functions <b>FindTextureFileNameFromCRC(crc, retstr[], retstr_size)</b> and <b>FindModelFileNameFromCRC(crc, retstr[], retstr_size)</b> to the sa-mp server write the txd and dff files names to be a find inside of the website.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:215px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span>IsPlayerConnected<span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span><span style="color: #000000;">)</span><br/>                    <span style="color: #2222BB;">return</span> <span style="color: #000000;">0</span>;<br/>                <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_TEXTURE_FILE<span style="color: #000000;">)</span><br/>                    FindTextureFileNameFromCRC<span style="color: #000000;">(</span>crc, retstr<span style="color: #000000;">[</span><span style="color: #000000;">]</span>, retstr_size<span style="color: #000000;">)</span>;<br/>                <span style="color: #2222BB;">else</span> <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_MODEL_FILE<span style="color: #000000;">)</span><br/>                    FindModelFileNameFromCRC<span style="color: #000000;">(</span>crc, retstr<span style="color: #000000;">[</span><span style="color: #000000;">]</span>, retstr_size<span style="color: #000000;">)</span>;<br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Create a local variable to be replace a <b>retstr</b> and alter the <b>retstr_size</b> to <b>sizeof(new_local_var)</b><br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:263px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span>IsPlayerConnected<span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span><span style="color: #000000;">)</span><br/>                    <span style="color: #2222BB;">return</span> <span style="color: #000000;">0</span>;<br/>                    <br/>                <span style="color: #2222BB;">new</span> filename<span style="color: #000000;">[</span><span style="color: #000000;">64</span><span style="color: #000000;">]</span>;<br/>                <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_TEXTURE_FILE<span style="color: #000000;">)</span><br/>                    FindTextureFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                <span style="color: #2222BB;">else</span> <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_MODEL_FILE<span style="color: #000000;">)</span><br/>                    FindModelFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                    <br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> The functions <b>FindTextureFileNameFromCRC</b> e <b>FindModelFileNameFromCRC</b> will be return 1 if find the file or 0 if case is not. Add local variable to be a storage this value and go to next step.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:263px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span>IsPlayerConnected<span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span><span style="color: #000000;">)</span><br/>                    <span style="color: #2222BB;">return</span> <span style="color: #000000;">0</span>;<br/>                    <br/>                <span style="color: #2222BB;">new</span> filename<span style="color: #000000;">[</span><span style="color: #000000;">64</span><span style="color: #000000;">]</span>, filefound;<br/>                <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_TEXTURE_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindTextureFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                <span style="color: #2222BB;">else</span> <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_MODEL_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindModelFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                    <br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Now make a condiction if the local variable is 1.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:311px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span>IsPlayerConnected<span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span><span style="color: #000000;">)</span><br/>                    <span style="color: #2222BB;">return</span> <span style="color: #000000;">0</span>;<br/>                    <br/>                <span style="color: #2222BB;">new</span> filename<span style="color: #000000;">[</span><span style="color: #000000;">64</span><span style="color: #000000;">]</span>, filefound;<br/>                <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_TEXTURE_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindTextureFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                <span style="color: #2222BB;">else</span> <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_MODEL_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindModelFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                    <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>filefound<span style="color: #000000;">)</span><br/>                    <span style="color: #000000;">{</span><span style="color: #000000;">}</span><br/>                <br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Make a local variable with a size of 256. This variable will be responsible for storing a final URL of the file, containing a main URL and location of the file at that address. Create a format for the variable and insert the URL using the global variable SERVER_DOWNLOAD and the variable filename.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:343px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span>IsPlayerConnected<span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span><span style="color: #000000;">)</span><br/>                    <span style="color: #2222BB;">return</span> <span style="color: #000000;">0</span>;<br/>                    <br/>                <span style="color: #2222BB;">new</span> filename<span style="color: #000000;">[</span><span style="color: #000000;">64</span><span style="color: #000000;">]</span>, filefound, final_url<span style="color: #000000;">[</span><span style="color: #000000;">256</span><span style="color: #000000;">]</span>;<br/>                <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_TEXTURE_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindTextureFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                <span style="color: #2222BB;">else</span> <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_MODEL_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindModelFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                    <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>filefound<span style="color: #000000;">)</span><br/>                <span style="color: #000000;">{</span><br/>                    <span style="color: #222222;">format</span><span style="color: #000000;">(</span>final_url, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>final_url<span style="color: #000000;">)</span>, <span style="color: #000066;">"%s/%s"</span>, SERVER_DOWNLOAD, filename<span style="color: #000000;">)</span>;<br/>                <span style="color: #000000;">}</span><br/>                <br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Now insert the function <b>RedirectDownload(playerid, url[])</b>, when the <b>url[]</b> is a last created local variable.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">pawn Код:</div>
<pre class="alt2" style="margin:0px; padding:6px; border: 1px solid #C2C2C2; width:800px; height:343px; overflow:auto"><div dir="ltr" style="text-align:left;"><div class="pawn" style="font-family:monospace;"><span style="color: #2222BB;">new</span> SERVER_DOWNLOAD<span style="color: #000000;">[</span><span style="color: #000000;">]</span> <span style="color: #000000;">=</span> <span style="color: #000066;">"http://www.dev-wil.com/downloads/038/models"</span>;<br/>            <span style="color: #2222BB;">public</span> OnPlayerRequestDownload<span style="color: #000000;">(</span>playerid, type, crc<span style="color: #000000;">)</span><br/>            <span style="color: #000000;">{</span><br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span><span style="color: #000000;">!</span>IsPlayerConnected<span style="color: #000000;">(</span>playerid<span style="color: #000000;">)</span><span style="color: #000000;">)</span><br/>                    <span style="color: #2222BB;">return</span> <span style="color: #000000;">0</span>;<br/>                    <br/>                <span style="color: #2222BB;">new</span> filename<span style="color: #000000;">[</span><span style="color: #000000;">64</span><span style="color: #000000;">]</span>, filefound, final_url<span style="color: #000000;">[</span><span style="color: #000000;">256</span><span style="color: #000000;">]</span>;<br/>                <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_TEXTURE_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindTextureFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                <span style="color: #2222BB;">else</span> <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>type <span style="color: #000000;">==</span> DOWNLOAD_REQUEST_MODEL_FILE<span style="color: #000000;">)</span><br/>                    filefound <span style="color: #000000;">=</span> FindModelFileNameFromCRC<span style="color: #000000;">(</span>crc, filename, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>filename<span style="color: #000000;">)</span><span style="color: #000000;">)</span>;<br/>                    <br/>                <span style="color: #2222BB;">if</span><span style="color: #000000;">(</span>filefound<span style="color: #000000;">)</span><br/>                <span style="color: #000000;">{</span><br/>                    <span style="color: #222222;">format</span><span style="color: #000000;">(</span>final_url, <span style="color: #2222BB;">sizeof</span><span style="color: #000000;">(</span>final_url<span style="color: #000000;">)</span>, <span style="color: #000066;">"%s/%s"</span>, SERVER_DOWNLOAD, filename<span style="color: #000000;">)</span>;<br/>                    RedirectDownload<span style="color: #000000;">(</span>playerid, final_url<span style="color: #000000;">)</span>;<br/>                <span style="color: #000000;">}</span><br/>                <span style="color: #2222BB;">return</span> <span style="color: #000000;">1</span>;<br/>            <span style="color: #000000;">}</span></div></div></pre>
</div></li>
<li> Turn on the SA-MP Server and go to inside the server, you will perceive a massive speed downloading your custom skins and objects;<br/></li>
<li> If the error <font color="red"><b>(22) HTTP Response co...</b></font> appears is because the URL way find is wrong. Make a debug and find the soluction.</li>
</ul></li>
</ul>
<u><div align="right">If you have any doubt please comment this thread. If you find any error or bad translation send me a PM.<br />
Sorry my bad english, I am not native speaker.</div></u>
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
Re: 0.3.DL: How to add custom skin, object and use the Redirect() - <a href="member5db4.html?action=profile&amp;uid=273174">RedRex</a> -  11.07.2018
<br />
<br />
nice! one!
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
Re: 0.3.DL: How to add custom skin, object and use the Redirect() - <a href="member16cb.html?action=profile&amp;uid=301605">SapMan</a> -  26.08.2018
<br />
<br />
Solution?<br />
<br />
<a href="https://forum.sa-mp.com/attachment.php?attachmentid=11825&amp;d=1535319523" title="Название: sa-mp-219.png<br />
Просмотров: 121<br />
<br />
Размер: 58.6 Кб">sa-mp-219.png</a><br />
<br />
<a href="https://forum.sa-mp.com/attachment.php?attachmentid=11826&amp;d=1535319581" title="Название: Captura.PNG<br />
Просмотров: 30<br />
<br />
Размер: 2.5 Кб">Captura.PNG</a><br />
<br />
<a href="https://forum.sa-mp.com/attachment.php?attachmentid=11827&amp;d=1535319584" title="Название: Captura1.PNG<br />
Просмотров: 57<br />
<br />
Размер: 3.4 Кб">Captura1.PNG</a><br />
<br />
<a href="https://forum.sa-mp.com/attachment.php?attachmentid=11828&amp;d=1535319588" title="Название: Captura2.PNG<br />
Просмотров: 39<br />
<br />
Размер: 5.9 Кб">Captura2.PNG</a><br />
<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">PHP код:</div>
<div class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px solid #C2C2C2;
		width: 800px;
		height: 322px;
		text-align: left;
		overflow: auto">
<code style="white-space:nowrap">
<!-- php buffer start --><code><span style="color: #000000">
<span style="color: #0000BB"></span><span style="color: #007700">new </span><span style="color: #0000BB">SERVER_DOWNLOAD</span><span style="color: #007700">[] = </span><span style="color: #DD0000">"http://github.com/SapMan/ServerModels/tree/master/models/"</span><span style="color: #007700">;
<br/>public </span><span style="color: #0000BB">OnPlayerRequestDownload</span><span style="color: #007700">(</span><span style="color: #0000BB">playerid</span><span style="color: #007700">, </span><span style="color: #0000BB">type</span><span style="color: #007700">, </span><span style="color: #0000BB">crc</span><span style="color: #007700">)
<br/>{
<br/>    if(!</span><span style="color: #0000BB">IsPlayerConnected</span><span style="color: #007700">(</span><span style="color: #0000BB">playerid</span><span style="color: #007700">)) return </span><span style="color: #0000BB">0</span><span style="color: #007700">;
<br/>    
<br/>    new </span><span style="color: #0000BB">filename</span><span style="color: #007700">[</span><span style="color: #0000BB">64</span><span style="color: #007700">], </span><span style="color: #0000BB">filefound</span><span style="color: #007700">, </span><span style="color: #0000BB">url_final</span><span style="color: #007700">[</span><span style="color: #0000BB">256</span><span style="color: #007700">];
<br/>    
<br/>    if(</span><span style="color: #0000BB">type </span><span style="color: #007700">== </span><span style="color: #0000BB">DOWNLOAD_REQUEST_TEXTURE_FILE</span><span style="color: #007700">)
<br/>        </span><span style="color: #0000BB">filefound </span><span style="color: #007700">= </span><span style="color: #0000BB">FindTextureFileNameFromCRC</span><span style="color: #007700">(</span><span style="color: #0000BB">crc</span><span style="color: #007700">, </span><span style="color: #0000BB">filename</span><span style="color: #007700">, </span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">filename</span><span style="color: #007700">));
<br/>    else if(</span><span style="color: #0000BB">type </span><span style="color: #007700">== </span><span style="color: #0000BB">DOWNLOAD_REQUEST_MODEL_FILE</span><span style="color: #007700">)
<br/>        </span><span style="color: #0000BB">filefound </span><span style="color: #007700">= </span><span style="color: #0000BB">FindModelFileNameFromCRC</span><span style="color: #007700">(</span><span style="color: #0000BB">crc</span><span style="color: #007700">, </span><span style="color: #0000BB">filename</span><span style="color: #007700">, </span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">filename</span><span style="color: #007700">));

<br/>    if(</span><span style="color: #0000BB">filefound</span><span style="color: #007700">)
<br/>    {
<br/>        </span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #0000BB">url_final</span><span style="color: #007700">, </span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">url_final</span><span style="color: #007700">), </span><span style="color: #DD0000">"%s/%s"</span><span style="color: #007700">, </span><span style="color: #0000BB">SERVER_DOWNLOAD</span><span style="color: #007700">, </span><span style="color: #0000BB">filename</span><span style="color: #007700">);
<br/>        </span><span style="color: #0000BB">RedirectDownload</span><span style="color: #007700">(</span><span style="color: #0000BB">playerid</span><span style="color: #007700">, </span><span style="color: #0000BB">url_final</span><span style="color: #007700">);
<br/>    }
<br/>    return </span><span style="color: #0000BB">1</span><span style="color: #007700">;
<br/>} 
<br/></span><span style="color: #0000BB"></span>
</span>
</code><!-- php buffer end -->
</code>
</div>
</div>
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
Re: 0.3.DL: How to add custom skin, object and use the Redirect() - <a href="member86bf.html?action=profile&amp;uid=291575">Hawsn</a> -  15.04.2019
<br />
<br />
how i can add custon skin of vehicle/weapon ?
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --><!-- start: printthread_post -->
Re: 0.3.DL: How to add custom skin, object and use the Redirect() - <a href="memberf2b1.html?action=profile&amp;uid=273076">homelessdrop</a> -  15.04.2019
<br />
<br />
Skin / Weapon isn't supported. You know use just objects and skin's.
<br />
<br />
<hr size="1" />
<!-- end: printthread_post --></div>

</div>
</body>
</html>
<!-- end: printthread -->